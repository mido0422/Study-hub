<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíª Study Hub - –ë–æ–ª–æ–≤—Å—Ä–æ–ª –∑–∞–≥–≤–∞—Ä</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #0056b3;
            --accent-color: #17a2b8;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --bg-color: #ffffff;
            --text-color: #333333;
            --border-color: #dee2e6;
            --shadow: 0 4px 8px rgba(0,123,255,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(180deg, #2d3748, #1a202c);
            background-attachment: fixed;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            font-size: 16px;
            line-height: 1.6;
            font-weight: 400;
            color: white;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        /* Enhanced Global Typography */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 0.5em;
            color: inherit;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1 { font-size: 2.5rem; font-weight: 900; }
        h2 { font-size: 2rem; font-weight: 800; color: white; }
        h3 { font-size: 1.75rem; font-weight: 700; }
        h4 { font-size: 1.5rem; font-weight: 600; }
        h5 { font-size: 1.25rem; font-weight: 600; }
        h6 { font-size: 1.1rem; font-weight: 600; }

        p {
            margin-bottom: 1em;
            line-height: 1.7;
            font-weight: 400;
        }

        .text-enhance {
            text-shadow: 0 1px 3px rgba(0,0,0,0.12);
            font-weight: 500;
        }

        /* Enhanced Layout System */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            background: linear-gradient(180deg, #2d3748, #1a202c);
            min-height: 100vh;
            color: white;
        }

        .section-spacing {
            margin: 60px 0;
        }

        .card-spacing {
            margin-bottom: 30px;
        }

        .element-spacing {
            margin-bottom: 20px;
        }

        /* Enhanced Grid System */
        .grid-enhanced {
            display: grid;
            gap: 20px;
        }

        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }

        /* Responsive Grid */
        @media (max-width: 768px) {
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
            }
        }

        /* Enhanced Spacing */
        .p-0 { padding: 0; }
        .p-1 { padding: 8px; }
        .p-2 { padding: 16px; }
        .p-3 { padding: 24px; }
        .p-4 { padding: 32px; }
        .p-5 { padding: 40px; }

        .m-0 { margin: 0; }
        .m-1 { margin: 8px; }
        .m-2 { margin: 16px; }
        .m-3 { margin: 24px; }
        .m-4 { margin: 32px; }
        .m-5 { margin: 40px; }

        .mt-0 { margin-top: 0; }
        .mt-1 { margin-top: 8px; }
        .mt-2 { margin-top: 16px; }
        .mt-3 { margin-top: 24px; }
        .mt-4 { margin-top: 32px; }
        .mt-5 { margin-top: 40px; }

        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: 8px; }
        .mb-2 { margin-bottom: 16px; }
        .mb-3 { margin-bottom: 24px; }
        .mb-4 { margin-bottom: 32px; }
        .mb-5 { margin-bottom: 40px; }

        /* Animated gradient background */
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Floating particles effect */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 50%);
            animation: floatParticles 25s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes floatParticles {
            0%, 100% { 
                transform: translate(0, 0) rotate(0deg) scale(1); 
                opacity: 0.3;
            }
            25% { 
                transform: translate(20px, -20px) rotate(90deg) scale(1.1); 
                opacity: 0.5;
            }
            50% { 
                transform: translate(-15px, 15px) rotate(180deg) scale(0.9); 
                opacity: 0.7;
            }
            75% { 
                transform: translate(25px, 10px) rotate(270deg) scale(1.2); 
                opacity: 0.4;
            }
        }

        /* Education Theme */
        .education-theme {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%) !important;
        }

        .education-theme .header {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
        }

        .education-theme .content-area {
            background: rgba(255, 255, 255, 0.95);
            color: #333333;
        }

        /* Nature Theme */
        .nature-theme {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%) !important;
        }

        .nature-theme .header {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .nature-theme .content-area {
            background: rgba(255, 255, 255, 0.9);
            color: #2d5016;
        }

        /* Cyber Theme */
        .cyber-theme {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%) !important;
        }

        .cyber-theme .header {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
            color: #00ffff;
        }

        .cyber-theme .content-area {
            background: rgba(0, 0, 0, 0.9);
            color: #00ffff;
        }

        /* Neon Theme */
        .neon-theme {
            background: linear-gradient(135deg, #0f0f23 0%, #1a0d2e 50%, #2d1b2e 100%) !important;
        }

        .neon-theme .header {
            background: linear-gradient(135deg, #0f0f23 0%, #1a0d2e 100%);
            color: #ff00ff;
        }

        .neon-theme .content-area {
            background: rgba(0, 0, 0, 0.95);
            color: #ff00ff;
        }

        /* Light Theme */
        .light-theme {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        }

        .light-theme .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .light-theme .content-area {
            background: white;
            color: #333333;
        }

        /* Dark Theme */
        .dark-theme {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%) !important;
        }

        .dark-theme .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
        }

        .dark-theme .content-area {
            background: #1a1a1a;
            color: #ffffff;
        }

        .app-container {
            background: var(--glass-bg);
            backdrop-filter: var(--blur-strong) saturate(200%) brightness(110%);
            border-radius: 28px;
            box-shadow: 
                var(--glass-shadow),
                0 0 0 1px var(--glass-border),
                inset 0 1px 0 rgba(255,255,255,0.3),
                inset 0 -1px 0 rgba(255,255,255,0.1);
            margin: 12px;
            min-height: calc(100vh - 24px);
            overflow: hidden;
            position: relative;
            z-index: 1;
            border: 1px solid var(--glass-border);
            transform: translateY(0);
            transition: var(--transition-smooth);
        }

        .app-container:hover {
            transform: translateY(-5px) scale(1.002);
            box-shadow: 
                var(--glass-shadow-hover),
                0 0 0 1px var(--glass-border-hover),
                inset 0 1px 0 rgba(255,255,255,0.4),
                var(--shadow-glow);
            background: var(--glass-bg-hover);
        }

        /* Enhanced glass morphism effect with shimmer */
        .app-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gradient-glass);
            pointer-events: none;
            z-index: -1;
            border-radius: 28px;
        }

        .app-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-shimmer);
            animation: shimmerEffect 3s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
            border-radius: 28px;
            opacity: 0.6;
        }

        @keyframes shimmerEffect {
            0%, 100% { left: -100%; opacity: 0; }
            50% { left: 100%; opacity: 0.6; }
        }

        .header {
            background: linear-gradient(180deg, #2d3748, #1a202c);
            color: white;
            padding: 30px 25px;
            text-align: center;
            border-radius: 28px 28px 0 0;
            position: relative;
            z-index: 10;
            backdrop-filter: blur(20px) saturate(150%);
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: var(--transition-smooth);
        }

        .header:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-strong);
            border-bottom-color: rgba(255, 255, 255, 0.25);
        }

        /* Enhanced animated header shimmer */
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 200%;
            height: 100%;
            background: var(--gradient-shimmer);
            animation: headerShimmer 6s ease-in-out infinite;
            z-index: 1;
        }

        @keyframes headerShimmer {
            0% { 
                left: -100%; 
                opacity: 0; 
                transform: skew(-20deg);
            }
            25% { 
                opacity: 0.8; 
            }
            50% { 
                left: 100%; 
                opacity: 0; 
                transform: skew(-20deg);
            }
            100% { 
                left: 100%; 
                opacity: 0; 
            }
        }

        /* Header decorative bottom line */
        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, 
                transparent 0%,
                rgba(255, 255, 255, 0.5) 20%,
                rgba(255, 255, 255, 0.8) 50%,
                rgba(255, 255, 255, 0.5) 80%,
                transparent 100%
            );
            animation: headerGlow 2s ease-in-out infinite alternate;
        }

        @keyframes headerGlow {
            from { opacity: 0.6; }
            to { opacity: 1; }
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px;
            margin-bottom: 20px;
            position: relative;
            z-index: 5;
            transition: var(--transition-smooth);
        }

        .logo:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 10px 30px rgba(255,255,255,0.3));
        }

        .logo-icon {
            font-size: 4.5rem;
            animation: logoFloat 4s ease-in-out infinite, iconPulse 2s ease-in-out infinite;
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.6));
            background: linear-gradient(45deg, #ffffff, #f0f8ff, #e6f3ff, #ffffff);
            background-size: 300% 300%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .logo-icon:hover {
            animation-play-state: paused;
            transform: scale(1.2) rotate(10deg);
            filter: drop-shadow(0 0 25px rgba(255,255,255,0.9));
        }

        /* Logo icon glow effect */
        .logo-icon::before {
            content: 'üìö';
            position: absolute;
            top: 0;
            left: 0;
            font-size: 4rem;
            background: linear-gradient(45deg, rgba(255,255,255,0.3), rgba(240,248,255,0.3));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: blur(8px);
            z-index: -1;
            animation: iconGlow 2s ease-in-out infinite alternate;
        }

        @keyframes logoFloat {
            0%, 100% { 
                transform: translateY(0) rotate(0deg) scale(1); 
            }
            25% { 
                transform: translateY(-10px) rotate(3deg) scale(1.06); 
            }
            50% { 
                transform: translateY(-7px) rotate(0deg) scale(1.1); 
            }
            75% { 
                transform: translateY(-4px) rotate(-2deg) scale(1.04); 
            }
        }

        @keyframes iconPulse {
            0%, 100% { 
                filter: drop-shadow(0 0 15px rgba(255,255,255,0.6)); 
                background-position: 0% 50%;
            }
            50% { 
                filter: drop-shadow(0 0 25px rgba(255,255,255,0.9)); 
                background-position: 100% 50%;
            }
        }

        @keyframes iconGlow {
            from { 
                opacity: 0.4; 
                transform: scale(0.98);
            }
            to { 
                opacity: 1; 
                transform: scale(1.02);
            }
        }

        .logo-text {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            font-size: 3.2rem;
            font-weight: 900;
            text-shadow: 
                0 0 25px rgba(255,255,255,0.9),
                0 0 50px rgba(255,255,255,0.5),
                0 4px 15px rgba(0,0,0,0.3),
                0 0 100px rgba(102, 126, 234, 0.2);
            letter-spacing: -2px;
            background: linear-gradient(135deg, 
                #ffffff 0%,
                #f0f8ff 25%,
                #e6f3ff 50%,
                #ffffff 75%,
                #f8faff 100%
            );
            background-size: 200% 200%;
            animation: textShimmer 4s ease-in-out infinite;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            z-index: 2;
            transition: var(--transition-smooth);
        }

        .logo-text:hover {
            transform: scale(1.05);
            letter-spacing: 0px;
            animation-play-state: paused;
        }

        @keyframes textShimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes textShine {
            0%, 100% { 
                filter: brightness(1) contrast(1);
                transform: scale(1);
            }
            50% { 
                filter: brightness(1.2) contrast(1.1);
                transform: scale(1.02);
            }
        }

        .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            font-weight: 400;
            position: relative;
            z-index: 3;
            text-shadow: 
                0 2px 8px rgba(0,0,0,0.2),
                0 0 20px rgba(255,255,255,0.3);
            letter-spacing: 0.5px;
            line-height: 1.6;
            margin-top: 10px;
            transition: var(--transition-smooth);
        }

        .subtitle:hover {
            opacity: 1;
            transform: translateY(-2px);
            text-shadow: 
                0 4px 12px rgba(0,0,0,0.3),
                0 0 30px rgba(255,255,255,0.5);
        }

        .nav-tabs {
            display: flex;
            background: rgba(45, 55, 72, 0.9);
            border-radius: 18px;
            margin-top: 30px;
            position: relative;
            z-index: 3;
            padding: 10px;
            gap: 6px;
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: var(--transition-smooth);
        }

        .nav-tabs:hover {
            background: var(--glass-bg-hover);
            border-color: var(--glass-border-hover);
            box-shadow: var(--shadow-medium);
            transform: translateY(-1px);
        }

        .nav-tab {
            flex: 1;
            padding: 20px 14px;
            text-align: center;
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            transition: var(--transition-smooth);
            font-size: 1rem;
            font-weight: 700;
            border-radius: 14px;
            position: relative;
            overflow: hidden;
            backdrop-filter: var(--blur-subtle);
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .nav-tab:hover {
            transform: translateY(-3px) scale(1.05);
            background: rgba(255,255,255,0.12);
            box-shadow: 
                var(--shadow-soft),
                0 0 20px rgba(255,255,255,0.2);
            text-shadow: 0 0 15px rgba(255,255,255,0.8);
        }

        /* Tab hover glow effect */
        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255,255,255,0.2), 
                transparent
            );
            transition: left 0.5s;
        }

        .nav-tab:hover::before {
            left: 100%;
        }

        .nav-tab:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 
                0 8px 25px rgba(255,255,255,0.15),
                inset 0 1px 0 rgba(255,255,255,0.2);
        }

        .nav-tab.active {
            background: rgba(255,255,255,0.25);
            box-shadow: 
                0 8px 32px rgba(255,255,255,0.2),
                inset 0 1px 0 rgba(255,255,255,0.3),
                0 0 0 1px rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        /* Active tab indicator */
        .nav-tab.active::after {
            content: '';
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background: linear-gradient(90deg, 
                rgba(255,255,255,0.8), 
                rgba(255,255,255,1), 
                rgba(255,255,255,0.8)
            );
            border-radius: 2px;
            animation: activeIndicator 2s ease-in-out infinite;
        }

        @keyframes activeIndicator {
            0%, 100% { opacity: 0.8; width: 30px; }
            50% { opacity: 1; width: 40px; }
        }

        .content-area {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.97) 0%,
                rgba(248, 250, 252, 0.99) 25%,
                rgba(241, 245, 249, 0.97) 50%,
                rgba(236, 242, 248, 0.99) 75%,
                rgba(255, 255, 255, 0.95) 100%
            );
            background-size: 200% 200%;
            animation: gradientShift 10s ease-in-out infinite;
            backdrop-filter: var(--blur-medium) saturate(180%);
            padding: 40px;
            min-height: 650px;
            color: #1e293b;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.5);
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Enhanced content area decorative elements */
        .content-area::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, 
                rgba(102, 126, 234, 0.08) 0%, 
                rgba(102, 126, 234, 0.04) 40%,
                transparent 70%
            );
            border-radius: 50%;
            animation: floatTopRight 12s ease-in-out infinite;
            filter: blur(1px);
        }

        .content-area::after {
            content: '';
            position: absolute;
            bottom: -40px;
            left: -40px;
            width: 180px;
            height: 180px;
            background: radial-gradient(circle, 
                rgba(240, 147, 251, 0.08) 0%, 
                rgba(240, 147, 251, 0.04) 40%,
                transparent 70%
            );
            border-radius: 50%;
            animation: floatBottomLeft 9s ease-in-out infinite;
            filter: blur(1px);
        }

        @keyframes floatTopRight {
            0%, 100% { 
                transform: translate(0, 0) scale(1) rotate(0deg);
                opacity: 0.3;
            }
            25% { 
                transform: translate(-15px, 10px) scale(1.05) rotate(90deg);
                opacity: 0.5;
            }
            50% { 
                transform: translate(-25px, 20px) scale(1.1) rotate(180deg);
                opacity: 0.7;
            }
            75% { 
                transform: translate(-10px, 15px) scale(1.02) rotate(270deg);
                opacity: 0.4;
            }
        }

        @keyframes floatBottomLeft {
            0%, 100% { 
                transform: translate(0, 0) scale(1) rotate(360deg);
                opacity: 0.4;
            }
            33% { 
                transform: translate(20px, -10px) scale(0.95) rotate(120deg);
                opacity: 0.6;
            }
            66% { 
                transform: translate(35px, -20px) scale(0.9) rotate(240deg);
                opacity: 0.8;
            }
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
            background: transparent;
            color: white;
            padding: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content:not(#tasks) {
            background: linear-gradient(180deg, #2d3748, #1a202c);
            min-height: calc(100vh - 200px);
            margin: -20px;
            padding: 40px 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-card {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.15) 0%, 
                rgba(248, 250, 252, 0.2) 50%,
                rgba(241, 245, 249, 0.15) 100%
            );
            backdrop-filter: blur(25px) saturate(180%);
            border-radius: 24px;
            padding: 45px 35px;
            text-align: center;
            box-shadow: 
                0 25px 50px rgba(102, 126, 234, 0.12),
                0 0 0 1px rgba(255, 255, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.25);
            margin-bottom: 35px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            position: relative;
            overflow: hidden;
            transform: translateY(0);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .welcome-card:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 35px 70px rgba(102, 126, 234, 0.18),
                0 0 0 1px rgba(255, 255, 255, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.35);
        }

        /* Welcome card animated particles */
        .welcome-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(240, 147, 251, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(118, 75, 162, 0.05) 0%, transparent 50%);
            animation: welcomeParticles 8s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes welcomeParticles {
            0%, 100% { 
                opacity: 0.6; 
                transform: scale(1) rotate(0deg); 
            }
            33% { 
                opacity: 0.8; 
                transform: scale(1.05) rotate(120deg); 
            }
            66% { 
                opacity: 0.4; 
                transform: scale(0.95) rotate(240deg); 
            }
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 40px;
            padding: 0 10px;
        }

        .feature-card {
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: var(--transition-smooth);
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            color: white;
        }

        .feature-card:nth-child(1) {
            background: linear-gradient(135deg, #9ae6b4, #68d391);
        }

        .feature-card:nth-child(2) {
            background: linear-gradient(135deg, #63b3ed, #4299e1);
        }

        .feature-card:nth-child(3) {
            background: linear-gradient(135deg, #d6bcfa, #b794f6);
        }

        .feature-card:nth-child(4) {
            background: linear-gradient(135deg, #fbb6ce, #f687b3);
        }

        .feature-card:nth-child(5) {
            background: linear-gradient(135deg, #fed7aa, #fdba74);
        }

        .feature-card:nth-child(6) {
            background: linear-gradient(135deg, #c6f6d5, #9ae6b4);
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-shimmer);
            transition: var(--transition-slow);
            z-index: 1;
        }

        .feature-card:hover::before {
            left: 100%;
        }

        .feature-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .feature-card:active {
            transform: translateY(-5px) scale(1.01);
            transition: var(--transition-fast);
        }

        .feature-icon {
            font-size: 4rem;
            margin-bottom: 25px;
            display: block;
            animation: iconBounce 4s ease-in-out infinite;
            filter: drop-shadow(0 6px 12px rgba(0,0,0,0.3));
            transition: var(--transition-smooth);
            color: rgba(26, 32, 44, 0.8);
            position: relative;
            z-index: 2;
        }

        .feature-card:hover .feature-icon {
            transform: scale(1.15) rotateY(10deg);
            filter: drop-shadow(0 10px 25px rgba(102, 126, 234, 0.4));
            animation-play-state: paused;
        }

        @keyframes iconBounce {
            0%, 100% { 
                transform: translateY(0) scale(1) rotateZ(0deg); 
            }
            25% { 
                transform: translateY(-8px) scale(1.06) rotateZ(2deg); 
            }
            50% { 
                transform: translateY(-4px) scale(1.04) rotateZ(0deg); 
            }
            75% { 
                transform: translateY(-2px) scale(1.02) rotateZ(-1deg); 
            }
        }

        .feature-title {
            font-size: 1.4rem;
            font-weight: 800;
            margin-bottom: 15px;
            color: #1a202c;
            position: relative;
        }

        .feature-desc {
            color: rgba(26, 32, 44, 0.8);
            line-height: 1.7;
            font-weight: 500;
            position: relative;
            z-index: 1;
            transition: color 0.3s ease;
        }

        .feature-card:hover .feature-desc {
            color: rgba(26, 32, 44, 0.9);
        }

        /* Progress Dashboard Styles */
        .progress-category {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .progress-category:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .progress-badge {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .progress-item {
            margin-bottom: 15px;
        }

        .progress-bar {
            height: 12px;
            background: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #0056b3);
            border-radius: 6px;
            transition: width 0.8s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
            font-size: 0.9rem;
            color: #666;
        }

        .weekly-activity-chart {
            height: 150px;
        }

        .activity-day {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .activity-label {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .activity-bar {
            width: 25px;
            background: linear-gradient(180deg, #007bff, #0056b3);
            border-radius: 4px 4px 0 0;
            min-height: 4px;
            margin-bottom: 8px;
            transition: height 0.6s ease;
            position: relative;
        }

        .activity-value {
            font-size: 0.8rem;
            color: #333;
            font-weight: 600;
        }

        .achievements-grid {
            max-height: 200px;
            overflow-y: auto;
        }

        .achievement-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 4px solid #ffc107;
        }

        .achievement-item:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .achievement-icon {
            font-size: 2rem;
            margin-bottom: 8px;
            display: block;
        }

        .achievement-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .achievement-desc {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.4;
        }

        /* Theme Selection Styles */
        .theme-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .theme-option {
            background: white;
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            text-align: center;
        }

        .theme-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .theme-option.active {
            border-color: #007bff;
            box-shadow: 0 0 20px rgba(0,123,255,0.3);
        }

        .theme-preview {
            width: 100%;
            height: 60px;
            border-radius: 10px;
            margin-bottom: 10px;
            position: relative;
            overflow: hidden;
        }

        .theme-preview.education-theme {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
        }

        .theme-preview.nature-theme {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .theme-preview.cyber-theme {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
        }

        .theme-preview.neon-theme {
            background: linear-gradient(135deg, #0f0f23 0%, #1a0d2e 100%);
        }

        .theme-preview.light-theme {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .theme-preview.dark-theme {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }

        .theme-header {
            height: 20px;
            background: rgba(255,255,255,0.3);
            margin: 5px;
            border-radius: 5px;
        }

        .theme-content {
            height: 25px;
            background: rgba(255,255,255,0.5);
            margin: 5px;
            border-radius: 5px;
        }

        /* Settings Styles */
        .settings-section {
            background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
            border-radius: 15px;
            padding: 0;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .settings-header {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .settings-header h2 {
            margin: 0 0 10px 0;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .settings-header p {
            margin: 0;
            opacity: 0.9;
            font-size: 1rem;
        }

        .settings-nav {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 0;
            background: #f8f9fa;
            border-bottom: 3px solid #e9ecef;
            padding: 0;
        }

        .settings-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 20px 15px;
            background: transparent;
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            color: #666;
            position: relative;
            overflow: hidden;
        }

        .settings-nav-item::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0;
            background: linear-gradient(135deg, #007bff, #0056b3);
            transition: height 0.3s ease;
        }

        .settings-nav-item:hover {
            background: #ffffff;
            color: #007bff;
            transform: translateY(-2px);
        }

        .settings-nav-item.active {
            background: #ffffff;
            color: #007bff;
            box-shadow: 0 -5px 20px rgba(0,123,255,0.2);
        }

        .settings-nav-item.active::before {
            height: 4px;
        }

        .nav-icon {
            font-size: 1.5rem;
        }

        .nav-text {
            font-size: 0.9rem;
            text-align: center;
        }

        .settings-content {
            display: none;
            padding: 30px;
        }

        .settings-content.active {
            display: block;
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .settings-card {
            background: white;
            border-radius: 15px;
            padding: 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            overflow: hidden;
            border: 1px solid #e9ecef;
        }

        .card-header {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            padding: 25px 30px;
            border-bottom: 2px solid #e9ecef;
        }

        .card-header h3 {
            margin: 0 0 8px 0;
            color: #2c3e50;
            font-size: 1.4rem;
            font-weight: 700;
        }

        .card-header p {
            margin: 0;
            color: #6c757d;
            font-size: 0.95rem;
        }

        .card-footer {
            background: #f8f9fa;
            padding: 20px 30px;
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            border-top: 2px solid #e9ecef;
        }

        /* Theme Settings Styles */
        .theme-categories {
            padding: 30px;
        }

        .category-section {
            margin-bottom: 40px;
        }

        .category-section:last-child {
            margin-bottom: 0;
        }

        .category-section h4 {
            color: #2c3e50;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .theme-option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .theme-option:hover {
            border-color: #007bff;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,123,255,0.15);
        }

        .theme-option.active {
            border-color: #007bff;
            background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
        }

        .theme-option.active::before {
            content: '‚úì';
            position: absolute;
            top: 10px;
            right: 10px;
            background: #007bff;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
        }

        .theme-preview {
            height: 80px;
            border-radius: 8px;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
        }

        .preview-header {
            height: 30%;
            width: 100%;
        }

        .preview-content {
            height: 70%;
            padding: 8px;
            display: flex;
            gap: 5px;
        }

        .preview-card {
            flex: 1;
            border-radius: 4px;
            opacity: 0.7;
        }

        .theme-info {
            text-align: center;
        }

        .theme-name {
            display: block;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .theme-desc {
            display: block;
            font-size: 0.85rem;
            color: #6c757d;
        }

        /* Theme Previews */
        .education-preview .preview-header { background: linear-gradient(135deg, #007bff, #0056b3); }
        .education-preview .preview-card { background: #cce7ff; }

        .academic-preview .preview-header { background: linear-gradient(135deg, #6f42c1, #5a2d91); }
        .academic-preview .preview-card { background: #e2d9f3; }

        .nature-preview .preview-header { background: linear-gradient(135deg, #28a745, #1e7e34); }
        .nature-preview .preview-card { background: #d4edda; }

        .sunset-preview .preview-header { background: linear-gradient(135deg, #fd7e14, #dc3545); }
        .sunset-preview .preview-card { background: #ffeaa7; }

        .ocean-preview .preview-header { background: linear-gradient(135deg, #17a2b8, #138496); }
        .ocean-preview .preview-card { background: #bee5eb; }

        .cyber-preview .preview-header { background: linear-gradient(135deg, #343a40, #00d4ff); }
        .cyber-preview .preview-card { background: #6c757d; }

        .neon-preview .preview-header { background: linear-gradient(135deg, #e91e63, #9c27b0); }
        .neon-preview .preview-card { background: #f8bbd9; }

        .minimal-preview .preview-header { background: linear-gradient(135deg, #6c757d, #495057); }
        .minimal-preview .preview-card { background: #f8f9fa; }

        .light-preview .preview-header { background: linear-gradient(135deg, #ffc107, #fd7e14); }
        .light-preview .preview-card { background: #fff3cd; }

        .dark-preview .preview-header { background: linear-gradient(135deg, #343a40, #212529); }
        .dark-preview .preview-card { background: #6c757d; }

        .auto-preview .preview-header { 
            background: linear-gradient(45deg, #ffc107 0%, #ffc107 50%, #343a40 50%, #343a40 100%); 
        }
        .auto-preview .preview-card { background: linear-gradient(45deg, #fff3cd 50%, #6c757d 50%); }

        .theme-customization {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            border: 2px dashed #dee2e6;
        }

        .theme-customization h4 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .customization-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .option-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .option-group label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9rem;
        }

        .option-group input, .option-group select {
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .option-group input:focus, .option-group select:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        /* Profile Settings Styles */
        .profile-form {
            padding: 30px;
        }

        .profile-picture-section {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            border: 2px dashed #dee2e6;
        }

        .current-picture {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #007bff, #0056b3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            box-shadow: 0 5px 15px rgba(0,123,255,0.3);
        }

        .picture-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }

        /* Notification Settings Styles */
        .notification-groups {
            padding: 30px;
        }

        .notification-group {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #007bff;
        }

        .notification-group h4 {
            margin: 0 0 20px 0;
            color: #2c3e50;
            font-size: 1.1rem;
        }

        .notification-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .item-info {
            flex: 1;
        }

        .item-title {
            display: block;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .item-desc {
            display: block;
            font-size: 0.85rem;
            color: #6c757d;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #007bff;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .notification-timing {
            padding: 25px 30px;
            background: #e3f2fd;
            border-radius: 12px;
            margin: 20px 30px 0 30px;
        }

        .notification-timing h4 {
            margin-bottom: 20px;
            color: #1976d2;
        }

        .timing-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .timing-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .timing-item label {
            font-weight: 600;
            color: #1976d2;
        }

        .timing-item input {
            padding: 10px;
            border: 2px solid #bbdefb;
            border-radius: 8px;
        }

        /* Data Settings Styles */
        .data-sections {
            padding: 30px;
        }

        .data-section {
            margin-bottom: 30px;
            padding: 25px;
            background: white;
            border-radius: 12px;
            border: 2px solid #e9ecef;
        }

        .data-section.danger-section {
            border-color: #dc3545;
            background: linear-gradient(135deg, #fff5f5 0%, #fff 100%);
        }

        .data-section h4 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .export-options, .danger-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .import-area {
            padding: 20px;
            border: 2px dashed #007bff;
            border-radius: 12px;
            text-align: center;
            background: #f0f8ff;
            margin-top: 15px;
        }

        .backup-settings {
            margin-top: 15px;
        }

        .backup-option {
            margin-bottom: 15px;
        }

        .backup-frequency {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .storage-info {
            margin: 20px 30px 0 30px;
            padding: 20px;
            background: #e8f5e8;
            border-radius: 12px;
        }

        .storage-stats {
            display: grid;
            gap: 10px;
            margin-top: 15px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #c3e6c3;
        }

        /* Language Settings Styles */
        .language-options {
            padding: 30px;
            display: grid;
            gap: 25px;
        }

        /* Privacy Settings Styles */
        .privacy-sections {
            padding: 30px;
        }

        .privacy-section {
            margin-bottom: 30px;
            padding: 25px;
            background: white;
            border-radius: 12px;
            border: 2px solid #e9ecef;
        }

        .security-options, .sharing-options, .data-collection {
            margin-top: 20px;
        }

        .security-item, .sharing-item, .collection-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .security-item:last-child, .sharing-item:last-child, .collection-item:last-child {
            border-bottom: none;
        }

        /* Button Styles */
        .btn-primary, .btn-success, .btn-secondary, .btn-outline, .btn-outline-danger, .btn-danger {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 700;
            font-size: 0.95rem;
            transition: var(--transition-smooth);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            backdrop-filter: var(--blur-subtle);
        }

        .btn-primary::before, .btn-success::before, .btn-secondary::before, .btn-danger::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--gradient-shimmer);
            transition: var(--transition-slow);
            z-index: 1;
        }

        .btn-primary:hover::before, .btn-success:hover::before, .btn-secondary:hover::before, .btn-danger:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #0056b3, #003d82);
            transform: translateY(-4px) scale(1.03);
            box-shadow: var(--shadow-medium), 0 0 20px rgba(0,123,255,0.4);
        }

        .btn-primary:active {
            transform: translateY(-1px) scale(0.98);
            transition: var(--transition-fast);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #1e7e34, #155724);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40,167,69,0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            color: #007bff;
            border: 2px solid #007bff;
        }

        .btn-outline:hover {
            background: #007bff;
            color: white;
        }

        .btn-outline-danger {
            background: transparent;
            color: #dc3545;
            border: 2px solid #dc3545;
        }

        .btn-outline-danger:hover {
            background: #dc3545;
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc3545, #bd2130);
            color: white;
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #bd2130, #a71e2a);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220,53,69,0.3);
        }

        /* Admin Settings Styles */
        .admin-only {
            border-left: 4px solid #ffd700 !important;
        }

        .admin-sections {
            padding: 30px;
        }

        .admin-section {
            margin-bottom: 35px;
            padding: 25px;
            background: rgba(255,255,255,0.95);
            border-radius: 16px;
            border: 2px solid rgba(255,215,0,0.2);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(255,215,0,0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .admin-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 48px rgba(255,215,0,0.15);
            border-color: rgba(255,215,0,0.3);
        }

        .admin-section h4 {
            color: #b8860b;
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-options {
            margin-top: 20px;
        }

        .admin-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 0;
            border-bottom: 1px solid rgba(255,215,0,0.1);
            transition: all 0.3s ease;
        }

        .admin-item:last-child {
            border-bottom: none;
        }

        .admin-item:hover {
            background: rgba(255,215,0,0.05);
            border-radius: 8px;
            padding: 18px 12px;
            margin: 0 -12px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
            border: 2px solid rgba(255,215,0,0.2);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,215,0,0.2), transparent);
            transition: left 0.6s ease;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(255,215,0,0.2);
            border-color: rgba(255,215,0,0.4);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            color: #b8860b;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 600;
        }

        /* Admin buttons with special styling */
        .admin-section .btn-primary {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            border: none;
        }

        .admin-section .btn-primary:hover {
            background: linear-gradient(135deg, #ffed4e, #fff59d);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255,215,0,0.4);
        }

        /* Mobile Testing Panel Styles */
        .mobile-testing-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: var(--blur-strong);
            z-index: 1000;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
            animation: slideInFromTop 0.3s ease-out;
        }

        @keyframes slideInFromTop {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .testing-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
            padding-bottom: 15px;
        }

        .testing-header h3 {
            font-size: 1.8rem;
            margin: 0;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .close-testing {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: var(--transition-smooth);
        }

        .close-testing:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.1);
        }

        .testing-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .testing-controls h4 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .device-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
        }

        .device-btn, .orientation-btn, .touch-btn {
            padding: 12px 16px;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border: 2px solid rgba(255,255,255,0.2);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition-smooth);
            backdrop-filter: var(--blur-subtle);
        }

        .device-btn:hover, .orientation-btn:hover, .touch-btn:hover {
            background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.1));
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .device-btn.reset {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            border-color: #ff6b6b;
        }

        .perf-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .stat {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            color: white;
            font-weight: 600;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .results-container {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 20px;
            color: white;
            min-height: 150px;
            backdrop-filter: var(--blur-subtle);
        }

        .test-results h4 {
            color: white;
            margin-bottom: 15px;
        }

        /* Enhanced Touch Interactions */
        @media (hover: none) and (pointer: coarse) {
            /* Touch device specific styles */
            .feature-card:hover {
                transform: none;
            }
            
            .feature-card:active {
                transform: translateY(-5px) scale(0.98);
                transition: var(--transition-fast);
            }
            
            .nav-tab:hover {
                transform: none;
            }
            
            .nav-tab:active {
                transform: scale(0.95);
                background: rgba(255,255,255,0.2);
            }
            
            .btn-primary:hover, .btn-success:hover, .btn-secondary:hover {
                transform: none;
            }
            
            .btn-primary:active, .btn-success:active, .btn-secondary:active {
                transform: scale(0.95);
            }
        }

        /* Touch-friendly improvements */
        .nav-tab, .feature-card, .btn-primary, .btn-success, .btn-secondary, .btn-outline, .btn-danger {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        /* Improved touch targets */
        @media (max-width: 768px) {
            .nav-tab {
                min-height: 44px;
                padding: 14px 12px;
            }
            
            .btn-primary, .btn-success, .btn-secondary, .btn-outline, .btn-danger {
                min-height: 44px;
                padding: 14px 20px;
            }
            
            .feature-card {
                padding: 25px;
                margin-bottom: 15px;
            }
        }

        /* Lessons Section Styles */
        .lessons-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .subject-categories {
            margin-bottom: 40px;
        }

        .subject-categories h3 {
            color: #1e293b;
            font-size: 1.5rem;
            margin-bottom: 25px;
            text-align: left;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-card {
            border: none;
            border-radius: 16px;
            padding: 25px;
            cursor: pointer;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            color: white;
        }

        .category-card:nth-child(1) {
            background: linear-gradient(135deg, #9ae6b4, #68d391);
        }

        .category-card:nth-child(2) {
            background: linear-gradient(135deg, #63b3ed, #4299e1);
        }

        .category-card:nth-child(3) {
            background: linear-gradient(135deg, #d6bcfa, #b794f6);
        }

        .category-card:nth-child(4) {
            background: linear-gradient(135deg, #fbb6ce, #f687b3);
        }

        .category-card:nth-child(5) {
            background: linear-gradient(135deg, #fed7aa, #fdba74);
        }

        .category-card:nth-child(6) {
            background: linear-gradient(135deg, #c6f6d5, #9ae6b4);
        }

        .category-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .category-card h4 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1a202c;
            text-align: center;
        }

        .progress-info {
            text-align: center;
        }

        .lesson-count {
            font-size: 0.9rem;
            color: rgba(26, 32, 44, 0.7);
            margin-bottom: 10px;
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .progress-text {
            font-size: 0.8rem;
            color: rgba(26, 32, 44, 0.8);
            font-weight: 600;
        }

        /* Recent Lessons */
        .recent-lessons, .today-schedule {
            margin-bottom: 40px;
        }

        .recent-lessons h3, .today-schedule h3 {
            color: #1e293b;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .lesson-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .lesson-item {
            background: rgba(255,255,255,0.95);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .lesson-item:hover {
            transform: translateX(10px);
            box-shadow: var(--shadow-soft);
        }

        .lesson-item.completed {
            border-color: rgba(34, 197, 94, 0.3);
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(255,255,255,0.95));
        }

        .lesson-item.current {
            border-color: rgba(59, 130, 246, 0.4);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(255,255,255,0.95));
            animation: pulse 2s infinite;
        }

        .lesson-item.upcoming {
            border-color: rgba(156, 163, 175, 0.3);
            opacity: 0.8;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); }
        }

        .lesson-icon {
            font-size: 2.5rem;
            width: 60px;
            text-align: center;
        }

        .lesson-info {
            flex: 1;
        }

        .lesson-info h4 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 5px;
            color: #1e293b;
        }

        .lesson-info p {
            color: #64748b;
            margin-bottom: 10px;
        }

        .lesson-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .tag.completed {
            background: rgba(34, 197, 94, 0.1);
            color: #16a34a;
        }

        .tag.current {
            background: rgba(59, 130, 246, 0.1);
            color: #2563eb;
        }

        .tag.upcoming {
            background: rgba(156, 163, 175, 0.1);
            color: #6b7280;
        }

        .lesson-score {
            font-size: 1.5rem;
            font-weight: 800;
            color: #16a34a;
        }

        .lesson-progress {
            display: flex;
            align-items: center;
        }

        .progress-circle {
            width: 50px;
            height: 50px;
            border: 3px solid #e2e8f0;
            border-top: 3px solid #2563eb;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            color: #2563eb;
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .lesson-schedule {
            text-align: right;
            color: #64748b;
            font-weight: 600;
        }

        /* Today's Schedule Timeline */
        .schedule-timeline {
            position: relative;
            padding-left: 30px;
        }

        .schedule-timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, #667eea, #764ba2);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -23px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e2e8f0;
        }

        .timeline-item.completed::before {
            background: #16a34a;
        }

        .timeline-item.current::before {
            background: #2563eb;
            animation: pulse 1.5s infinite;
        }

        .timeline-item.upcoming::before {
            background: #9ca3af;
        }

        .timeline-time {
            font-weight: 700;
            color: #475569;
            min-width: 60px;
        }

        .timeline-content {
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 8px;
            flex: 1;
            border-left: 4px solid transparent;
        }

        .timeline-item.completed .timeline-content {
            border-color: #16a34a;
        }

        .timeline-item.current .timeline-content {
            border-color: #2563eb;
        }

        .timeline-item.upcoming .timeline-content {
            border-color: #9ca3af;
        }

        .timeline-content h4 {
            margin-bottom: 5px;
            color: #1e293b;
        }

        .timeline-content p {
            color: #64748b;
            margin-bottom: 8px;
        }

        .status {
            font-size: 0.8rem;
            font-weight: 600;
            padding: 3px 8px;
            border-radius: 8px;
        }

        .status.completed {
            background: rgba(34, 197, 94, 0.1);
            color: #16a34a;
        }

        .status.current {
            background: rgba(59, 130, 246, 0.1);
            color: #2563eb;
        }

        .status.upcoming {
            background: rgba(156, 163, 175, 0.1);
            color: #6b7280;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Font Size Classes */
        .font-small {
            font-size: 0.85rem;
        }

        .font-small h1 { font-size: 1.5rem; }
        .font-small h2 { font-size: 1.3rem; }
        .font-small h3 { font-size: 1.1rem; }
        .font-small h4 { font-size: 1rem; }

        .font-medium {
            font-size: 1rem;
        }

        .font-medium h1 { font-size: 1.8rem; }
        .font-medium h2 { font-size: 1.5rem; }
        .font-medium h3 { font-size: 1.3rem; }
        .font-medium h4 { font-size: 1.1rem; }

        .font-large {
            font-size: 1.15rem;
        }

        .font-large h1 { font-size: 2.1rem; }
        .font-large h2 { font-size: 1.8rem; }
        .font-large h3 { font-size: 1.5rem; }
        .font-large h4 { font-size: 1.3rem; }

        /* Enhanced Design System Variables */
        :root {
            /* Primary Colors */
            --primary-color: #667eea;
            --accent-color: #f093fb;
            --background-color: #ffffff;
            --text-color: #1e293b;
            
            /* Glass Morphism Enhanced */
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-bg-hover: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.12);
            --glass-border-hover: rgba(255, 255, 255, 0.25);
            --glass-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            --glass-shadow-hover: 0 15px 50px rgba(31, 38, 135, 0.45);
            
            /* Advanced Gradients */
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-accent: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            --gradient-shimmer: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            
            /* Backdrop Filters */
            --blur-subtle: blur(8px);
            --blur-medium: blur(15px);
            --blur-strong: blur(25px);
            
            /* Shadows & Depth */
            --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.08);
            --shadow-medium: 0 8px 30px rgba(0, 0, 0, 0.12);
            --shadow-strong: 0 20px 60px rgba(0, 0, 0, 0.15);
            --shadow-glow: 0 0 30px rgba(102, 126, 234, 0.3);
            
            /* Animation Timing */
            --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Global scroll enhancement */
        * {
            scrollbar-width: thin;
            scrollbar-color: rgba(102, 126, 234, 0.3) transparent;
        }

        *::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        *::-webkit-scrollbar-track {
            background: transparent;
        }

        *::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, 
                rgba(102, 126, 234, 0.4), 
                rgba(240, 147, 251, 0.4)
            );
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        *::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, 
                rgba(102, 126, 234, 0.6), 
                rgba(240, 147, 251, 0.6)
            );
        }

        /* Interactive button enhancements */
        button, .btn {
            position: relative;
            overflow: hidden;
        }

        button::before, .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        button:active::before, .btn:active::before {
            width: 300px;
            height: 300px;
        }

        /* Loading state animations */
        .loading-shimmer {
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.1) 25%, 
                rgba(255, 255, 255, 0.3) 50%, 
                rgba(255, 255, 255, 0.1) 75%
            );
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Enhanced focus states */
        *:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3) !important;
        }

        /* Improved transitions */
        * {
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Apply custom colors */
        .btn-primary, .settings-nav-item.active, .nav-tab.active {
            background: var(--primary-color) !important;
        }

        .btn-success {
            background: var(--accent-color) !important;
        }

        /* Theme option active indicator using custom color */
        .theme-option.active::before {
            background: var(--primary-color) !important;
        }

        /* Enhanced animations and effects */
        .settings-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .settings-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            transform: scale(1.02);
        }

        .notification-item:hover {
            background: rgba(0,123,255,0.05);
            border-radius: 8px;
        }

        .data-section:hover {
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        .storage-stats {
            animation: slideIn 0.5s ease;
        }

        .theme-option:hover .theme-preview {
            transform: scale(1.05);
        }

        .profile-picture-section:hover .current-picture {
            transform: scale(1.1) rotate(5deg);
        }

        /* Loading states */
        .loading::after {
            content: '';
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid transparent;
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Success/Error states */
        .form-group.success input {
            border-color: #28a745;
            box-shadow: 0 0 0 3px rgba(40,167,69,0.1);
        }

        .form-group.error input {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220,53,69,0.1);
        }

        /* Micro-interactions */
        .switch:hover .slider {
            box-shadow: 0 0 10px rgba(0,123,255,0.3);
        }

        .btn-primary:active, .btn-success:active, .btn-secondary:active,
        .btn-outline:active, .btn-outline-danger:active, .btn-danger:active {
            transform: translateY(0) scale(0.98);
        }

        /* Pulsing effect for important buttons */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0,123,255,0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0,123,255,0); }
            100% { box-shadow: 0 0 0 0 rgba(0,123,255,0); }
        }

        .btn-primary.pulse {
            animation: pulse 2s infinite;
        }

        /* Validation feedback styles */
        .validation-feedback {
            font-size: 0.85rem;
            margin-top: 5px;
            padding: 5px 10px;
            border-radius: 5px;
            background: #fff5f5;
            color: #dc3545;
            border: 1px solid #fecaca;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .validation-feedback::before {
            content: '‚ö†Ô∏è';
            font-size: 0.8rem;
        }

        .form-group.success .validation-feedback {
            background: #f0fff4;
            color: #28a745;
            border-color: #c3e6cb;
        }

        .form-group.success .validation-feedback::before {
            content: '‚úÖ';
        }

        /* Improved form animations */
        .form-group input, .form-group select, .form-group textarea {
            position: relative;
            z-index: 1;
        }

        .form-group::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(0,123,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
            z-index: 0;
        }

        .form-group.success::before {
            background: linear-gradient(45deg, transparent, rgba(40,167,69,0.1), transparent);
            transform: translateX(100%);
        }

        .form-group.error::before {
            background: linear-gradient(45deg, transparent, rgba(220,53,69,0.1), transparent);
            transform: translateX(100%);
        }

        /* Profile Picture Upload Styles */
        .current-picture {
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .current-picture:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,123,255,0.4);
        }

        .current-picture img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .picture-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        /* Image Preview Modal */
        .image-preview-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 0;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 2px solid #f0f0f0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px 15px 0 0;
        }

        .modal-header h4 {
            margin: 0;
            color: #2c3e50;
            font-size: 1.2rem;
        }

        .close-btn {
            background: #dc3545;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .image-crop-area {
            padding: 25px;
            text-align: center;
            background: #f8f9fa;
        }

        #cropCanvas {
            border: 3px dashed #007bff;
            border-radius: 15px;
            background: white;
            cursor: crosshair;
            transition: all 0.3s ease;
        }

        #cropCanvas:hover {
            border-color: #0056b3;
            box-shadow: 0 5px 15px rgba(0,123,255,0.2);
        }

        .crop-controls {
            padding: 20px 25px;
            background: white;
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #dee2e6;
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #007bff, #0056b3);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,123,255,0.3);
        }

        .control-group input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #007bff, #0056b3);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(0,123,255,0.3);
        }

        .modal-footer {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            padding: 20px 25px;
            background: #f8f9fa;
            border-radius: 0 0 15px 15px;
            border-top: 2px solid #e9ecef;
        }

        /* Camera access styles */
        .camera-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .camera-view {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .camera-video {
            width: 100%;
            max-width: 400px;
            height: 300px;
            object-fit: cover;
        }

        .camera-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
        }

        .camera-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: white;
            color: #333;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .camera-btn:hover {
            transform: scale(1.1);
            background: #f8f9fa;
        }

        .camera-btn.capture {
            background: #dc3545;
            color: white;
            width: 80px;
            height: 80px;
            font-size: 2rem;
        }

        .camera-btn.capture:hover {
            background: #c82333;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .app-container {
                margin: 10px;
                border-radius: 15px;
                min-height: calc(100vh - 20px);
            }

            .header {
                padding: 15px;
                border-radius: 15px 15px 0 0;
            }

            .logo-icon {
                font-size: 2.5rem;
            }

            .logo-text {
                font-size: 1.8rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .nav-tab {
                padding: 12px 8px;
                font-size: 0.9rem;
            }

            .content-area {
                padding: 20px;
            }

            .feature-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .theme-options {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .settings-nav {
                flex-direction: column;
                gap: 5px;
            }

            .settings-nav-item {
                border-radius: 10px;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .nav-tabs {
                flex-direction: column;
            }

            .nav-tab {
                border-radius: 0;
                border-bottom: 1px solid rgba(255,255,255,0.2);
            }

            .nav-tab:last-child {
                border-bottom: none;
            }

            .theme-options {
                grid-template-columns: 1fr;
            }

            .setting-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        /* Tablet Styles */
        @media (min-width: 768px) and (max-width: 1023px) {
            .app-container {
                margin: 15px;
                max-width: 1000px;
                margin-left: auto;
                margin-right: auto;
            }

            .feature-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .theme-options {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Desktop Styles */
        @media (min-width: 1024px) {
            .app-container {
                max-width: 1200px;
                margin: 30px auto;
            }

            .content-area {
                padding: 40px;
            }

            .feature-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Large Desktop */
        @media (min-width: 1440px) {
            .app-container {
                max-width: 1400px;
            }

            .feature-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Task Management Styles */
        .task-item {
            background: white;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 4px solid transparent;
        }

        .task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .task-item.high-priority {
            border-left-color: #dc3545;
        }

        .task-item.medium-priority {
            border-left-color: #ffc107;
        }

        .task-item.low-priority {
            border-left-color: #28a745;
        }

        .task-item.completed {
            opacity: 0.7;
            text-decoration: line-through;
            background: #f8f9fa;
        }

        .task-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        .task-priority {
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 12px;
            display: inline-block;
        }

        .task-priority.high {
            background: #dc3545;
            color: white;
        }

        .task-priority.medium {
            background: #ffc107;
            color: #333;
        }

        .task-priority.low {
            background: #28a745;
            color: white;
        }

        .task-actions {
            margin-top: 8px;
            display: flex;
            gap: 5px;
        }

        .task-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s ease;
        }

        .task-btn.complete {
            background: #28a745;
            color: white;
        }

        .task-btn.delete {
            background: #dc3545;
            color: white;
        }

        .task-btn:hover {
            transform: scale(1.05);
        }

        .weekly-calendar .day-column {
            min-height: 200px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 10px;
        }

        .weekly-calendar .task-list {
            min-height: 150px;
        }

        @media (max-width: 768px) {
            .weekly-calendar {
                grid-template-columns: 1fr !important;
                gap: 10px !important;
            }
            
            .weekly-calendar .day-column {
                min-height: auto;
            }
        }

        @media (max-width: 1023px) {
            #weeklyPlanDetail > div > div:first-child {
                grid-template-columns: 1fr !important;
            }
        }

        /* Goals Management Styles */
        .goal-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 5px solid transparent;
            position: relative;
        }

        .goal-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        }

        .goal-item.academic {
            border-left-color: #007bff;
        }

        .goal-item.skill {
            border-left-color: #28a745;
        }

        .goal-item.personal {
            border-left-color: #ff6b35;
        }

        .goal-item.career {
            border-left-color: #6f42c1;
        }

        .goal-item.health {
            border-left-color: #20c997;
        }

        .goal-item.completed {
            opacity: 0.8;
            background: #f8f9fa;
        }

        .goal-item.overdue {
            border-left-color: #dc3545;
            background: #fff5f5;
        }

        .goal-title {
            font-weight: 700;
            margin-bottom: 8px;
            color: #333;
            font-size: 1.1rem;
        }

        .goal-description {
            color: #666;
            margin-bottom: 10px;
            line-height: 1.5;
            font-size: 0.9rem;
        }

        .goal-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .goal-deadline {
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 12px;
            background: #e9ecef;
            color: #495057;
        }

        .goal-deadline.urgent {
            background: #f8d7da;
            color: #dc3545;
        }

        .goal-deadline.completed {
            background: #d4edda;
            color: #28a745;
        }

        .goal-progress {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .goal-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #0056b3);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .goal-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .goal-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .goal-btn.complete {
            background: #28a745;
            color: white;
        }

        .goal-btn.edit {
            background: #007bff;
            color: white;
        }

        .goal-btn.delete {
            background: #dc3545;
            color: white;
        }

        .goal-btn.progress {
            background: #ffc107;
            color: #333;
        }

        .goal-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .goals-list {
            min-height: 100px;
        }

        .goal-category {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
        }

        @media (max-width: 768px) {
            .goal-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .goal-actions {
                flex-wrap: wrap;
            }
            
            #goalsDetail > div > div:nth-child(2) {
                grid-template-columns: 1fr !important;
            }
            
            #goalsDetail > div > div:nth-child(3) {
                grid-template-columns: 1fr !important;
            }
        }

        @media (max-width: 1023px) {
            #goalsDetail > div > div:first-child {
                grid-template-columns: 1fr !important;
            }
        }

        /* Notes Management Styles */
        .notes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .note-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 5px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .note-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .note-card.academic {
            border-left-color: #007bff;
        }

        .note-card.research {
            border-left-color: #28a745;
        }

        .note-card.ideas {
            border-left-color: #ffc107;
        }

        .note-card.personal {
            border-left-color: #ff6b35;
        }

        .note-card.work {
            border-left-color: #6f42c1;
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .note-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #333;
            margin: 0;
            line-height: 1.3;
            word-break: break-word;
        }

        .note-category {
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 600;
            white-space: nowrap;
        }

        .note-category.academic {
            background: #e3f2fd;
            color: #007bff;
        }

        .note-category.research {
            background: #e8f5e8;
            color: #28a745;
        }

        .note-category.ideas {
            background: #fff3e0;
            color: #ff6b35;
        }

        .note-category.personal {
            background: #ffeaa7;
            color: #856404;
        }

        .note-category.work {
            background: #f3e5f5;
            color: #6f42c1;
        }

        .note-content {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .note-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 15px;
        }

        .note-tag {
            background: #f1f3f4;
            color: #5f6368;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .note-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: #999;
            border-top: 1px solid #f0f0f0;
            padding-top: 12px;
        }

        .note-date {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .note-actions {
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .note-card:hover .note-actions {
            opacity: 1;
        }

        .note-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .note-btn.edit {
            background: #007bff;
            color: white;
        }

        .note-btn.delete {
            background: #dc3545;
            color: white;
        }

        .note-btn.view {
            background: #28a745;
            color: white;
        }

        .note-btn:hover {
            transform: scale(1.05);
        }

        .note-word-count {
            font-size: 0.75rem;
            color: #999;
        }

        /* Modal Styles */
        .modal-backdrop {
            backdrop-filter: blur(5px);
        }

        @media (max-width: 768px) {
            .notes-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .note-header {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .note-footer {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .note-actions {
                opacity: 1;
            }
        }

        @media (max-width: 480px) {
            .note-card {
                padding: 15px;
            }
            
            .note-title {
                font-size: 1.1rem;
            }
        }

        /* Daily Tasks Styles */
        .daily-task-category {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            min-height: 200px;
        }

        .daily-tasks-list {
            min-height: 120px;
        }

        .daily-task-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 4px solid transparent;
            position: relative;
        }

        .daily-task-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .daily-task-item.high-priority {
            border-left-color: #dc3545;
        }

        .daily-task-item.medium-priority {
            border-left-color: #ffc107;
        }

        .daily-task-item.low-priority {
            border-left-color: #28a745;
        }

        .daily-task-item.completed {
            opacity: 0.7;
            text-decoration: line-through;
            background: #f8f9fa;
        }

        .daily-task-item.overdue {
            border-left-color: #dc3545;
            background: #fff5f5;
        }

        .daily-task-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 1rem;
        }

        .daily-task-time {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 10px;
        }

        .daily-task-priority {
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .daily-task-priority.high {
            background: #dc3545;
            color: white;
        }

        .daily-task-priority.medium {
            background: #ffc107;
            color: #333;
        }

        .daily-task-priority.low {
            background: #28a745;
            color: white;
        }

        .daily-task-actions {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        .daily-task-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .daily-task-btn.complete {
            background: #28a745;
            color: white;
        }

        .daily-task-btn.delete {
            background: #dc3545;
            color: white;
        }

        .daily-task-btn.edit {
            background: #007bff;
            color: white;
        }

        .daily-task-btn:hover {
            transform: scale(1.05);
        }

        .daily-task-empty {
            text-align: center;
            color: #999;
            font-style: italic;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .daily-task-category {
                margin-bottom: 15px;
            }
            
            #dailyTasksDetail > div > div:nth-child(2) {
                grid-template-columns: 1fr !important;
            }
            
            #dailyTasksDetail > div > div:nth-child(4) {
                grid-template-columns: 1fr !important;
            }
            
            #dailyTasksDetail > div > div:nth-child(6) {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }

        @media (max-width: 480px) {
            .daily-task-category {
                padding: 12px;
            }
            
            .daily-task-item {
                padding: 12px;
            }
            
            #dailyTasksDetail > div > div:nth-child(6) {
                grid-template-columns: 1fr !important;
            }
        }

        /* Settings Mobile Responsive */
        @media (max-width: 768px) {
            .settings-header {
                padding: 20px 15px;
            }

            .settings-header h2 {
                font-size: 1.5rem;
            }

            .settings-nav {
                grid-template-columns: repeat(2, 1fr);
                gap: 0;
            }

            .settings-nav-item {
                padding: 15px 10px;
            }

            .nav-icon {
                font-size: 1.2rem;
            }

            .nav-text {
                font-size: 0.8rem;
            }

            .settings-content {
                padding: 20px 15px;
            }

            .card-header {
                padding: 20px 15px;
            }

            .card-header h3 {
                font-size: 1.2rem;
            }

            .card-footer {
                padding: 15px;
                flex-direction: column;
                gap: 10px;
            }

            .theme-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
            }

            .theme-categories {
                padding: 20px 15px;
            }

            .category-section {
                margin-bottom: 30px;
            }

            .theme-customization {
                padding: 20px 15px;
                margin: 20px 15px 0 15px;
            }

            .customization-options {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .profile-form {
                padding: 20px 15px;
            }

            .profile-picture-section {
                flex-direction: column;
                text-align: center;
                gap: 15px;
                padding: 20px 15px;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .notification-groups {
                padding: 20px 15px;
            }

            .notification-group {
                padding: 20px 15px;
            }

            .notification-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .timing-options {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .notification-timing {
                margin: 15px;
                padding: 20px 15px;
            }

            .data-sections {
                padding: 20px 15px;
            }

            .data-section {
                padding: 20px 15px;
            }

            .export-options, .danger-actions {
                flex-direction: column;
            }

            .storage-info {
                margin: 15px;
                padding: 15px;
            }

            .language-options {
                padding: 20px 15px;
            }

            .privacy-sections {
                padding: 20px 15px;
            }

            .privacy-section {
                padding: 20px 15px;
            }

            .security-item, .sharing-item, .collection-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            /* Admin Mobile Responsive */
            .admin-sections {
                padding: 15px;
            }

            .admin-section {
                padding: 20px 15px;
                margin-bottom: 25px;
            }

            .admin-item {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }

            .admin-item .item-info {
                text-align: center;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .stat-card {
                padding: 20px 15px;
            }

            .stat-number {
                font-size: 1.5rem;
            }

            .admin-login-card {
                margin: 20px 15px;
            }
        }

        @media (max-width: 480px) {
            .settings-nav {
                grid-template-columns: 1fr;
            }

            .settings-nav-item {
                flex-direction: row;
                justify-content: flex-start;
                gap: 12px;
                padding: 15px 20px;
            }

            .nav-icon {
                font-size: 1.3rem;
            }

            .nav-text {
                font-size: 0.9rem;
            }

            .theme-grid {
                grid-template-columns: 1fr;
            }

            .theme-option {
                padding: 20px;
            }

            .theme-preview {
                height: 60px;
                margin-bottom: 15px;
            }

            .current-picture {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            .btn-primary, .btn-success, .btn-secondary, .btn-outline, .btn-outline-danger, .btn-danger {
                width: 100%;
                justify-content: center;
                margin-bottom: 10px;
            }

            .card-footer {
                padding: 15px;
            }

            .export-options button, .danger-actions button {
                width: 100%;
                margin-bottom: 10px;
            }

            /* Mobile image preview */
            .modal-content {
                width: 95%;
                max-height: 95vh;
            }

            .modal-header {
                padding: 15px 20px;
            }

            .image-crop-area {
                padding: 15px;
            }

            #cropCanvas {
                width: 100%;
                max-width: 280px;
                height: 280px;
            }

            .crop-controls {
                padding: 15px 20px;
            }

            .modal-footer {
                padding: 15px 20px;
                flex-direction: column;
            }

            .modal-footer button {
                width: 100%;
                margin-bottom: 8px;
            }

            /* Mobile camera */
            .camera-view {
                width: 90%;
                max-width: 350px;
            }

            .camera-video {
                width: 100%;
                height: 260px;
            }

            .camera-controls {
                bottom: 15px;
                gap: 10px;
            }

            .camera-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }

            .camera-btn.capture {
                width: 70px;
                height: 70px;
                font-size: 1.8rem;
            }

            /* Picture actions mobile */
            .picture-actions {
                flex-direction: column;
                gap: 10px;
            }

            .picture-actions button {
                width: 100%;
                padding: 12px;
                font-size: 0.9rem;
            }

            /* Admin mobile styles for small screens */
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .admin-section h4 {
                font-size: 1rem;
                text-align: center;
            }

            .admin-item .item-info {
                text-align: center;
            }

            .admin-item .item-title {
                font-size: 0.9rem;
            }

            .admin-item .item-desc {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body class="education-theme">
    <div class="app-container">
        <div class="header">
            <div class="logo">
                <span class="logo-icon">üìö</span>
                <span class="logo-text">Study Hub</span>
            </div>
            <div class="subtitle">–ë–æ–ª–æ–≤—Å—Ä–æ–ª—ã–Ω —Ü–æ–≥—Ü –ø–ª–∞—Ç—Ñ–æ—Ä–º</div>
            
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('home')">üè† –ù“Ø“Ø—Ä</button>
                <button class="nav-tab" onclick="showTab('notes')">üìù –¢—ç–º–¥—ç–≥–ª—ç–ª</button>
                <button class="nav-tab" onclick="showTab('lessons')">üìö –•–∏—á—ç—ç–ª–∏–π–Ω —Ü—ç—Å</button>
                <button class="nav-tab" onclick="showTab('tasks')">üìã –î–∞–∞–ª–≥–∞–≤–∞—Ä</button>
                <button class="nav-tab" onclick="showTab('settings')">üìã –ì—ç—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤—Ä—ã–Ω —Ü—ç—Å</button>
                <button class="nav-tab" onclick="toggleMobileTesting()" style="background: linear-gradient(135deg, #ff6b6b, #ee5a24); color: white;">üì± –£—Ç–∞—Å–Ω—ã —à–∞–ª–≥–∞–ª—Ç</button>
            </div>
        </div>
        
        <!-- Mobile Testing Panel -->
        <div id="mobileTestingPanel" class="mobile-testing-panel" style="display: none;">
            <div class="testing-header">
                <h3>üì± –ì–∞—Ä —É—Ç–∞—Å–Ω—ã —à–∞–ª–≥–∞–ª—Ç</h3>
                <button onclick="toggleMobileTesting()" class="close-testing">‚úï</button>
            </div>
            
            <div class="testing-controls">
                <div class="device-selector">
                    <h4>üì≤ –¢”©—Ö”©”©—Ä”©–º–∂ —Å–æ–Ω–≥–æ—Ö:</h4>
                    <div class="device-buttons">
                        <button onclick="setDeviceSize('mobile', 375, 667)" class="device-btn">iPhone SE</button>
                        <button onclick="setDeviceSize('mobile', 390, 844)" class="device-btn">iPhone 12</button>
                        <button onclick="setDeviceSize('mobile', 414, 896)" class="device-btn">iPhone 11</button>
                        <button onclick="setDeviceSize('tablet', 768, 1024)" class="device-btn">iPad</button>
                        <button onclick="setDeviceSize('desktop', 1920, 1080)" class="device-btn">Desktop</button>
                        <button onclick="setDeviceSize('reset')" class="device-btn reset">Reset</button>
                    </div>
                </div>
                
                <div class="orientation-controls">
                    <h4>üîÑ –ë–∞–π—Ä—à–∏–ª:</h4>
                    <button onclick="setOrientation('portrait')" class="orientation-btn">Portrait</button>
                    <button onclick="setOrientation('landscape')" class="orientation-btn">Landscape</button>
                </div>
                
                <div class="performance-info">
                    <h4>‚ö° –ì“Ø–π—Ü—ç—Ç–≥—ç–ª:</h4>
                    <div class="perf-stats">
                        <div class="stat">FPS: <span id="fpsCounter">60</span></div>
                        <div class="stat">Load: <span id="loadTime">-</span>ms</div>
                        <div class="stat">Memory: <span id="memoryUsage">-</span>MB</div>
                    </div>
                </div>
                
                <div class="touch-simulator">
                    <h4>üëÜ –ú—ç–¥—Ä—ç–≥—á–∏–π–Ω —à–∞–ª–≥–∞–ª—Ç:</h4>
                    <button onclick="simulateTouch()" class="touch-btn">–î–∞—Ä–∞—Ö —à–∞–ª–≥–∞–ª—Ç</button>
                    <button onclick="testScrolling()" class="touch-btn">–ì“Ø–π–ª–≥—ç—Ö —à–∞–ª–≥–∞–ª—Ç</button>
                    <button onclick="testSwipeGestures()" class="touch-btn">–®—É–¥—Ä–∞—Ö —à–∞–ª–≥–∞–ª—Ç</button>
                    <button onclick="runComprehensiveTest()" class="touch-btn" style="background: linear-gradient(135deg, #28a745, #20c997); border-color: #28a745; font-weight: 700;">üöÄ –ò–∂ –±“Ø—Ä—ç–Ω —à–∞–ª–≥–∞–ª—Ç</button>
                </div>
                
                <div class="compatibility-controls">
                    <h4>üåê –ù–∏–π—Ü—Ç—ç–π –±–∞–π–¥–ª—ã–Ω —à–∞–ª–≥–∞–ª—Ç:</h4>
                    <button onclick="checkBrowserCompatibility()" class="touch-btn">–•”©—Ç”©—á —à–∞–ª–≥–∞—Ö</button>
                    <button onclick="testResponsiveBreakpoints()" class="touch-btn">–î—ç–ª–≥—ç—Ü–∏–π–Ω —à–∞–ª–≥–∞–ª—Ç</button>
                </div>
            </div>
            
            <div class="test-results">
                <h4>üìä –®–∞–ª–≥–∞–ª—Ç—ã–Ω “Ø—Ä –¥“Ø–Ω:</h4>
                <div id="testResults" class="results-container">
                    <p>–®–∞–ª–≥–∞–ª—Ç —ç—Ö–ª“Ø“Ø–ª—ç—Ö–∏–π–Ω —Ç—É–ª–¥ –¥—ç—ç—Ä—Ö —Ç–æ–≤—á–Ω—É—É–¥—ã–≥ –¥–∞—Ä–Ω–∞ —É—É.</p>
                </div>
            </div>
        </div>
        
        <div class="content-area">
            <!-- Home Tab -->
            <div id="home" class="tab-content active">
                <div class="welcome-card">
                    <h2>üåü –¢–∞–≤—Ç–∞–π –º–æ—Ä–∏–ª–Ω–æ —É—É!</h2>
                    <p>Study Hub –ø–ª–∞—Ç—Ñ–æ—Ä–º—Ç —Ç–∞–≤—Ç–∞–π –º–æ—Ä–∏–ª–Ω–æ —É—É. –≠–Ω–¥ —Ç–∞ —Å—É—Ä–∞–ª—Ü–∞—Ö–¥–∞–∞ —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π –±“Ø—Ö —Ö—ç—Ä—ç–≥—Å–ª–∏–π–≥ –æ–ª–∂ –∞–≤–∞—Ö –±–æ–ª–æ–º–∂—Ç–æ–π.</p>
                </div>
                
                <div class="feature-grid">
                    <div class="feature-card" onclick="showTab('notes')">
                        <span class="feature-icon">üìù</span>
                        <h3 class="feature-title">–¢—ç–º–¥—ç–≥–ª—ç–ª</h3>
                        <p class="feature-desc">–•–∏—á—ç—ç–ª–∏–π–Ω —Ç—ç–º–¥—ç–≥–ª—ç–ª—ç—ç –∑–æ—Ö–∏–æ–Ω –±–∞–π–≥—É—É–ª–∂, —Ö–∞–¥–≥–∞–ª–∞–∞—Ä–∞–π</p>
                    </div>
                    
                    <div class="feature-card" onclick="showTab('tasks')">
                        <span class="feature-icon">üìã</span>
                        <h3 class="feature-title">–î–∞–∞–ª–≥–∞–≤–∞—Ä</h3>
                        <p class="feature-desc">–î–∞–∞–ª–≥–∞–≤—Ä—É—É–¥–∞–∞ —Ç”©–ª”©–≤–ª”©–∂, —Ö—É–≥–∞—Ü–∞–∞–≥ —É–¥–∏—Ä–¥–∞–∞—Ä–∞–π</p>
                    </div>
                    
                    <div class="feature-card" onclick="showProgress()">
                        <span class="feature-icon">üìä</span>
                        <h3 class="feature-title">–ê—Ö–∏—Ü –¥—ç–≤—à–∏–ª</h3>
                        <p class="feature-desc">–°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω “Ø–∑“Ø“Ø–ª—ç–ª—Ç—ç—ç —Ö—è–Ω–∞–∂ –±–∞–π–≥–∞–∞—Ä–∞–π</p>
                    </div>
                    
                    <div class="feature-card" onclick="showNotifications()">
                        <span class="feature-icon">üîî</span>
                        <h3 class="feature-title">–°–∞–Ω—É—É–ª–≥–∞</h3>
                        <p class="feature-desc">–ß—É—Ö–∞–ª “Ø–π–ª —è–≤–¥–ª—ã–Ω —Å–∞–Ω—É—É–ª–≥–∞ –∞–≤–∞—Ö</p>
                    </div>
                    
                    <div class="feature-card" onclick="showCollaboration()">
                        <span class="feature-icon">üë•</span>
                        <h3 class="feature-title">–•–∞–º—Ç—ã–Ω –∞–∂–∏–ª–ª–∞–≥–∞–∞</h3>
                        <p class="feature-desc">–ù–∞–π–∑—É—É–¥—Ç–∞–π–≥–∞–∞ —Ç—ç–º–¥—ç–≥–ª—ç–ª —Ö—É–≤–∞–∞–ª—Ü–∞—Ö</p>
                    </div>
                    
                    <div class="feature-card" onclick="showAdvancedAnalytics()">
                        <span class="feature-icon">üìà</span>
                        <h3 class="feature-title">–î—ç–≤—à–∏–ª—Ç—ç—Ç –¥“Ø–Ω —à–∏–Ω–∂–∏–ª–≥—ç—ç</h3>
                        <p class="feature-desc">–ù–∞—Ä–∏–π–≤—á–∏–ª—Å–∞–Ω —Å—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫</p>
                    </div>
                    
                    <div class="feature-card" onclick="showMoreThemes()">
                        <span class="feature-icon">üé®</span>
                        <h3 class="feature-title">–ò–ª“Ø“Ø –∑–∞–≥–≤–∞—Ä</h3>
                        <p class="feature-desc">”®”©—Ä–∏–π–Ω –¥—É—Ä—Ç–∞–π –∑–∞–≥–≤–∞—Ä–∞–∞—Ä –¥–∏–∑–∞–π–Ω —Ö–∏–π—Ö</p>
                    </div>
                    
                    <div class="feature-card" onclick="showTab('settings')">
                        <span class="feature-icon">üìã</span>
                        <h3 class="feature-title">–ì—ç—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤—Ä—ã–Ω —Ü—ç—Å</h3>
                        <p class="feature-desc">–ì—ç—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤—Ä—É—É–¥–∞–∞ —É–¥–∏—Ä–¥–∞–∂, —Ç”©–ª”©–≤–ª”©”©—Ä”©–π</p>
                    </div>
                </div>

                <!-- Progress Dashboard -->
                <div id="progressDashboard" style="display: none; margin-top: 30px;">
                    <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h3 style="color: #007bff; margin: 0;">üìä –ê—Ö–∏—Ü –¥—ç–≤—à–ª–∏–π–Ω —Ö—è–Ω–∞—Ö —Å–∞–º–±–∞—Ä</h3>
                            <button onclick="refreshProgress()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üîÑ –®–∏–Ω—ç—á–ª—ç—Ö</button>
                        </div>

                        <!-- Overall Progress -->
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; text-align: center;">
                            <h2 style="margin: 0 0 15px 0;">üèÜ –ï—Ä”©–Ω—Ö–∏–π –∞—Ö–∏—Ü –¥—ç–≤—à–∏–ª</h2>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 20px;">
                                <div>
                                    <div style="font-size: 2.5rem; font-weight: 700;" id="overallProgressPercent">0%</div>
                                    <div style="opacity: 0.9;">–ï—Ä”©–Ω—Ö–∏–π —è–≤—Ü</div>
                                </div>
                                <div>
                                    <div style="font-size: 2.5rem; font-weight: 700;" id="totalPointsEarned">0</div>
                                    <div style="opacity: 0.9;">–û–ª—Å–æ–Ω –æ–Ω–æ–æ</div>
                                </div>
                                <div>
                                    <div style="font-size: 2.5rem; font-weight: 700;" id="currentStreak">0</div>
                                    <div style="opacity: 0.9;">”®–¥—Ä–∏–π–Ω —Ü—É–≤–∞–∞</div>
                                </div>
                                <div>
                                    <div style="font-size: 2.5rem; font-weight: 700;" id="totalActiveDays">0</div>
                                    <div style="opacity: 0.9;">–ò–¥—ç–≤—Ö—Ç—ç–π ”©–¥”©—Ä</div>
                                </div>
                            </div>
                        </div>

                        <!-- Progress Categories -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 25px;">
                            <!-- Notes Progress -->
                            <div class="progress-category">
                                <h4 style="color: #007bff; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                    üìù –¢—ç–º–¥—ç–≥–ª—ç–ª–∏–π–Ω –∞—Ö–∏—Ü
                                    <span class="progress-badge" id="notesBadge">0</span>
                                </h4>
                                <div class="progress-item">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>–ù–∏–π—Ç —Ç—ç–º–¥—ç–≥–ª—ç–ª</span>
                                        <span id="totalNotesCount">0</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="notesProgressFill" style="width: 0%;"></div>
                                    </div>
                                </div>
                                <div class="progress-stats">
                                    <div>–≠–Ω—ç —Å–∞—Ä–¥: <span id="notesThisMonth">0</span></div>
                                    <div>–≠–Ω—ç –¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥—Ç: <span id="notesThisWeek">0</span></div>
                                </div>
                            </div>

                            <!-- Tasks Progress -->
                            <div class="progress-category">
                                <h4 style="color: #28a745; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                    ‚úÖ –î–∞–∞–ª–≥–∞–≤—Ä—ã–Ω –∞—Ö–∏—Ü
                                    <span class="progress-badge" id="tasksBadge">0</span>
                                </h4>
                                <div class="progress-item">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>–î—É—É—Å—Å–∞–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä</span>
                                        <span id="completedTasksCount">0</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="tasksProgressFill" style="width: 0%; background: linear-gradient(90deg, #28a745, #20c997);"></div>
                                    </div>
                                </div>
                                <div class="progress-stats">
                                    <div>–≠–Ω—ç —Å–∞—Ä–¥: <span id="tasksThisMonth">0</span></div>
                                    <div>–≠–Ω—ç –¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥—Ç: <span id="tasksThisWeek">0</span></div>
                                </div>
                            </div>

                            <!-- Goals Progress -->
                            <div class="progress-category">
                                <h4 style="color: #ffc107; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                    üéØ –ó–æ—Ä–∏–ª–≥—ã–Ω –∞—Ö–∏—Ü
                                    <span class="progress-badge" id="goalsBadge">0</span>
                                </h4>
                                <div class="progress-item">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>–ë–∏–µ–ª—Å—ç–Ω –∑–æ—Ä–∏–ª–≥–æ</span>
                                        <span id="completedGoalsCount">0</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="goalsProgressFill" style="width: 0%; background: linear-gradient(90deg, #ffc107, #ff8c00);"></div>
                                    </div>
                                </div>
                                <div class="progress-stats">
                                    <div>–ò–¥—ç–≤—Ö—Ç—ç–π: <span id="activeGoalsCount">0</span></div>
                                    <div>–î—É–Ω–¥–∞–∂ —è–≤—Ü: <span id="averageGoalProgress">0%</span></div>
                                </div>
                            </div>

                            <!-- Study Time Progress -->
                            <div class="progress-category">
                                <h4 style="color: #6f42c1; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                                    ‚è±Ô∏è –°—É—Ä–∞–ª—Ü—Å–∞–Ω —Ü–∞–≥
                                    <span class="progress-badge" id="studyTimeBadge">0h</span>
                                </h4>
                                <div class="progress-item">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>–ù–∏–π—Ç —Ü–∞–≥</span>
                                        <span id="totalStudyTime">0 —Ü–∞–≥</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="studyTimeProgressFill" style="width: 0%; background: linear-gradient(90deg, #6f42c1, #9c88ff);"></div>
                                    </div>
                                </div>
                                <div class="progress-stats">
                                    <div>–≠–Ω—ç —Å–∞—Ä–¥: <span id="studyTimeThisMonth">0h</span></div>
                                    <div>”®–Ω”©”©–¥”©—Ä: <span id="studyTimeToday">0h</span></div>
                                </div>
                            </div>
                        </div>

                        <!-- Weekly Activity Chart -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                            <h4 style="color: #333; margin-bottom: 15px;">üìà 7 —Ö–æ–Ω–æ–≥–∏–π–Ω –∏–¥—ç–≤—Ö–∂–∏–ª</h4>
                            <div class="weekly-activity-chart" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; margin-bottom: 15px;">
                                <div class="activity-day" data-day="0">
                                    <div class="activity-label">–ù—è–º</div>
                                    <div class="activity-bar" style="height: 0%"></div>
                                    <div class="activity-value">0</div>
                                </div>
                                <div class="activity-day" data-day="1">
                                    <div class="activity-label">–î–∞–≤</div>
                                    <div class="activity-bar" style="height: 0%"></div>
                                    <div class="activity-value">0</div>
                                </div>
                                <div class="activity-day" data-day="2">
                                    <div class="activity-label">–ú—è–≥</div>
                                    <div class="activity-bar" style="height: 0%"></div>
                                    <div class="activity-value">0</div>
                                </div>
                                <div class="activity-day" data-day="3">
                                    <div class="activity-label">–õ—Ö–∞</div>
                                    <div class="activity-bar" style="height: 0%"></div>
                                    <div class="activity-value">0</div>
                                </div>
                                <div class="activity-day" data-day="4">
                                    <div class="activity-label">–ü“Ø—Ä</div>
                                    <div class="activity-bar" style="height: 0%"></div>
                                    <div class="activity-value">0</div>
                                </div>
                                <div class="activity-day" data-day="5">
                                    <div class="activity-label">–ë–∞–∞</div>
                                    <div class="activity-bar" style="height: 0%"></div>
                                    <div class="activity-value">0</div>
                                </div>
                                <div class="activity-day" data-day="6">
                                    <div class="activity-label">–ë—è–º</div>
                                    <div class="activity-bar" style="height: 0%"></div>
                                    <div class="activity-value">0</div>
                                </div>
                            </div>
                            <div style="text-align: center; color: #666; font-size: 0.9rem;">
                                ”®–¥”©—Ä —Ç—É—Ç–º—ã–Ω –¥—É—É—Å—Å–∞–Ω –∞–∂–ª—ã–Ω —Ç–æ–æ
                            </div>
                        </div>

                        <!-- Achievements -->
                        <div style="background: linear-gradient(135deg, #fff9c4 0%, #fff3cd 100%); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                            <h4 style="color: #856404; margin-bottom: 15px;">üèÜ –ê–º–∂–∏–ª—Ç—É—É–¥</h4>
                            <div id="achievementsList" class="achievements-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <!-- Achievements will be loaded here -->
                            </div>
                        </div>

                        <!-- Study Insights -->
                        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 20px; border-radius: 12px;">
                            <h4 style="color: #1565c0; margin-bottom: 15px;">üí° –°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω –¥“Ø–Ω —à–∏–Ω–∂–∏–ª–≥—ç—ç</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #007bff; font-size: 1.5rem; margin-bottom: 8px;">üìÖ</div>
                                    <strong>–•–∞–º–≥–∏–π–Ω –∏–¥—ç–≤—Ö—Ç—ç–π ”©–¥”©—Ä:</strong>
                                    <p style="margin: 5px 0; color: #666;" id="mostActiveDay">-</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #28a745; font-size: 1.5rem; margin-bottom: 8px;">‚ö°</div>
                                    <strong>–î—É–Ω–¥–∞–∂ ”©–¥—Ä–∏–π–Ω –∞—Ö–∏—Ü:</strong>
                                    <p style="margin: 5px 0; color: #666;" id="averageDailyProgress">-</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #ffc107; font-size: 1.5rem; margin-bottom: 8px;">üéØ</div>
                                    <strong>–•–∞–º–≥–∏–π–Ω –∏—Ö –∞—à–∏–≥–ª–∞—Å–∞–Ω:</strong>
                                    <p style="margin: 5px 0; color: #666;" id="mostUsedFeature">-</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notifications System -->
                <div id="notificationsSystem" style="display: none; margin-top: 30px;">
                    <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h3 style="color: #007bff; margin: 0;">üîî –°–∞–Ω—É—É–ª–≥—ã–Ω —Å–∏—Å—Ç–µ–º</h3>
                            <button onclick="clearAllNotifications()" style="padding: 8px 16px; background: #dc3545; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 0.9rem;">üóëÔ∏è –ë“Ø–≥–¥–∏–π–≥ —É—Å—Ç–≥–∞—Ö</button>
                        </div>

                        <!-- Notification Settings -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                            <h4 style="color: #333; margin-bottom: 15px;">‚öôÔ∏è –°–∞–Ω—É—É–ª–≥—ã–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="checkbox" id="enableTaskReminders" checked style="transform: scale(1.2);">
                                    <span>üìã –î–∞–∞–ª–≥–∞–≤—Ä—ã–Ω —Å–∞–Ω—É—É–ª–≥–∞</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="checkbox" id="enableGoalReminders" checked style="transform: scale(1.2);">
                                    <span>üéØ –ó–æ—Ä–∏–ª–≥—ã–Ω —Å–∞–Ω—É—É–ª–≥–∞</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="checkbox" id="enableStudyReminders" checked style="transform: scale(1.2);">
                                    <span>üìö –°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω —Å–∞–Ω—É—É–ª–≥–∞</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="checkbox" id="enableDailyReminders" checked style="transform: scale(1.2);">
                                    <span>üåÖ ”®–¥—Ä–∏–π–Ω —Å–∞–Ω—É—É–ª–≥–∞</span>
                                </label>
                            </div>
                        </div>

                        <!-- Active Notifications -->
                        <div style="margin-bottom: 25px;">
                            <h4 style="color: #333; margin-bottom: 15px;">üìÆ –ò–¥—ç–≤—Ö—Ç—ç–π —Å–∞–Ω—É—É–ª–≥—É—É–¥</h4>
                            <div id="activeNotificationsList" style="max-height: 400px; overflow-y: auto;">
                                <!-- Notifications will be loaded here -->
                            </div>
                        </div>

                        <!-- Quick Reminder Creator -->
                        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 20px; border-radius: 12px;">
                            <h4 style="color: #1565c0; margin-bottom: 15px;">‚ö° –®—É—É—Ä—Ö–∞–π —Å–∞–Ω—É—É–ª–≥–∞ “Ø“Ø—Å–≥—ç—Ö</h4>
                            <div style="display: grid; grid-template-columns: 1fr auto; gap: 15px; align-items: end;">
                                <div>
                                    <input type="text" id="quickReminderText" placeholder="–°–∞–Ω—É—É–ª–≥—ã–Ω —Ç–µ–∫—Å—Ç..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 10px;">
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                        <input type="datetime-local" id="quickReminderTime" style="padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                                        <select id="quickReminderType" style="padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                                            <option value="task">üìã –î–∞–∞–ª–≥–∞–≤–∞—Ä</option>
                                            <option value="study">üìö –°—É—Ä–∞–ª—Ü–∞—Ö</option>
                                            <option value="goal">üéØ –ó–æ—Ä–∏–ª–≥–æ</option>
                                            <option value="personal">üë§ –•—É–≤–∏–π–Ω</option>
                                        </select>
                                    </div>
                                </div>
                                <button onclick="createQuickReminder()" style="padding: 12px 20px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; height: fit-content;">‚ûï –ù—ç–º—ç—Ö</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Collaboration System -->
                <div id="collaborationSystem" style="display: none; margin-top: 30px;">
                    <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h3 style="color: #007bff; margin: 0;">üë• –•–∞–º—Ç—ã–Ω –∞–∂–∏–ª–ª–∞–≥–∞–∞</h3>
                            <button onclick="refreshCollaboration()" style="padding: 10px 20px; background: #17a2b8; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üîÑ –®–∏–Ω—ç—á–ª—ç—Ö</button>
                        </div>

                        <!-- Share Notes -->
                        <div style="background: linear-gradient(135deg, #fff9c4 0%, #fff3cd 100%); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                            <h4 style="color: #856404; margin-bottom: 15px;">üì§ –¢—ç–º–¥—ç–≥–ª—ç–ª —Ö—É–≤–∞–∞–ª—Ü–∞—Ö</h4>
                            <div style="display: grid; grid-template-columns: 1fr auto; gap: 15px; align-items: end;">
                                <div>
                                    <select id="shareNoteSelect" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 10px;">
                                        <option value="">–•—É–≤–∞–∞–ª—Ü–∞—Ö —Ç—ç–º–¥—ç–≥–ª—ç–ª —Å–æ–Ω–≥–æ—Ö...</option>
                                    </select>
                                    <input type="email" id="shareEmail" placeholder="–•“Ø–ª—ç—ç–Ω –∞–≤–∞–≥—á–∏–π–Ω –∏–º—ç–π–ª..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                                </div>
                                <button onclick="shareNote()" style="padding: 12px 20px; background: #ffc107; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; height: fit-content;">üì§ –ò–ª–≥—ç—ç—Ö</button>
                            </div>
                        </div>

                        <!-- Study Groups -->
                        <div style="background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                            <h4 style="color: #155724; margin-bottom: 15px;">üë®‚Äçüéì –°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω –±“Ø–ª—ç–≥</h4>
                            <div id="studyGroupsList" style="margin-bottom: 15px;">
                                <!-- Study groups will be loaded here -->
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr auto; gap: 15px;">
                                <input type="text" id="newGroupName" placeholder="–®–∏–Ω—ç –±“Ø–ª–≥–∏–π–Ω –Ω—ç—Ä..." style="padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                                <button onclick="createStudyGroup()" style="padding: 12px 20px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">‚ûï “Æ“Ø—Å–≥—ç—Ö</button>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 12px;">
                            <h4 style="color: #333; margin-bottom: 15px;">üïí –°“Ø“Ø–ª–∏–π–Ω “Ø–π–ª –∞–∂–∏–ª–ª–∞–≥–∞–∞</h4>
                            <div id="collaborationActivity" style="max-height: 300px; overflow-y: auto;">
                                <!-- Activity feed will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Analytics -->
                <div id="advancedAnalytics" style="display: none; margin-top: 30px;">
                    <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h3 style="color: #007bff; margin: 0;">üìà –î—ç–≤—à–∏–ª—Ç—ç—Ç –¥“Ø–Ω —à–∏–Ω–∂–∏–ª–≥—ç—ç</h3>
                            <button onclick="generateReport()" style="padding: 10px 20px; background: #6f42c1; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üìä –¢–∞–π–ª–∞–Ω “Ø“Ø—Å–≥—ç—Ö</button>
                        </div>

                        <!-- Performance Charts -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 25px;">
                            <!-- Monthly Progress Chart -->
                            <div style="background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%); padding: 20px; border-radius: 12px; color: white;">
                                <h4 style="margin-bottom: 15px;">üìÖ –°–∞—Ä—ã–Ω –∞—Ö–∏—Ü –¥—ç–≤—à–∏–ª</h4>
                                <div id="monthlyChart" style="height: 200px; background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center;">
                                    <span>–ì—Ä–∞—Ñ–∏–∫ —ç–Ω–¥ —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞</span>
                                </div>
                            </div>

                            <!-- Subject Performance -->
                            <div style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); padding: 20px; border-radius: 12px; color: #333;">
                                <h4 style="margin-bottom: 15px;">üìö –•–∏—á—ç—ç–ª–∏–π–Ω –≥“Ø–π—Ü—ç—Ç–≥—ç–ª</h4>
                                <div id="subjectPerformance" style="height: 200px; overflow-y: auto;">
                                    <!-- Subject stats will be loaded here -->
                                </div>
                            </div>

                            <!-- Study Patterns -->
                            <div style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); padding: 20px; border-radius: 12px; color: #333;">
                                <h4 style="margin-bottom: 15px;">üïê –°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω —Ö—ç–≤ –º–∞—è–≥</h4>
                                <div id="studyPatterns" style="height: 200px;">
                                    <!-- Study pattern analysis will be loaded here -->
                                </div>
                            </div>
                        </div>

                        <!-- Detailed Reports -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 12px;">
                            <h4 style="color: #333; margin-bottom: 15px;">üìã –î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ç–∞–π–ª–∞–Ω</h4>
                            <div id="detailedReports" style="max-height: 400px; overflow-y: auto;">
                                <!-- Detailed analysis will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- More Themes -->
                <div id="moreThemes" style="display: none; margin-top: 30px;">
                    <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h3 style="color: #007bff; margin: 0;">üé® –ò–ª“Ø“Ø –∑–∞–≥–≤–∞—Ä</h3>
                            <button onclick="resetToDefaultTheme()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üîÑ –ê–Ω—Ö–Ω—ã –∑–∞–≥–≤–∞—Ä</button>
                        </div>

                        <!-- Extended Theme Options -->
                        <div class="theme-options" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                            <!-- Seasonal Themes -->
                            <div class="theme-option" onclick="applyTheme('spring')" data-theme="spring">
                                <div style="background: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%); height: 60px; border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem;">üå∏</div>
                                <h4>–•–∞–≤—Ä—ã–Ω –∑–∞–≥–≤–∞—Ä</h4>
                                <p>–ù–æ–≥–æ–æ–Ω –±–∞ —Ü–∞–≥–∞–∞–Ω ”©–Ω–≥”©—Ç—ç–π —Ç–∞–π–≤–∞–Ω –∑–∞–≥–≤–∞—Ä</p>
                            </div>

                            <div class="theme-option" onclick="applyTheme('summer')" data-theme="summer">
                                <div style="background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%); height: 60px; border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem;">‚òÄÔ∏è</div>
                                <h4>–ó—É–Ω—ã –∑–∞–≥–≤–∞—Ä</h4>
                                <p>–ê–ª—Ç–∞–Ω —à–∞—Ä –±–∞ —Ö”©—Ö ”©–Ω–≥”©—Ç—ç–π –¥—É–ª–∞–∞—Ö–∞–Ω –∑–∞–≥–≤–∞—Ä</p>
                            </div>

                            <div class="theme-option" onclick="applyTheme('autumn')" data-theme="autumn">
                                <div style="background: linear-gradient(135deg, #ff9966 0%, #ff5e62 100%); height: 60px; border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem;">üçÇ</div>
                                <h4>–ù–∞–º—Ä—ã–Ω –∑–∞–≥–≤–∞—Ä</h4>
                                <p>–£–ª–±–∞—Ä —à–∞—Ä –±–∞ —É–ª–∞–∞–Ω ”©–Ω–≥”©—Ç—ç–π –¥—É–ª–∞–∞–Ω –∑–∞–≥–≤–∞—Ä</p>
                            </div>

                            <div class="theme-option" onclick="applyTheme('winter')" data-theme="winter">
                                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 60px; border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem;">‚ùÑÔ∏è</div>
                                <h4>”®–≤–ª–∏–π–Ω –∑–∞–≥–≤–∞—Ä</h4>
                                <p>–•”©—Ö –±–∞ —Ü–∞–≥–∞–∞–Ω ”©–Ω–≥”©—Ç—ç–π —Ö“Ø–π—Ç—ç–Ω –∑–∞–≥–≤–∞—Ä</p>
                            </div>

                            <!-- Professional Themes -->
                            <div class="theme-option" onclick="applyTheme('corporate')" data-theme="corporate">
                                <div style="background: linear-gradient(135deg, #434343 0%, #000000 100%); height: 60px; border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white;">üíº</div>
                                <h4>–ö–æ—Ä–ø–æ—Ä–∞—Ç –∑–∞–≥–≤–∞—Ä</h4>
                                <p>–•–∞—Ä –±–∞ —Å–∞–∞—Ä–∞–ª ”©–Ω–≥”©—Ç—ç–π –∞–ª–±–∞–Ω —ë—Å–Ω—ã –∑–∞–≥–≤–∞—Ä</p>
                            </div>

                            <div class="theme-option" onclick="applyTheme('ocean')" data-theme="ocean">
                                <div style="background: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%); height: 60px; border-radius: 8px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem;">üåä</div>
                                <h4>–î–∞–ª–∞–π–Ω –∑–∞–≥–≤–∞—Ä</h4>
                                <p>–ì“Ø–Ω —Ö”©—Ö ”©–Ω–≥”©—Ç—ç–π –¥–∞–ª–∞–π–Ω –∑–∞–≥–≤–∞—Ä</p>
                            </div>
                        </div>

                        <!-- Custom Color Picker -->
                        <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 20px; border-radius: 12px; color: white;">
                            <h4 style="margin-bottom: 15px;">üé® ”®”©—Ä–∏–π–Ω –∑–∞–≥–≤–∞—Ä “Ø“Ø—Å–≥—ç—Ö</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div>
                                    <label>“Æ–Ω–¥—Å—ç–Ω ”©–Ω–≥”©:</label>
                                    <input type="color" id="customPrimaryColor" value="#007bff" style="width: 100%; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                                </div>
                                <div>
                                    <label>–•–æ—ë—Ä–¥–æ–≥—á ”©–Ω–≥”©:</label>
                                    <input type="color" id="customSecondaryColor" value="#0056b3" style="width: 100%; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                                </div>
                                <div>
                                    <label>Accent ”©–Ω–≥”©:</label>
                                    <input type="color" id="customAccentColor" value="#17a2b8" style="width: 100%; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                                </div>
                                <div style="display: flex; align-items: end;">
                                    <button onclick="applyCustomTheme()" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); border-radius: 8px; cursor: pointer; font-weight: 600;">‚ú® –•—ç—Ä—ç–≥–ª—ç—Ö</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Notes Tab -->
            <div id="notes" class="tab-content">
                <h2>üìù –¢—ç–º–¥—ç–≥–ª—ç–ª</h2>
                <p>–≠–Ω–¥ —Ç–∞ ”©”©—Ä–∏–π–Ω —Ç—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥–∏–π–≥ –±–∏—á–∏–∂, –∑–æ—Ö–∏–æ–Ω –±–∞–π–≥—É—É–ª–∂ –±–æ–ª–Ω–æ.</p>
                
                <div class="feature-grid">
                    <div class="feature-card" onclick="showNotesByCategory('academic')">
                        <span class="feature-icon">üìö</span>
                        <h3 class="feature-title">–•–∏—á—ç—ç–ª–∏–π–Ω —Ç—ç–º–¥—ç–≥–ª—ç–ª</h3>
                        <p class="feature-desc">–ú–∞—Ç–µ–º–∞—Ç–∏–∫, —Ñ–∏–∑–∏–∫, —Ö–∏–º–∏–π–Ω —Ç—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥</p>
                    </div>
                    
                    <div class="feature-card" onclick="showNotesByCategory('research')">
                        <span class="feature-icon">üî¨</span>
                        <h3 class="feature-title">–°—É–¥–∞–ª–≥–∞–∞–Ω—ã —Ç—ç–º–¥—ç–≥–ª—ç–ª</h3>
                        <p class="feature-desc">–®–∏–Ω–∂–ª—ç—Ö —É—Ö–∞–∞–Ω—ã —Å—É–¥–∞–ª–≥–∞–∞–Ω—ã –º–∞—Ç–µ—Ä–∏–∞–ª</p>
                    </div>
                    
                    <div class="feature-card" onclick="showNotesByCategory('ideas')">
                        <span class="feature-icon">üí°</span>
                        <h3 class="feature-title">–°–∞–Ω–∞–∞ –±–æ–¥–æ–ª</h3>
                        <p class="feature-desc">–¢“Ø—Ä–≥—ç–Ω —Å–∞–Ω–∞–∞–Ω—ã –±–∏—á–ª—ç–≥</p>
                    </div>
                    
                    <div class="feature-card" onclick="showAllNotes()">
                        <span class="feature-icon">üìã</span>
                        <h3 class="feature-title">–ë“Ø—Ö —Ç—ç–º–¥—ç–≥–ª—ç–ª</h3>
                        <p class="feature-desc">–ë“Ø—Ö —Ç—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥–∏–π–≥ —Ö–∞—Ä–∞—Ö</p>
                    </div>
                </div>

                <!-- Notes Management Section -->
                <div id="notesManagement" style="display: none; margin-top: 30px;">
                    <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #007bff; margin: 0;">üìù –¢—ç–º–¥—ç–≥–ª—ç–ª —É–¥–∏—Ä–¥–ª–∞–≥–∞</h3>
                            <button onclick="showNewNoteForm()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">‚ûï –®–∏–Ω—ç —Ç—ç–º–¥—ç–≥–ª—ç–ª</button>
                        </div>
                        
                        <!-- Search and Filter -->
                        <div style="display: grid; grid-template-columns: 1fr auto auto; gap: 15px; margin-bottom: 20px; align-items: center;">
                            <input type="text" id="notesSearch" placeholder="–¢—ç–º–¥—ç–≥–ª—ç–ª —Ö–∞–π—Ö..." style="padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem;" onkeyup="searchNotes()">
                            <select id="categoryFilter" onchange="filterNotesByCategory()" style="padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                                <option value="all">–ë“Ø—Ö –∞–Ω–≥–∏–ª–∞–ª</option>
                                <option value="academic">üìö –•–∏—á—ç—ç–ª–∏–π–Ω</option>
                                <option value="research">üî¨ –°—É–¥–∞–ª–≥–∞–∞–Ω—ã</option>
                                <option value="ideas">üí° –°–∞–Ω–∞–∞ –±–æ–¥–æ–ª</option>
                                <option value="personal">üë§ –•—É–≤–∏–π–Ω</option>
                                <option value="work">üíº –ê–∂–ª—ã–Ω</option>
                            </select>
                            <select id="sortFilter" onchange="sortNotes()" style="padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                                <option value="newest">–®–∏–Ω—ç—ç—Å —Ö—É—É—á–∏–Ω</option>
                                <option value="oldest">–•—É—É—á–Ω–∞–∞—Å —à–∏–Ω—ç</option>
                                <option value="title">–ù—ç—Ä—ç—ç—Ä</option>
                                <option value="category">–ê–Ω–≥–∏–ª–ª–∞–∞—Ä</option>
                            </select>
                        </div>

                        <!-- Notes Grid -->
                        <div id="notesGrid" class="notes-grid"></div>

                        <!-- Empty State -->
                        <div id="notesEmptyState" style="display: none; text-align: center; padding: 40px; color: #666;">
                            <div style="font-size: 4rem; margin-bottom: 20px;">üìù</div>
                            <h3>–¢—ç–º–¥—ç–≥–ª—ç–ª –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞</h3>
                            <p>–≠—Ö–Ω–∏–π —Ç—ç–º–¥—ç–≥–ª—ç–ª—ç—ç “Ø“Ø—Å–≥—ç—Ö–∏–π–Ω —Ç—É–ª–¥ "–®–∏–Ω—ç —Ç—ç–º–¥—ç–≥–ª—ç–ª" —Ç–æ–≤—á–∏–π–≥ –¥–∞—Ä–Ω–∞ —É—É.</p>
                        </div>
                    </div>
                </div>

                <!-- New Note Form Modal -->
                <div id="newNoteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;" onclick="hideNewNoteForm()">
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 15px; padding: 30px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;" onclick="event.stopPropagation()">
                        <h3 style="color: #007bff; margin-bottom: 20px;">‚úçÔ∏è –®–∏–Ω—ç —Ç—ç–º–¥—ç–≥–ª—ç–ª “Ø“Ø—Å–≥—ç—Ö</h3>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">–ì–∞—Ä—á–∏–≥:</label>
                            <input type="text" id="newNoteTitle" placeholder="–¢—ç–º–¥—ç–≥–ª—ç–ª–∏–π–Ω –≥–∞—Ä—á–∏–≥" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: 600;">–ê–Ω–≥–∏–ª–∞–ª:</label>
                                <select id="newNoteCategory" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                                    <option value="academic">üìö –•–∏—á—ç—ç–ª–∏–π–Ω</option>
                                    <option value="research">üî¨ –°—É–¥–∞–ª–≥–∞–∞–Ω—ã</option>
                                    <option value="ideas">üí° –°–∞–Ω–∞–∞ –±–æ–¥–æ–ª</option>
                                    <option value="personal">üë§ –•—É–≤–∏–π–Ω</option>
                                    <option value="work">üíº –ê–∂–ª—ã–Ω</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: 600;">–®–æ—à–≥–æ:</label>
                                <input type="text" id="newNoteTags" placeholder="—à–æ—à–≥–æ1, —à–æ—à–≥–æ2" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">–ê–≥—É—É–ª–≥–∞:</label>
                            <textarea id="newNoteContent" placeholder="–¢—ç–º–¥—ç–≥–ª—ç–ª–∏–π–Ω –∞–≥—É—É–ª–≥–∞..." style="width: 100%; height: 200px; padding: 12px; border: 1px solid #ddd; border-radius: 8px; resize: vertical; font-family: inherit;"></textarea>
                        </div>

                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button onclick="hideNewNoteForm()" style="padding: 12px 20px; background: #6c757d; color: white; border: none; border-radius: 8px; cursor: pointer;">–ë–æ–ª–∏—Ö</button>
                            <button onclick="saveNewNote()" style="padding: 12px 20px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üíæ –•–∞–¥–≥–∞–ª–∞—Ö</button>
                        </div>
                    </div>
                </div>

                <!-- Edit Note Modal -->
                <div id="editNoteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;" onclick="hideEditNoteForm()">
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 15px; padding: 30px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;" onclick="event.stopPropagation()">
                        <h3 style="color: #007bff; margin-bottom: 20px;">‚úèÔ∏è –¢—ç–º–¥—ç–≥–ª—ç–ª –∑–∞—Å–∞—Ö</h3>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">–ì–∞—Ä—á–∏–≥:</label>
                            <input type="text" id="editNoteTitle" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: 600;">–ê–Ω–≥–∏–ª–∞–ª:</label>
                                <select id="editNoteCategory" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                                    <option value="academic">üìö –•–∏—á—ç—ç–ª–∏–π–Ω</option>
                                    <option value="research">üî¨ –°—É–¥–∞–ª–≥–∞–∞–Ω—ã</option>
                                    <option value="ideas">üí° –°–∞–Ω–∞–∞ –±–æ–¥–æ–ª</option>
                                    <option value="personal">üë§ –•—É–≤–∏–π–Ω</option>
                                    <option value="work">üíº –ê–∂–ª—ã–Ω</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: 600;">–®–æ—à–≥–æ:</label>
                                <input type="text" id="editNoteTags" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: 600;">–ê–≥—É—É–ª–≥–∞:</label>
                            <textarea id="editNoteContent" style="width: 100%; height: 200px; padding: 12px; border: 1px solid #ddd; border-radius: 8px; resize: vertical; font-family: inherit;"></textarea>
                        </div>

                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button onclick="hideEditNoteForm()" style="padding: 12px 20px; background: #6c757d; color: white; border: none; border-radius: 8px; cursor: pointer;">–ë–æ–ª–∏—Ö</button>
                            <button onclick="saveEditedNote()" style="padding: 12px 20px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üíæ –•–∞–¥–≥–∞–ª–∞—Ö</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Lessons Tab -->
            <div id="lessons" class="tab-content">
                <div class="lessons-header">
                    <h2>üìö –•–∏—á—ç—ç–ª–∏–π–Ω —Ü—ç—Å</h2>
                    <p>–°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω —Ö–∏—á—ç—ç–ª“Ø“Ø–¥—ç—ç —Ç”©–ª”©–≤–ª”©–∂, –∞—Ö–∏—Ü –¥—ç–≤—à–ª—ç—ç —Ö—è–Ω–∞–∞—Ä–∞–π</p>
                </div>
                
                <!-- Subject Categories -->
                <div class="subject-categories">
                    <h3>üìñ –•–∏—á—ç—ç–ª–∏–π–Ω —á–∏–≥–ª—ç–ª“Ø“Ø–¥</h3>
                    <div class="category-grid">
                        <div class="category-card" onclick="showSubjectLessons('math')">
                            <div class="category-icon">üî¢</div>
                            <h4>–ú–∞—Ç–µ–º–∞—Ç–∏–∫</h4>
                            <div class="progress-info">
                                <span class="lesson-count">12 —Ö–∏—á—ç—ç–ª</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 75%;"></div>
                                </div>
                                <span class="progress-text">75% –¥—É—É—Å—Å–∞–Ω</span>
                            </div>
                        </div>
                        
                        <div class="category-card" onclick="showSubjectLessons('physics')">
                            <div class="category-icon">‚öõÔ∏è</div>
                            <h4>–§–∏–∑–∏–∫</h4>
                            <div class="progress-info">
                                <span class="lesson-count">10 —Ö–∏—á—ç—ç–ª</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 60%;"></div>
                                </div>
                                <span class="progress-text">60% –¥—É—É—Å—Å–∞–Ω</span>
                            </div>
                        </div>
                        
                        <div class="category-card" onclick="showSubjectLessons('chemistry')">
                            <div class="category-icon">üß™</div>
                            <h4>–•–∏–º–∏</h4>
                            <div class="progress-info">
                                <span class="lesson-count">8 —Ö–∏—á—ç—ç–ª</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 40%;"></div>
                                </div>
                                <span class="progress-text">40% –¥—É—É—Å—Å–∞–Ω</span>
                            </div>
                        </div>
                        
                        <div class="category-card" onclick="showSubjectLessons('biology')">
                            <div class="category-icon">üß¨</div>
                            <h4>–ë–∏–æ–ª–æ–≥–∏</h4>
                            <div class="progress-info">
                                <span class="lesson-count">9 —Ö–∏—á—ç—ç–ª</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 55%;"></div>
                                </div>
                                <span class="progress-text">55% –¥—É—É—Å—Å–∞–Ω</span>
                            </div>
                        </div>
                        
                        <div class="category-card" onclick="showSubjectLessons('history')">
                            <div class="category-icon">üèõÔ∏è</div>
                            <h4>–¢“Ø“Ø—Ö</h4>
                            <div class="progress-info">
                                <span class="lesson-count">15 —Ö–∏—á—ç—ç–ª</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 80%;"></div>
                                </div>
                                <span class="progress-text">80% –¥—É—É—Å—Å–∞–Ω</span>
                            </div>
                        </div>
                        
                        <div class="category-card" onclick="showSubjectLessons('language')">
                            <div class="category-icon">üìù</div>
                            <h4>–ú–æ–Ω–≥–æ–ª —Ö—ç–ª</h4>
                            <div class="progress-info">
                                <span class="lesson-count">11 —Ö–∏—á—ç—ç–ª</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 65%;"></div>
                                </div>
                                <span class="progress-text">65% –¥—É—É—Å—Å–∞–Ω</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Lessons -->
                <div class="recent-lessons">
                    <h3>üïí –°“Ø“Ø–ª–∏–π–Ω —Ö–∏—á—ç—ç–ª“Ø“Ø–¥</h3>
                    <div class="lesson-list">
                        <div class="lesson-item completed" onclick="openLesson('math-001')">
                            <div class="lesson-icon">üî¢</div>
                            <div class="lesson-info">
                                <h4>–ö–≤–∞–¥—Ä–∞—Ç —Ç—ç–≥—à–∏—Ç–≥—ç–ª</h4>
                                <p>–ú–∞—Ç–µ–º–∞—Ç–∏–∫ ‚Ä¢ 45 –º–∏–Ω</p>
                                <div class="lesson-tags">
                                    <span class="tag completed">‚úÖ –î—É—É—Å—Å–∞–Ω</span>
                                    <span class="tag">üìä –î–∞–∞–ª–≥–∞–≤–∞—Ä —Ö–∏–π—Å—ç–Ω</span>
                                </div>
                            </div>
                            <div class="lesson-score">95%</div>
                        </div>
                        
                        <div class="lesson-item current" onclick="openLesson('physics-005')">
                            <div class="lesson-icon">‚öõÔ∏è</div>
                            <div class="lesson-info">
                                <h4>–¶–∞—Ö–∏–ª–≥–∞–∞–Ω—ã —Ö“Ø—á–∏–Ω —á–∞–¥–∞–ª</h4>
                                <p>–§–∏–∑–∏–∫ ‚Ä¢ 50 –º–∏–Ω</p>
                                <div class="lesson-tags">
                                    <span class="tag current">‚ñ∂Ô∏è –û–¥–æ–æ —Å—É—Ä–∞–ª—Ü–∞–∂ –±–∞–π–Ω–∞</span>
                                </div>
                            </div>
                            <div class="lesson-progress">
                                <div class="progress-circle">
                                    <span>65%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="lesson-item upcoming" onclick="openLesson('chemistry-003')">
                            <div class="lesson-icon">üß™</div>
                            <div class="lesson-info">
                                <h4>–ê—Ç–æ–º—ã–Ω –±“Ø—Ç—ç—Ü</h4>
                                <p>–•–∏–º–∏ ‚Ä¢ 40 –º–∏–Ω</p>
                                <div class="lesson-tags">
                                    <span class="tag upcoming">üîí –î–∞—Ä–∞–∞—á–∏–π–Ω —Ö–∏—á—ç—ç–ª</span>
                                </div>
                            </div>
                            <div class="lesson-schedule">
                                <span>–ú–∞—Ä–≥–∞–∞—à 14:00</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Today's Schedule -->
                <div class="today-schedule">
                    <h3>üìÖ ”®–Ω”©”©–¥—Ä–∏–π–Ω —Ö–∏—á—ç—ç–ª–∏–π–Ω —Ö—É–≤–∞–∞—Ä—å</h3>
                    <div class="schedule-timeline">
                        <div class="timeline-item completed">
                            <div class="timeline-time">09:00</div>
                            <div class="timeline-content">
                                <h4>üî¢ –ú–∞—Ç–µ–º–∞—Ç–∏–∫</h4>
                                <p>–õ–æ–≥–∞—Ä–∏—Ñ–º —Ñ—É–Ω–∫—Ü</p>
                                <span class="status completed">‚úÖ –î—É—É—Å—Å–∞–Ω</span>
                            </div>
                        </div>
                        
                        <div class="timeline-item current">
                            <div class="timeline-time">10:30</div>
                            <div class="timeline-content">
                                <h4>‚öõÔ∏è –§–∏–∑–∏–∫</h4>
                                <p>–¶–∞—Ö–∏–ª–≥–∞–∞–Ω—ã —Ö“Ø—á–∏–Ω —á–∞–¥–∞–ª</p>
                                <span class="status current">‚ñ∂Ô∏è –û–¥–æ–æ</span>
                            </div>
                        </div>
                        
                        <div class="timeline-item upcoming">
                            <div class="timeline-time">14:00</div>
                            <div class="timeline-content">
                                <h4>üß™ –•–∏–º–∏</h4>
                                <p>–ê—Ç–æ–º—ã–Ω –±“Ø—Ç—ç—Ü</p>
                                <span class="status upcoming">‚è∞ –£–¥–∞—Ö–≥“Ø–π</span>
                            </div>
                        </div>
                        
                        <div class="timeline-item upcoming">
                            <div class="timeline-time">15:30</div>
                            <div class="timeline-content">
                                <h4>üèõÔ∏è –¢“Ø“Ø—Ö</h4>
                                <p>–ú–æ–Ω–≥–æ–ª—ã–Ω —ç–∑—ç–Ω—Ç –≥“Ø—Ä—ç–Ω</p>
                                <span class="status upcoming">‚è∞ –£–¥–∞—Ö–≥“Ø–π</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Homework Tab -->
            <div id="homework" class="tab-content">
                <h2>üìã –ì—ç—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä</h2>
                <p>–ì—ç—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤—Ä—É—É–¥—ã–≥ —Ö—É–≤–∞–∞—Ä–∏–ª–∂, —Ç”©–ª”©–≤–ª”©”©—Ä—ç–π.</p>
                
                <div class="feature-grid">
                    <div class="feature-card" onclick="showDailyTasks()">
                        <span class="feature-icon">‚è∞</span>
                        <h3 class="feature-title">”®–¥—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä</h3>
                        <p class="feature-desc">”®–Ω”©”©–¥—Ä–∏–π–Ω —Ö–∏–π—Ö —ë—Å—Ç–æ–π –∞–∂–ª—É—É–¥</p>
                    </div>
                    
                    <div class="feature-card" onclick="showWeeklyPlan()">
                        <span class="feature-icon">üìÖ</span>
                        <h3 class="feature-title">7 —Ö–æ–Ω–æ–≥–∏–π–Ω —Ç”©–ª”©–≤–ª”©–≥”©”©</h3>
                        <p class="feature-desc">–î–æ–ª–æ–æ —Ö–æ–Ω–æ–≥–∏–π–Ω –±“Ø—Ö –¥–∞–∞–ª–≥–∞–≤–∞—Ä</p>
                    </div>
                    
                    <div class="feature-card" onclick="showGoals()">
                        <span class="feature-icon">üéØ</span>
                        <h3 class="feature-title">–ó–æ—Ä–∏–ª–≥–æ</h3>
                        <p class="feature-desc">–£—Ä—Ç —Ö—É–≥–∞—Ü–∞–∞–Ω—ã –∑–æ—Ä–∏–ª–≥—É—É–¥</p>
                    </div>
                </div>

                <!-- Weekly Plan Detail Section -->
                <div id="weeklyPlanDetail" style="display: none; margin-top: 30px;">
                    <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <h3 style="color: #007bff; margin-bottom: 20px;">üìÖ 7 —Ö–æ–Ω–æ–≥–∏–π–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ç”©–ª”©–≤–ª”©–≥”©”©</h3>
                        
                        <!-- Add New Task -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 15px;">‚ûï –®–∏–Ω—ç –¥–∞–∞–ª–≥–∞–≤–∞—Ä –Ω—ç–º—ç—Ö</h4>
                            <div style="display: grid; gap: 10px; grid-template-columns: 1fr 1fr 1fr auto;">
                                <input type="text" id="newTaskTitle" placeholder="–î–∞–∞–ª–≥–∞–≤—Ä—ã–Ω –Ω—ç—Ä" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <select id="newTaskDay" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                    <option value="monday">–î–∞–≤–∞–∞</option>
                                    <option value="tuesday">–ú—è–≥–º–∞—Ä</option>
                                    <option value="wednesday">–õ—Ö–∞–≥–≤–∞</option>
                                    <option value="thursday">–ü“Ø—Ä—ç–≤</option>
                                    <option value="friday">–ë–∞–∞—Å–∞–Ω</option>
                                    <option value="saturday">–ë—è–º–±–∞</option>
                                    <option value="sunday">–ù—è–º</option>
                                </select>
                                <select id="newTaskPriority" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                    <option value="high">üî¥ –Ø–∞—Ä–∞–ª—Ç–∞–π</option>
                                    <option value="medium">üü° –î—É–Ω–¥–∞–∂</option>
                                    <option value="low">üü¢ –ë–∞–≥–∞</option>
                                </select>
                                <button onclick="addNewTask()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">–ù—ç–º—ç—Ö</button>
                            </div>
                        </div>

                        <!-- Weekly Calendar -->
                        <div class="weekly-calendar" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 15px; margin-bottom: 20px;">
                            <div class="day-column" data-day="monday">
                                <h4 style="text-align: center; padding: 10px; background: #007bff; color: white; border-radius: 8px; margin-bottom: 10px;">–î–∞–≤–∞–∞</h4>
                                <div class="task-list" id="monday-tasks"></div>
                            </div>
                            <div class="day-column" data-day="tuesday">
                                <h4 style="text-align: center; padding: 10px; background: #007bff; color: white; border-radius: 8px; margin-bottom: 10px;">–ú—è–≥–º–∞—Ä</h4>
                                <div class="task-list" id="tuesday-tasks"></div>
                            </div>
                            <div class="day-column" data-day="wednesday">
                                <h4 style="text-align: center; padding: 10px; background: #007bff; color: white; border-radius: 8px; margin-bottom: 10px;">–õ—Ö–∞–≥–≤–∞</h4>
                                <div class="task-list" id="wednesday-tasks"></div>
                            </div>
                            <div class="day-column" data-day="thursday">
                                <h4 style="text-align: center; padding: 10px; background: #007bff; color: white; border-radius: 8px; margin-bottom: 10px;">–ü“Ø—Ä—ç–≤</h4>
                                <div class="task-list" id="thursday-tasks"></div>
                            </div>
                            <div class="day-column" data-day="friday">
                                <h4 style="text-align: center; padding: 10px; background: #007bff; color: white; border-radius: 8px; margin-bottom: 10px;">–ë–∞–∞—Å–∞–Ω</h4>
                                <div class="task-list" id="friday-tasks"></div>
                            </div>
                            <div class="day-column" data-day="saturday">
                                <h4 style="text-align: center; padding: 10px; background: #28a745; color: white; border-radius: 8px; margin-bottom: 10px;">–ë—è–º–±–∞</h4>
                                <div class="task-list" id="saturday-tasks"></div>
                            </div>
                            <div class="day-column" data-day="sunday">
                                <h4 style="text-align: center; padding: 10px; background: #dc3545; color: white; border-radius: 8px; margin-bottom: 10px;">–ù—è–º</h4>
                                <div class="task-list" id="sunday-tasks"></div>
                            </div>
                        </div>

                        <!-- Study Tips -->
                        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 20px; border-radius: 10px; margin-top: 20px;">
                            <h4 style="color: #1565c0; margin-bottom: 15px;">üí° –°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω –∑”©–≤–ª”©–º–∂</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #007bff; font-size: 1.5rem; margin-bottom: 10px;">‚è∞</div>
                                    <strong>–¶–∞–≥–∏–π–Ω –º–µ–Ω–µ–∂–º–µ–Ω—Ç:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">Pomodoro —Ç–µ—Ö–Ω–∏–∫ –∞—à–∏–≥–ª–∞–∂ 25 –º–∏–Ω—É—Ç –∞–∂–∏–ª–ª–∞–∞–¥ 5 –º–∏–Ω—É—Ç –∞–º—Ä–∞—Ö</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #28a745; font-size: 1.5rem; margin-bottom: 10px;">üéØ</div>
                                    <strong>–ó–æ—Ä–∏–ª–≥–æ —Ç–∞–≤–∏—Ö:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">SMART –∑–æ—Ä–∏–ª–≥–æ (–¢–æ–¥–æ—Ä—Ö–æ–π, –•—ç–º–∂–∏–≥–¥—ç—Ö“Ø–π—Ü, –ë–∏–µ–ª—ç–≥–¥—ç—Ö –±–æ–ª–æ–º–∂—Ç–æ–π)</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #ff6b35; font-size: 1.5rem; margin-bottom: 10px;">üìö</div>
                                    <strong>–≠—Ä–≥—ç–Ω —Ö–∞—Ä–∞—Ö:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">Spaced repetition - ”©–¥”©—Ä, –¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥, —Å–∞—Ä—ã–Ω –¥–∞—Ä–∞–∞ –¥–∞–≤—Ç–∞—Ö</p>
                                </div>
                            </div>
                        </div>

                        <!-- Weekly Stats -->
                        <div style="background: #fff; border: 1px solid #dee2e6; border-radius: 10px; padding: 20px; margin-top: 20px;">
                            <h4 style="color: #333; margin-bottom: 15px;">üìä 7 —Ö–æ–Ω–æ–≥–∏–π–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                <div style="text-align: center; padding: 15px; background: #e8f5e8; border-radius: 8px;">
                                    <div style="font-size: 2rem; color: #28a745;" id="completedTasks">0</div>
                                    <div style="color: #28a745; font-weight: 600;">–î—É—É—Å—Å–∞–Ω</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: #fff3cd; border-radius: 8px;">
                                    <div style="font-size: 2rem; color: #ffc107;" id="pendingTasks">0</div>
                                    <div style="color: #ffc107; font-weight: 600;">–•“Ø–ª—ç—ç–≥–¥—ç–∂ –±—É–π</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: #f8d7da; border-radius: 8px;">
                                    <div style="font-size: 2rem; color: #dc3545;" id="overdueTasks">0</div>
                                    <div style="color: #dc3545; font-weight: 600;">–•–æ—Ü–æ—Ä—Å–æ–Ω</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: #d1ecf1; border-radius: 8px;">
                                    <div style="font-size: 2rem; color: #17a2b8;" id="totalTasks">0</div>
                                    <div style="color: #17a2b8; font-weight: 600;">–ù–∏–π—Ç</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Goals Detail Section -->
                <div id="goalsDetail" style="display: none; margin-top: 30px;">
                    <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <h3 style="color: #007bff; margin-bottom: 20px;">üéØ –ó–æ—Ä–∏–ª–≥–æ —É–¥–∏—Ä–¥–ª–∞–≥–∞</h3>
                        
                        <!-- Add New Goal -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 15px;">‚ûï –®–∏–Ω—ç –∑–æ—Ä–∏–ª–≥–æ —Ç–∞–≤–∏—Ö</h4>
                            <div style="display: grid; gap: 10px; grid-template-columns: 1fr 1fr 1fr auto;">
                                <input type="text" id="newGoalTitle" placeholder="–ó–æ—Ä–∏–ª–≥—ã–Ω –Ω—ç—Ä" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <select id="newGoalCategory" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                    <option value="academic">üìö –ê–∫–∞–¥–µ–º–∏–∫</option>
                                    <option value="skill">üîß –£—Ä —á–∞–¥–≤–∞—Ä</option>
                                    <option value="personal">üë§ –•—É–≤–∏–π–Ω</option>
                                    <option value="career">üíº –ö–∞—Ä—å–µ—Ä</option>
                                    <option value="health">üèÉ –≠—Ä“Ø“Ø–ª –º—ç–Ω–¥</option>
                                </select>
                                <input type="date" id="newGoalDeadline" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <button onclick="addNewGoal()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">–ù—ç–º—ç—Ö</button>
                            </div>
                            <textarea id="newGoalDescription" placeholder="–ó–æ—Ä–∏–ª–≥—ã–Ω –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ç–∞–π–ª–±–∞—Ä..." style="width: 100%; margin-top: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; min-height: 60px; resize: vertical;"></textarea>
                        </div>

                        <!-- Goals Categories -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div class="goal-category">
                                <h4 style="color: #007bff; margin-bottom: 15px; padding: 10px; background: #e3f2fd; border-radius: 8px;">üìö –ê–∫–∞–¥–µ–º–∏–∫ –∑–æ—Ä–∏–ª–≥–æ</h4>
                                <div id="academic-goals" class="goals-list"></div>
                            </div>
                            <div class="goal-category">
                                <h4 style="color: #28a745; margin-bottom: 15px; padding: 10px; background: #e8f5e8; border-radius: 8px;">üîß –£—Ä —á–∞–¥–≤–∞—Ä—ã–Ω –∑–æ—Ä–∏–ª–≥–æ</h4>
                                <div id="skill-goals" class="goals-list"></div>
                            </div>
                            <div class="goal-category">
                                <h4 style="color: #ff6b35; margin-bottom: 15px; padding: 10px; background: #fff3e0; border-radius: 8px;">üë§ –•—É–≤–∏–π–Ω –∑–æ—Ä–∏–ª–≥–æ</h4>
                                <div id="personal-goals" class="goals-list"></div>
                            </div>
                            <div class="goal-category">
                                <h4 style="color: #6f42c1; margin-bottom: 15px; padding: 10px; background: #f3e5f5; border-radius: 8px;">üíº –ö–∞—Ä—å–µ—Ä—ã–Ω –∑–æ—Ä–∏–ª–≥–æ</h4>
                                <div id="career-goals" class="goals-list"></div>
                            </div>
                            <div class="goal-category">
                                <h4 style="color: #20c997; margin-bottom: 15px; padding: 10px; background: #e0f2f1; border-radius: 8px;">üèÉ –≠—Ä“Ø“Ø–ª –º—ç–Ω–¥–∏–π–Ω –∑–æ—Ä–∏–ª–≥–æ</h4>
                                <div id="health-goals" class="goals-list"></div>
                            </div>
                        </div>

                        <!-- Goal Achievement Tips -->
                        <div style="background: linear-gradient(135deg, #fff9c4 0%, #fff3cd 100%); padding: 20px; border-radius: 10px; margin-top: 20px;">
                            <h4 style="color: #856404; margin-bottom: 15px;">üí° –ó–æ—Ä–∏–ª–≥–æ –±–∏–µ–ª“Ø“Ø–ª—ç—Ö –∑”©–≤–ª”©–º–∂</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #007bff; font-size: 1.5rem; margin-bottom: 10px;">üéØ</div>
                                    <strong>SMART –∑–æ—Ä–∏–ª–≥–æ:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">Specific (–¢–æ–¥–æ—Ä—Ö–æ–π), Measurable (–•—ç–º–∂–∏–≥–¥—ç—Ö“Ø–π—Ü), Achievable (–ë–∏–µ–ª—ç–≥–¥—ç—Ö –±–æ–ª–æ–º–∂—Ç–æ–π), Relevant (–•–∞–º–∞–∞—Ä–∞–ª—Ç–∞–π), Time-bound (–•—É–≥–∞—Ü–∞–∞—Ç–∞–π)</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #28a745; font-size: 1.5rem; margin-bottom: 10px;">üìà</div>
                                    <strong>–ê–ª—Ö–∞–º –∞–ª—Ö–º–∞–∞—Ä:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">–¢–æ–º –∑–æ—Ä–∏–ª–≥—ã–≥ –∂–∏–∂–∏–≥ —Ö—ç—Å—ç–≥—Ç —Ö—É–≤–∞–∞–≥–∞–∞–¥ —Ç—É—Å –±“Ø—Ä–∏–π–≥ –Ω—å –±–∏–µ–ª“Ø“Ø–ª—ç—Ö</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #dc3545; font-size: 1.5rem; margin-bottom: 10px;">‚ö°</div>
                                    <strong>–£—ç—Ä–≥—ç–ª–∂–ª—ç—Ö —Ö“Ø—á:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">”®–¥”©—Ä —Ç—É—Ç–∞–º –±–∞–≥–∞ —á –≥—ç—Å—ç–Ω –∞—Ö–∏—Ü –¥—ç–≤—à–∏–ª –≥–∞—Ä–≥–∞—Ö –Ω—å —á—É—Ö–∞–ª</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #6f42c1; font-size: 1.5rem; margin-bottom: 10px;">üèÜ</div>
                                    <strong>–£—Ä–∞–º—à—É—É–ª–∞–ª:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">–ñ–∏–∂–∏–≥ –∑–æ—Ä–∏–ª–≥–æ –±–∏–µ–ª“Ø“Ø–ª—ç—Ö –±“Ø—Ä—Ç ”©”©—Ä–∏–π–≥”©”© —É—Ä–∞–º—à—É—É–ª</p>
                                </div>
                            </div>
                        </div>

                        <!-- Goals Progress Overview -->
                        <div style="background: #fff; border: 1px solid #dee2e6; border-radius: 10px; padding: 20px; margin-top: 20px;">
                            <h4 style="color: #333; margin-bottom: 15px;">üìä –ó–æ—Ä–∏–ª–≥—ã–Ω –µ—Ä”©–Ω—Ö–∏–π –±–∞–π–¥–∞–ª</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                                <div style="text-align: center; padding: 15px; background: #e8f5e8; border-radius: 8px;">
                                    <div style="font-size: 2rem; color: #28a745;" id="completedGoals">0</div>
                                    <div style="color: #28a745; font-weight: 600;">–ë–∏–µ–ª—Å—ç–Ω</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: #e3f2fd; border-radius: 8px;">
                                    <div style="font-size: 2rem; color: #007bff;" id="activeGoals">0</div>
                                    <div style="color: #007bff; font-weight: 600;">–ò–¥—ç–≤—Ö—Ç—ç–π</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: #f8d7da; border-radius: 8px;">
                                    <div style="font-size: 2rem; color: #dc3545;" id="overdueGoals">0</div>
                                    <div style="color: #dc3545; font-weight: 600;">–•—É–≥–∞—Ü–∞–∞ —Ö—ç—Ç—ç—Ä—Å—ç–Ω</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: #d1ecf1; border-radius: 8px;">
                                    <div style="font-size: 2rem; color: #17a2b8;" id="totalGoals">0</div>
                                    <div style="color: #17a2b8; font-weight: 600;">–ù–∏–π—Ç</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Daily Tasks Detail Section -->
                <div id="dailyTasksDetail" style="display: none; margin-top: 30px;">
                    <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <h3 style="color: #007bff; margin-bottom: 20px;">‚è∞ ”®–¥—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä —É–¥–∏—Ä–¥–ª–∞–≥–∞</h3>
                        
                        <!-- Today's Header -->
                        <div style="background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; text-align: center;">
                            <h2 style="margin: 0; font-size: 1.8rem;" id="todayDate"></h2>
                            <p style="margin: 10px 0 0 0; opacity: 0.9;" id="todayDayName"></p>
                        </div>

                        <!-- Quick Add Task -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h4 style="color: #333; margin-bottom: 15px;">‚ûï –¢“Ø—Ä–≥—ç–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä –Ω—ç–º—ç—Ö</h4>
                            <div style="display: grid; grid-template-columns: 1fr auto auto auto; gap: 10px; align-items: center;">
                                <input type="text" id="quickTaskTitle" placeholder="”®–Ω”©”©–¥—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä" style="padding: 12px; border: 1px solid #ddd; border-radius: 8px;" onkeypress="handleQuickTaskEnter(event)">
                                <select id="quickTaskPriority" style="padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                                    <option value="high">üî¥ –Ø–∞—Ä–∞–ª—Ç–∞–π</option>
                                    <option value="medium" selected>üü° –î—É–Ω–¥–∞–∂</option>
                                    <option value="low">üü¢ –ë–∞–≥–∞</option>
                                </select>
                                <input type="time" id="quickTaskTime" style="padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                                <button onclick="addQuickTask()" style="padding: 12px 20px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">–ù—ç–º—ç—Ö</button>
                            </div>
                        </div>

                        <!-- Task Categories -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <!-- Morning Tasks -->
                            <div class="daily-task-category">
                                <h4 style="color: #ff6b35; margin-bottom: 15px; padding: 12px; background: #fff3e0; border-radius: 8px; display: flex; align-items: center; gap: 8px;">
                                    üåÖ ”®–≥–ª”©”©–Ω–∏–π –∞–∂–∏–ª
                                    <span id="morningTaskCount" style="background: #ff6b35; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem;">0</span>
                                </h4>
                                <div id="morning-tasks" class="daily-tasks-list"></div>
                            </div>

                            <!-- Afternoon Tasks -->
                            <div class="daily-task-category">
                                <h4 style="color: #ffc107; margin-bottom: 15px; padding: 12px; background: #fff9c4; border-radius: 8px; display: flex; align-items: center; gap: 8px;">
                                    ‚òÄÔ∏è ”®–¥—Ä–∏–π–Ω –∞–∂–∏–ª
                                    <span id="afternoonTaskCount" style="background: #ffc107; color: #333; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem;">0</span>
                                </h4>
                                <div id="afternoon-tasks" class="daily-tasks-list"></div>
                            </div>

                            <!-- Evening Tasks -->
                            <div class="daily-task-category">
                                <h4 style="color: #6f42c1; margin-bottom: 15px; padding: 12px; background: #f3e5f5; border-radius: 8px; display: flex; align-items: center; gap: 8px;">
                                    üåÜ –û—Ä–æ–π–Ω –∞–∂–∏–ª
                                    <span id="eveningTaskCount" style="background: #6f42c1; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem;">0</span>
                                </h4>
                                <div id="evening-tasks" class="daily-tasks-list"></div>
                            </div>

                            <!-- Anytime Tasks -->
                            <div class="daily-task-category">
                                <h4 style="color: #28a745; margin-bottom: 15px; padding: 12px; background: #e8f5e8; border-radius: 8px; display: flex; align-items: center; gap: 8px;">
                                    üïê –Ø–º–∞—Ä —á —Ü–∞–≥—Ç
                                    <span id="anytimeTaskCount" style="background: #28a745; color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 0.8rem;">0</span>
                                </h4>
                                <div id="anytime-tasks" class="daily-tasks-list"></div>
                            </div>
                        </div>

                        <!-- Daily Progress -->
                        <div style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <h4 style="color: #1565c0; margin-bottom: 15px;">üìà ”®–¥—Ä–∏–π–Ω —è–≤—Ü</h4>
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span style="font-weight: 600;">–ï—Ä”©–Ω—Ö–∏–π —è–≤—Ü</span>
                                    <span id="dailyProgressPercent" style="font-weight: 600;">0%</span>
                                </div>
                                <div style="background: rgba(255,255,255,0.7); border-radius: 10px; height: 12px; overflow: hidden;">
                                    <div id="dailyProgressBar" style="background: linear-gradient(90deg, #007bff, #0056b3); height: 100%; width: 0%; transition: width 0.5s ease; border-radius: 10px;"></div>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; text-align: center;">
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #28a745;" id="completedDailyTasks">0</div>
                                    <div style="font-size: 0.9rem; color: #666;">–î—É—É—Å—Å–∞–Ω</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #ffc107;" id="pendingDailyTasks">0</div>
                                    <div style="font-size: 0.9rem; color: #666;">–•“Ø–ª—ç—ç–≥–¥—ç–∂ –±—É–π</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #dc3545;" id="overdueDailyTasks">0</div>
                                    <div style="font-size: 0.9rem; color: #666;">–•–æ—Ü–æ—Ä—Å–æ–Ω</div>
                                </div>
                                <div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #17a2b8;" id="totalDailyTasks">0</div>
                                    <div style="font-size: 0.9rem; color: #666;">–ù–∏–π—Ç</div>
                                </div>
                            </div>
                        </div>

                        <!-- Daily Tips -->
                        <div style="background: linear-gradient(135deg, #fff9c4 0%, #fff3cd 100%); padding: 20px; border-radius: 10px;">
                            <h4 style="color: #856404; margin-bottom: 15px;">üí° ”®–¥—Ä–∏–π–Ω –∑”©–≤–ª”©–º–∂</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #007bff; font-size: 1.5rem; margin-bottom: 8px;">üåÖ</div>
                                    <strong>”®–≥–ª”©”©–Ω–∏–π —ç—Ä—á–∏–º—Ç:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">–•–∞–º–≥–∏–π–Ω —á—É—Ö–∞–ª –∞–∂–ª–∞–∞ ”©–≥–ª”©”© —ç—Ä—Ç —Ö–∏–π</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #ffc107; font-size: 1.5rem; margin-bottom: 8px;">‚è∞</div>
                                    <strong>–¶–∞–≥–∏–π–Ω —Ö—É–≤–∞–∞—Ä—å:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">–ê–∂–∏–ª –±“Ø—Ä—Ç —Ç–æ–¥–æ—Ä—Ö–æ–π —Ü–∞–≥ —Ö—É–≤–∞–∞—Ä—å —Ç–æ–≥—Ç–æ–æ</p>
                                </div>
                                <div style="background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                                    <div style="color: #28a745; font-size: 1.5rem; margin-bottom: 8px;">‚úÖ</div>
                                    <strong>–ê–º–∂–∏–ª—Ç —Ç—ç–º–¥—ç–≥–ª—ç—Ö:</strong>
                                    <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">–î–∞–∞–ª–≥–∞–≤–∞—Ä –±“Ø—Ä–∏–π–≥ –¥—É—É—Å–≥–∞—Ö –±“Ø—Ä—Ç –±–∞—è—Ä —Ö“Ø—Ä–≥—ç</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="settings-section">
                    <div class="settings-header">
                        <h2>‚öôÔ∏è –¢–æ—Ö–∏—Ä–≥–æ–æ & –•—ç—Ä—ç–≥—Å–ª“Ø“Ø–¥</h2>
                        <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã–≥ ”©”©—Ä–∏–π–Ω —Ö—ç—Ä—ç–≥—Ü—ç—ç–Ω–¥ —Ç–æ—Ö–∏—Ä—É—É–ª–∂, –º—ç–¥—ç—ç–ª–ª—ç—ç —É–¥–∏—Ä–¥–∞–∞—Ä–∞–π</p>
                    </div>
                    
                    <div class="settings-nav">
                        <button class="settings-nav-item active" onclick="showSettings('themeSettings')">
                            <span class="nav-icon">üé®</span>
                            <span class="nav-text">–ó–∞–≥–≤–∞—Ä</span>
                        </button>
                        <button class="settings-nav-item" onclick="showSettings('profileSettings')">
                            <span class="nav-icon">üë§</span>
                            <span class="nav-text">–ü—Ä–æ—Ñ–∞–π–ª</span>
                        </button>
                        <button class="settings-nav-item" onclick="showSettings('notificationSettings')">
                            <span class="nav-icon">üîî</span>
                            <span class="nav-text">–ú—ç–¥—ç–≥–¥—ç–ª</span>
                        </button>
                        <button class="settings-nav-item" onclick="showSettings('dataSettings')">
                            <span class="nav-icon">üíæ</span>
                            <span class="nav-text">”®–≥”©–≥–¥”©–ª</span>
                        </button>
                        <button class="settings-nav-item" onclick="showSettings('languageSettings')">
                            <span class="nav-icon">üåê</span>
                            <span class="nav-text">–•—ç–ª</span>
                        </button>
                        <button class="settings-nav-item" onclick="showSettings('privacySettings')">
                            <span class="nav-icon">üîí</span>
                            <span class="nav-text">–ù—É—É—Ü–ª–∞–ª</span>
                        </button>
                        <button class="settings-nav-item admin-only" onclick="showSettings('adminSettings')" style="display: none;">
                            <span class="nav-icon">üëë</span>
                            <span class="nav-text">–ê–¥–º–∏–Ω</span>
                        </button>
                    </div>
                    
                    <!-- Theme Settings -->
                    <div id="themeSettings" class="settings-content active">
                        <div class="settings-card">
                            <div class="card-header">
                                <h3>üé® –ó–∞–≥–≤–∞—Ä—ã–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ</h3>
                                <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã–Ω ”©–Ω–≥”©, –∑–∞–≥–≤–∞—Ä—ã–≥ —Å–æ–Ω–≥–æ–æ—Ä–æ–π</p>
                            </div>
                            
                            <!-- Theme Categories -->
                            <div class="theme-categories">
                                <div class="category-section">
                                    <h4>üéì –°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω –∑–∞–≥–≤–∞—Ä—É—É–¥</h4>
                                    <div class="theme-grid">
                                        <div class="theme-option active" onclick="setTheme('education')" data-theme="education">
                                            <div class="theme-preview education-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">üìö –ë–æ–ª–æ–≤—Å—Ä–æ–ª</span>
                                                <span class="theme-desc">–•”©—Ö-—Ü—ç–Ω—Ö—ç—Ä ”©–Ω–≥”©—Ç—ç–π</span>
                                            </div>
                                        </div>
                                        
                                        <div class="theme-option" onclick="setTheme('academic')" data-theme="academic">
                                            <div class="theme-preview academic-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">üéì –ê–∫–∞–¥–µ–º–∏–∫</span>
                                                <span class="theme-desc">–ê—Ö–ª–∞–≥—á –∑–∞–≥–≤–∞—Ä</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="category-section">
                                    <h4>üåà ”®–Ω–≥”©—Ç –∑–∞–≥–≤–∞—Ä—É—É–¥</h4>
                                    <div class="theme-grid">
                                        <div class="theme-option" onclick="setTheme('nature')" data-theme="nature">
                                            <div class="theme-preview nature-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">üåø –ë–∞–π–≥–∞–ª—å</span>
                                                <span class="theme-desc">–ù–æ–≥–æ–æ–Ω ”©–Ω–≥”©—Ç—ç–π</span>
                                            </div>
                                        </div>
                                        
                                        <div class="theme-option" onclick="setTheme('sunset')" data-theme="sunset">
                                            <div class="theme-preview sunset-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">üåÖ –ù–∞—Ä –∂–∞—Ä–≥–∞—Ö</span>
                                                <span class="theme-desc">–ê–ª—Ç–∞–Ω-—É–ª–∞–∞–Ω ”©–Ω–≥”©</span>
                                            </div>
                                        </div>
                                        
                                        <div class="theme-option" onclick="setTheme('ocean')" data-theme="ocean">
                                            <div class="theme-preview ocean-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">üåä –î–∞–ª–∞–π</span>
                                                <span class="theme-desc">–ì“Ø–Ω —Ö”©—Ö ”©–Ω–≥”©</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="category-section">
                                    <h4>üéØ –¢—É—Å–≥–∞–π –∑–∞–≥–≤–∞—Ä—É—É–¥</h4>
                                    <div class="theme-grid">
                                        <div class="theme-option" onclick="setTheme('cyber')" data-theme="cyber">
                                            <div class="theme-preview cyber-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">ü§ñ Cyber</span>
                                                <span class="theme-desc">–•–∞—Ä-—Ü—ç–Ω—Ö—ç—Ä ”©–Ω–≥”©</span>
                                            </div>
                                        </div>
                                        
                                        <div class="theme-option" onclick="setTheme('neon')" data-theme="neon">
                                            <div class="theme-preview neon-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">üí´ Neon</span>
                                                <span class="theme-desc">–ì—ç—Ä—ç–ª—Ç–¥—ç–≥ ”©–Ω–≥”©</span>
                                            </div>
                                        </div>
                                        
                                        <div class="theme-option" onclick="setTheme('minimal')" data-theme="minimal">
                                            <div class="theme-preview minimal-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">‚ö™ –•—è–ª–±–∞—Ä</span>
                                                <span class="theme-desc">–¶—ç–≤—ç—Ä –¥–∏–∑–∞–π–Ω</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="category-section">
                                    <h4>üåô ”®–¥”©—Ä/—à”©–Ω–∏–π–Ω —Ä–µ–∂–∏–º</h4>
                                    <div class="theme-grid">
                                        <div class="theme-option" onclick="setTheme('light')" data-theme="light">
                                            <div class="theme-preview light-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">‚òÄÔ∏è ”®–¥—Ä–∏–π–Ω —Ä–µ–∂–∏–º</span>
                                                <span class="theme-desc">–¶–∞–≥–∞–∞–Ω –¥—ç–≤—Å–≥—ç—Ä</span>
                                            </div>
                                        </div>
                                        
                                        <div class="theme-option" onclick="setTheme('dark')" data-theme="dark">
                                            <div class="theme-preview dark-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">üåô –®”©–Ω–∏–π–Ω —Ä–µ–∂–∏–º</span>
                                                <span class="theme-desc">–•–∞—Ä –¥—ç–≤—Å–≥—ç—Ä</span>
                                            </div>
                                        </div>
                                        
                                        <div class="theme-option" onclick="setTheme('auto')" data-theme="auto">
                                            <div class="theme-preview auto-preview">
                                                <div class="preview-header"></div>
                                                <div class="preview-content">
                                                    <div class="preview-card"></div>
                                                    <div class="preview-card"></div>
                                                </div>
                                            </div>
                                            <div class="theme-info">
                                                <span class="theme-name">üîÑ –ê–≤—Ç–æ–º–∞—Ç</span>
                                                <span class="theme-desc">–¶–∞–≥–∞–∞—Ä —Å–æ–ª–∏–≥–¥–æ–Ω–æ</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Theme Customization -->
                            <div class="theme-customization">
                                <h4>üé® –ó–∞–≥–≤–∞—Ä —Ç–æ—Ö–∏—Ä—É—É–ª–∞—Ö</h4>
                                <div class="customization-options">
                                    <div class="option-group">
                                        <label>“Æ–Ω–¥—Å—ç–Ω ”©–Ω–≥”©:</label>
                                        <input type="color" id="primaryColor" value="#007bff">
                                    </div>
                                    <div class="option-group">
                                        <label>Accent ”©–Ω–≥”©:</label>
                                        <input type="color" id="accentColor" value="#28a745">
                                    </div>
                                    <div class="option-group">
                                        <label>–§–æ–Ω—Ç —Ö—ç–º–∂—ç—ç:</label>
                                        <select id="fontSize">
                                            <option value="small">–ñ–∏–∂–∏–≥</option>
                                            <option value="medium" selected>–î—É–Ω–¥–∞–∂</option>
                                            <option value="large">–¢–æ–º</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="card-footer">
                                <button onclick="saveThemeWithLoading()" class="btn-primary pulse">üíæ –ó–∞–≥–≤–∞—Ä —Ö–∞–¥–≥–∞–ª–∞—Ö</button>
                                <button onclick="resetTheme()" class="btn-secondary">üîÑ –ê–Ω—Ö–Ω—ã –±–∞–π–¥–∞–ª–¥</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Profile Settings -->
                    <div id="profileSettings" class="settings-content">
                        <div class="settings-card">
                            <div class="card-header">
                                <h3>üë§ –ü—Ä–æ—Ñ–∞–π–ª —Ç–æ—Ö–∏—Ä–≥–æ–æ</h3>
                                <p>–•—É–≤–∏–π–Ω –º—ç–¥—ç—ç–ª–ª—ç—ç –∑–∞—Å–≤–∞—Ä–ª–∞–∞—Ä–∞–π</p>
                            </div>
                            
                            <div class="profile-form">
                                <div class="profile-picture-section">
                                    <div class="current-picture" id="currentProfilePicture">
                                        <div class="placeholder">üë§</div>
                                    </div>
                                    <div class="picture-actions">
                                        <input type="file" id="profileImageInput" accept="image/*" style="display: none;" onchange="handleProfileImageChange(event)">
                                        <button onclick="triggerImageUpload()" class="btn-outline">üì∑ –ó—É—Ä–∞–≥ —Å–æ–ª–∏—Ö</button>
                                        <button onclick="takeProfilePhoto()" class="btn-outline">üì± –ó—É—Ä–∞–≥ –∞–≤–∞—Ö</button>
                                        <button onclick="removeProfilePicture()" class="btn-outline-danger">üóëÔ∏è –£—Å—Ç–≥–∞—Ö</button>
                                    </div>
                                    <div class="image-preview-modal" id="imagePreviewModal" style="display: none;">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h4>üñºÔ∏è –ó—É—Ä–≥–∏–π–Ω —É—Ä—å–¥—á–∏–ª–∞–Ω “Ø–∑—ç—Ö</h4>
                                                <button onclick="closeImagePreview()" class="close-btn">‚úï</button>
                                            </div>
                                            <div class="image-crop-area">
                                                <canvas id="cropCanvas" width="300" height="300"></canvas>
                                                <img id="previewImage" style="display: none;">
                                            </div>
                                            <div class="crop-controls">
                                                <div class="control-group">
                                                    <label>–•—ç–º–∂—ç—ç:</label>
                                                    <input type="range" id="scaleSlider" min="0.1" max="3" step="0.1" value="1" onchange="updateImageScale()">
                                                </div>
                                                <div class="control-group">
                                                    <label>–≠—Ä–≥“Ø“Ø–ª—ç—Ö:</label>
                                                    <input type="range" id="rotateSlider" min="0" max="360" step="1" value="0" onchange="updateImageRotation()">
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button onclick="applyProfileImage()" class="btn-primary">‚úÖ –•–∞–¥–≥–∞–ª–∞—Ö</button>
                                                <button onclick="closeImagePreview()" class="btn-secondary">‚ùå –¶—É—Ü–ª–∞—Ö</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label>–û–≤–æ–≥ –Ω—ç—Ä:</label>
                                        <input type="text" id="userFirstName" placeholder="–û–≤–æ–≥">
                                    </div>
                                    <div class="form-group">
                                        <label>–ù—ç—Ä:</label>
                                        <input type="text" id="userLastName" placeholder="–ù—ç—Ä">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>–ò-–º—ç–π–ª —Ö–∞—è–≥:</label>
                                    <input type="email" id="userEmail" placeholder="email@example.com">
                                </div>

                                <div class="form-group">
                                    <label>–£—Ç–∞—Å–Ω—ã –¥—É–≥–∞–∞—Ä:</label>
                                    <input type="tel" id="userPhone" placeholder="+976 xxxxxxxx">
                                </div>

                                <div class="form-group">
                                    <label>–¢”©—Ä—Å”©–Ω ”©–¥”©—Ä:</label>
                                    <input type="date" id="userBirthday">
                                </div>

                                <div class="form-group">
                                    <label>–•–∏—á—ç—ç–ª–∏–π–Ω –∂–∏–ª:</label>
                                    <select id="studyYear">
                                        <option value="">–°–æ–Ω–≥–æ–Ω–æ —É—É...</option>
                                        <option value="1">1-—Ä –∫—É—Ä—Å</option>
                                        <option value="2">2-—Ä –∫—É—Ä—Å</option>
                                        <option value="3">3-—Ä –∫—É—Ä—Å</option>
                                        <option value="4">4-—Ä –∫—É—Ä—Å</option>
                                        <option value="graduate">–¢”©–≥—Å”©–≥—á</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>–ú—ç—Ä–≥—ç–∂–∏–ª:</label>
                                    <input type="text" id="userMajor" placeholder="–ú—ç—Ä–≥—ç–∂–ª–∏–π–Ω –Ω—ç—Ä">
                                </div>

                                <div class="form-group">
                                    <label>–ë–∏–æ–≥–∞—Ä—Ñ–∏:</label>
                                    <textarea id="userBio" placeholder="”®”©—Ä–∏–π–Ω —Ç—É—Ö–∞–π —Ç–æ–≤—á –º—ç–¥—ç—ç–ª—ç–ª..." rows="4"></textarea>
                                </div>
                            </div>

                            <div class="card-footer">
                                <button onclick="saveProfileWithLoading()" class="btn-success">üíæ –ü—Ä–æ—Ñ–∞–π–ª —Ö–∞–¥–≥–∞–ª–∞—Ö</button>
                                <button onclick="loadUserProfile()" class="btn-secondary">üîÑ –î–∞—Ö–∏–Ω –∞—á–∞–∞–ª–∞—Ö</button>
                                <button onclick="promptAdminLogin()" class="btn-outline" style="margin-left: auto; border-color: #ffd700; color: #b8860b;">üëë –ê–¥–º–∏–Ω –Ω—ç–≤—Ç—Ä—ç—Ö</button>
                            </div>
                        </div>
                        
                        <!-- Admin Login Card (Hidden by default) -->
                        <div class="settings-card admin-login-card" id="adminLoginCard" style="display: none;">
                            <div class="card-header">
                                <h3>üëë –ê–¥–º–∏–Ω –Ω—ç–≤—Ç—Ä—ç—Ö</h3>
                                <p>–°–∏—Å—Ç–µ–º–∏–π–Ω —É–¥–∏—Ä–¥–ª–∞–≥—ã–Ω —ç—Ä—Ö—Ç—ç–π –Ω—ç–≤—Ç—Ä—ç—Ö</p>
                            </div>
                            
                            <div class="admin-login-form">
                                <div class="form-group">
                                    <label>–ê–¥–º–∏–Ω –∫–æ–¥:</label>
                                    <input type="password" id="adminCode" placeholder="–ê–¥–º–∏–Ω –∫–æ–¥–æ–æ –æ—Ä—É—É–ª–Ω–∞ —É—É">
                                </div>
                            </div>

                            <div class="card-footer">
                                <button onclick="verifyAdminLogin()" class="btn-primary">üîì –ù—ç–≤—Ç—Ä—ç—Ö</button>
                                <button onclick="cancelAdminLogin()" class="btn-secondary">‚ùå –¶—É—Ü–ª–∞—Ö</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notification Settings -->
                    <div id="notificationSettings" class="settings-content">
                        <div class="settings-card">
                            <div class="card-header">
                                <h3>üîî –ú—ç–¥—ç–≥–¥–ª–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ</h3>
                                <p>–¢–∞ —Ö—ç–∑—ç—ç –º—ç–¥—ç–≥–¥—ç–ª —Ö“Ø–ª—ç—ç–Ω –∞–≤–∞—Ö—ã–≥ —Ç–æ—Ö–∏—Ä—É—É–ª–∞–∞—Ä–∞–π</p>
                            </div>

                            <div class="notification-groups">
                                <div class="notification-group">
                                    <h4>üìã –î–∞–∞–ª–≥–∞–≤–∞—Ä –±–∞ –∞–∂–∏–ª</h4>
                                    <div class="notification-item">
                                        <div class="item-info">
                                            <span class="item-title">–î–∞–∞–ª–≥–∞–≤—Ä—ã–Ω —Ö—É–≥–∞—Ü–∞–∞–Ω—ã —Å–∞–Ω—É—É–ª–≥–∞</span>
                                            <span class="item-desc">–î–∞–∞–ª–≥–∞–≤–∞—Ä –¥—É—É—Å–∞—Ö 24 —Ü–∞–≥–∏–π–Ω ”©–º–Ω”© —Å–∞–Ω—É—É–ª–Ω–∞</span>
                                        </div>
                                        <label class="switch">
                                            <input type="checkbox" id="homeworkDeadlineNotifs" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="notification-item">
                                        <div class="item-info">
                                            <span class="item-title">–®–∏–Ω—ç –¥–∞–∞–ª–≥–∞–≤—Ä—ã–Ω –º—ç–¥—ç–≥–¥—ç–ª</span>
                                            <span class="item-desc">–®–∏–Ω—ç –¥–∞–∞–ª–≥–∞–≤–∞—Ä –Ω—ç–º—ç–≥–¥—ç—Ö—ç–¥ –º—ç–¥—ç–≥–¥—ç–Ω—ç</span>
                                        </div>
                                        <label class="switch">
                                            <input type="checkbox" id="newHomeworkNotifs" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>

                                <div class="notification-group">
                                    <h4>üìù –¢—ç–º–¥—ç–≥–ª—ç–ª</h4>
                                    <div class="notification-item">
                                        <div class="item-info">
                                            <span class="item-title">–¢—ç–º–¥—ç–≥–ª—ç–ª–∏–π–Ω —Å–∞–Ω—É—É–ª–≥–∞</span>
                                            <span class="item-desc">”®–¥”©—Ä –±“Ø—Ä —Ç—ç–º–¥—ç–≥–ª—ç–ª –±–∏—á–∏—Ö–∏–π–≥ —Å–∞–Ω—É—É–ª–∞–Ω–¥–∞–≥</span>
                                        </div>
                                        <label class="switch">
                                            <input type="checkbox" id="noteReminderNotifs" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>

                                <div class="notification-group">
                                    <h4>üéØ –ó–æ—Ä–∏–ª–≥–æ</h4>
                                    <div class="notification-item">
                                        <div class="item-info">
                                            <span class="item-title">–ó–æ—Ä–∏–ª–≥—ã–Ω –∞—Ö–∏—Ü –¥—ç–≤—à–∏–ª</span>
                                            <span class="item-desc">–ó–æ—Ä–∏–ª–≥—ã–Ω –∞—Ö–∏—Ü –¥—ç–≤—à–∏–ª–∏–π–Ω –º—ç–¥—ç—ç–ª—ç–ª</span>
                                        </div>
                                        <label class="switch">
                                            <input type="checkbox" id="goalProgressNotifs" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>

                                <div class="notification-group">
                                    <h4>üìä –°–∏—Å—Ç–µ–º</h4>
                                    <div class="notification-item">
                                        <div class="item-info">
                                            <span class="item-title">–°–∏—Å—Ç–µ–º–∏–π–Ω —à–∏–Ω—ç—á–ª—ç–ª</span>
                                            <span class="item-desc">–®–∏–Ω—ç —Ñ—É–Ω–∫—Ü, –∑–∞—Å–≤–∞—Ä—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª</span>
                                        </div>
                                        <label class="switch">
                                            <input type="checkbox" id="systemUpdateNotifs" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="notification-item">
                                        <div class="item-info">
                                            <span class="item-title">–°–∞—Ä—ã–Ω —Ç–∞–π–ª–∞–Ω</span>
                                            <span class="item-desc">–°–∞—Ä –±“Ø—Ä–∏–π–Ω —ç—Ü—ç—Å—Ç –∞—Ö–∏—Ü –¥—ç–≤—à–ª–∏–π–Ω —Ç–∞–π–ª–∞–Ω</span>
                                        </div>
                                        <label class="switch">
                                            <input type="checkbox" id="monthlyReportNotifs" checked>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="notification-timing">
                                <h4>‚è∞ –ú—ç–¥—ç–≥–¥–ª–∏–π–Ω —Ü–∞–≥</h4>
                                <div class="timing-options">
                                    <div class="timing-item">
                                        <label>”®–≥–ª”©”©–Ω–∏–π –º—ç–¥—ç–≥–¥—ç–ª:</label>
                                        <input type="time" id="morningNotifTime" value="09:00">
                                    </div>
                                    <div class="timing-item">
                                        <label>–û—Ä–æ–π–Ω –º—ç–¥—ç–≥–¥—ç–ª:</label>
                                        <input type="time" id="eveningNotifTime" value="20:00">
                                    </div>
                                </div>
                            </div>

                            <div class="card-footer">
                                <button onclick="saveNotifications()" class="btn-primary">üíæ –¢–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞—Ö</button>
                                <button onclick="testNotification()" class="btn-outline">üîî –ú—ç–¥—ç–≥–¥—ç–ª —Ç—É—Ä—à–∏–ª—Ç</button>
                            </div>
                        </div>
                    </div>

                    <!-- Data Settings -->
                    <div id="dataSettings" class="settings-content">
                        <div class="settings-card">
                            <div class="card-header">
                                <h3>üíæ ”®–≥”©–≥–¥”©–ª —É–¥–∏—Ä–¥–ª–∞–≥–∞</h3>
                                <p>”®–≥”©–≥–¥–ª”©”© —ç–∫—Å–ø–æ—Ä—Ç, –∏–º–ø–æ—Ä—Ç, backup —Ö–∏–π—Ö</p>
                            </div>

                            <div class="data-sections">
                                <div class="data-section">
                                    <h4>üì§ ”®–≥”©–≥–¥”©–ª —ç–∫—Å–ø–æ—Ä—Ç</h4>
                                    <p>–¢–∞–Ω—ã –±“Ø—Ö –º—ç–¥—ç—ç–ª–ª–∏–π–≥ —Ç–∞—Ç–∞–∂ –∞–≤—á —Ö–∞–¥–≥–∞–ª–∞–∞—Ä–∞–π</p>
                                    <div class="export-options">
                                        <button onclick="exportData('all')" class="btn-outline">üìã –ë“Ø—Ö ”©–≥”©–≥–¥”©–ª</button>
                                        <button onclick="exportData('notes')" class="btn-outline">üìù –¢—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥</button>
                                        <button onclick="exportData('tasks')" class="btn-outline">‚úÖ –î–∞–∞–ª–≥–∞–≤—Ä—Éud</button>
                                        <button onclick="exportData('goals')" class="btn-outline">üéØ –ó–æ—Ä–∏–ª–≥—É—É–¥</button>
                                    </div>
                                </div>

                                <div class="data-section">
                                    <h4>üì• ”®–≥”©–≥–¥”©–ª –∏–º–ø–æ—Ä—Ç</h4>
                                    <p>”®–º–Ω”©—Ö backup —Ñ–∞–π–ª–∞–∞ —Å—ç—Ä–≥—ç—ç—Ö</p>
                                    <div class="import-area">
                                        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData()">
                                        <button onclick="document.getElementById('importFile').click()" class="btn-outline">üìÅ –§–∞–π–ª —Å–æ–Ω–≥–æ—Ö</button>
                                    </div>
                                </div>

                                <div class="data-section">
                                    <h4>üîÑ –ê–≤—Ç–æ–º–∞—Ç backup</h4>
                                    <div class="backup-settings">
                                        <div class="backup-option">
                                            <label>
                                                <input type="checkbox" id="autoBackup" checked>
                                                –ê–≤—Ç–æ–º–∞—Ç backup –∏–¥—ç–≤—Ö–∂“Ø“Ø–ª—ç—Ö
                                            </label>
                                        </div>
                                        <div class="backup-frequency">
                                            <label>Backup –¥–∞–≤—Ç–∞–º–∂:</label>
                                            <select id="backupFrequency">
                                                <option value="daily">”®–¥”©—Ä –±“Ø—Ä</option>
                                                <option value="weekly" selected>–î–æ–ª–æ–æ —Ö–æ–Ω–æ–≥ –±“Ø—Ä</option>
                                                <option value="monthly">–°–∞—Ä –±“Ø—Ä</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="data-section danger-section">
                                    <h4>‚ö†Ô∏è –ê—é—É–ª—Ç–∞–π “Ø–π–ª–¥–ª“Ø“Ø–¥</h4>
                                    <div class="danger-actions">
                                        <button onclick="clearAllData()" class="btn-danger">üóëÔ∏è –ë“Ø—Ö ”©–≥”©–≥–¥”©–ª —É—Å—Ç–≥–∞—Ö</button>
                                        <button onclick="resetToDefault()" class="btn-danger">üîÑ –ê–Ω—Ö–Ω—ã –±–∞–π–¥–∞–ª–¥ —Å—ç—Ä–≥—ç—ç—Ö</button>
                                    </div>
                                </div>
                            </div>

                            <div class="storage-info">
                                <h4>üíø –•–∞–¥–≥–∞–ª–∞–ª—Ç—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª</h4>
                                <div class="storage-stats">
                                    <div class="stat-item">
                                        <span>–ù–∏–π—Ç ”©–≥”©–≥–¥”©–ª:</span>
                                        <span id="totalStorageSize">--</span>
                                    </div>
                                    <div class="stat-item">
                                        <span>–¢—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥:</span>
                                        <span id="notesStorageSize">--</span>
                                    </div>
                                    <div class="stat-item">
                                        <span>–î–∞–∞–ª–≥–∞–≤—Ä—É—É–¥:</span>
                                        <span id="tasksStorageSize">--</span>
                                    </div>
                                </div>
                            </div>

                            <div class="card-footer">
                                <button onclick="saveDataSettings()" class="btn-primary">üíæ ”®–≥”©–≥–¥–ª–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞—Ö</button>
                                <button onclick="performAutoBackup()" class="btn-outline">üíæ Backup –æ–¥–æ–æ —Ö–∏–π—Ö</button>
                                <button onclick="updateStorageInfo()" class="btn-secondary">üîÑ –ú—ç–¥—ç—ç–ª—ç–ª —à–∏–Ω—ç—á–ª—ç—Ö</button>
                            </div>
                        </div>
                    </div>

                    <!-- Language Settings -->
                    <div id="languageSettings" class="settings-content">
                        <div class="settings-card">
                            <div class="card-header">
                                <h3>üåê –•—ç–ª –±–∞ –±“Ø—Å –Ω—É—Ç–∞–≥</h3>
                                <p>–•—ç–ª, —Ü–∞–≥–∏–π–Ω –±“Ø—Å, —Ñ–æ—Ä–º–∞—Ç—ã–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ</p>
                            </div>

                            <div class="language-options">
                                <div class="option-group">
                                    <label>–ò–Ω—Ç–µ—Ä—Ñ—ç–π—Å–∏–π–Ω —Ö—ç–ª:</label>
                                    <select id="interfaceLanguage">
                                        <option value="mn" selected>üá≤üá≥ –ú–æ–Ω–≥–æ–ª —Ö—ç–ª</option>
                                        <option value="en">üá∫üá∏ English</option>
                                        <option value="jp">üáØüáµ Êó•Êú¨Ë™û</option>
                                        <option value="zh">üá®üá≥ ‰∏≠Êñá</option>
                                        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                                    </select>
                                </div>

                                <div class="option-group">
                                    <label>–¶–∞–≥–∏–π–Ω –±“Ø—Å:</label>
                                    <select id="timezone">
                                        <option value="Asia/Ulaanbaatar" selected>üá≤üá≥ –£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä (+8)</option>
                                        <option value="Asia/Tokyo">üáØüáµ Tokyo (+9)</option>
                                        <option value="Asia/Shanghai">üá®üá≥ Beijing (+8)</option>
                                        <option value="Europe/London">üá¨üáß London (GMT)</option>
                                        <option value="America/New_York">üá∫üá∏ New York (-5)</option>
                                    </select>
                                </div>

                                <div class="option-group">
                                    <label>–û–≥–Ω–æ–æ–Ω—ã —Ñ–æ—Ä–º–∞—Ç:</label>
                                    <select id="dateFormat">
                                        <option value="dd/mm/yyyy" selected>31/12/2025</option>
                                        <option value="mm/dd/yyyy">12/31/2025</option>
                                        <option value="yyyy-mm-dd">2025-12-31</option>
                                        <option value="dd.mm.yyyy">31.12.2025</option>
                                    </select>
                                </div>

                                <div class="option-group">
                                    <label>–¶–∞–≥–∏–π–Ω —Ñ–æ—Ä–º–∞—Ç:</label>
                                    <select id="timeFormat">
                                        <option value="24h" selected>24 —Ü–∞–≥–∏–π–Ω (14:30)</option>
                                        <option value="12h">12 —Ü–∞–≥–∏–π–Ω (2:30 PM)</option>
                                    </select>
                                </div>

                                <div class="option-group">
                                    <label>–î–æ–ª–æ–æ —Ö–æ–Ω–æ–≥–∏–π–Ω —ç—Ö–Ω–∏–π ”©–¥”©—Ä:</label>
                                    <select id="weekStart">
                                        <option value="monday" selected>–î–∞–≤–∞–∞ –≥–∞—Ä–∞–≥</option>
                                        <option value="sunday">–ù—è–º –≥–∞—Ä–∞–≥</option>
                                    </select>
                                </div>
                            </div>

                            <div class="card-footer">
                                <button onclick="saveLanguageSettings()" class="btn-primary">üíæ –•—ç–ª–Ω–∏–π —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞—Ö</button>
                            </div>
                        </div>
                    </div>

                    <!-- Privacy Settings -->
                    <div id="privacySettings" class="settings-content">
                        <div class="settings-card">
                            <div class="card-header">
                                <h3>üîí –ù—É—É—Ü–ª–∞–ª –±–∞ –∞—é—É–ª–≥“Ø–π –±–∞–π–¥–∞–ª</h3>
                                <p>–•—É–≤–∏–π–Ω –º—ç–¥—ç—ç–ª–ª–∏–π–Ω –∞—é—É–ª–≥“Ø–π –±–∞–π–¥–ª—ã–≥ —Ö–∞–Ω–≥–∞–∞—Ä–∞–π</p>
                            </div>

                            <div class="privacy-sections">
                                <div class="privacy-section">
                                    <h4>üîê –ù—ç–≤—Ç—Ä—ç—Ö –∞—é—É–ª–≥“Ø–π –±–∞–π–¥–∞–ª</h4>
                                    <div class="security-options">
                                        <div class="security-item">
                                            <span>–ê–≤—Ç–æ–º–∞—Ç –≥–∞—Ä–∞—Ö:</span>
                                            <select id="autoLogout">
                                                <option value="never">–•—ç–∑—ç—ç —á</option>
                                                <option value="1hour">1 —Ü–∞–≥–∏–π–Ω –¥–∞—Ä–∞–∞</option>
                                                <option value="1day" selected>1 ”©–¥—Ä–∏–π–Ω –¥–∞—Ä–∞–∞</option>
                                                <option value="1week">1 –¥–æ–ª–æ–æ —Ö–æ–Ω–æ–≥–∏–π–Ω –¥–∞—Ä–∞–∞</option>
                                            </select>
                                        </div>
                                        <div class="security-item">
                                            <span>–ù—É—É—Ü “Ø–≥ —à–∞–ª–≥–∞—Ö:</span>
                                            <button onclick="changePassword()" class="btn-outline">üîë –ù—É—É—Ü “Ø–≥ —Å–æ–ª–∏—Ö</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="privacy-section">
                                    <h4>üë• –•—É–≤–∞–∞–ª—Ü–∞—Ö —Ç–æ—Ö–∏—Ä–≥–æ–æ</h4>
                                    <div class="sharing-options">
                                        <div class="sharing-item">
                                            <div class="item-info">
                                                <span class="item-title">–¢—ç–º–¥—ç–≥–ª—ç–ª —Ö—É–≤–∞–∞–ª—Ü–∞—Ö</span>
                                                <span class="item-desc">–ë—É—Å–∞–¥—Ç–∞–π —Ç—ç–º–¥—ç–≥–ª—ç–ª —Ö—É–≤–∞–∞–ª—Ü–∞—Ö –±–æ–ª–æ–º–∂</span>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="allowNoteSharing" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="sharing-item">
                                            <div class="item-info">
                                                <span class="item-title">–ê—Ö–∏—Ü –¥—ç–≤—à–∏–ª —Ö–∞—Ä—É—É–ª–∞—Ö</span>
                                                <span class="item-desc">–ë—É—Å–∞–¥ —Ö—ç—Ä—ç–≥–ª—ç–≥—á–¥—ç–¥ –∞—Ö–∏—Ü –¥—ç–≤—à–∏–ª —Ö–∞—Ä—É—É–ª–∞—Ö</span>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="showProgressToOthers">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="privacy-section">
                                    <h4>üìä ”®–≥”©–≥–¥”©–ª —Ü—É–≥–ª—É—É–ª–∞–ª—Ç</h4>
                                    <div class="data-collection">
                                        <div class="collection-item">
                                            <div class="item-info">
                                                <span class="item-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫ —Ü—É–≥–ª—É—É–ª–∞—Ö</span>
                                                <span class="item-desc">Platform—ã–Ω —Å–∞–π–∂—Ä—É—É–ª–∞–ª—Ç–∞–¥ –∑–æ—Ä–∏—É–ª–∂ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ —Ü—É–≥–ª—É—É–ª–∞—Ö</span>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="allowAnalytics" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="collection-item">
                                            <div class="item-info">
                                                <span class="item-title">–ê–ª–¥–∞–∞–Ω—ã –º—ç–¥—ç—ç–ª—ç–ª –∏–ª–≥—ç—ç—Ö</span>
                                                <span class="item-desc">–¢–µ—Ö–Ω–∏–∫–∏–π–Ω –∞–ª–¥–∞–∞–Ω—ã –º—ç–¥—ç—ç–ª—ç–ª –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä –∏–ª–≥—ç—ç—Ö</span>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="sendErrorReports" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card-footer">
                                <button onclick="savePrivacySettings()" class="btn-primary">üíæ –ù—É—É—Ü–ª–∞–ª—ã–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞—Ö</button>
                                <button onclick="downloadPrivacyReport()" class="btn-outline">üìÑ –ù—É—É—Ü–ª–∞–ª—ã–Ω —Ç–∞–π–ª–∞–Ω</button>
                            </div>
                        </div>
                    </div>

                    <!-- Admin Settings -->
                    <div id="adminSettings" class="settings-content admin-only" style="display: none;">
                        <div class="settings-card glass-effect">
                            <div class="card-header">
                                <h3>üëë –ê–¥–º–∏–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ</h3>
                                <p>–°–∏—Å—Ç–µ–º–∏–π–Ω —É–¥–∏—Ä–¥–ª–∞–≥–∞ –±–æ–ª–æ–Ω —Ö—ç—Ä—ç–≥–ª—ç–≥—á–¥–∏–π–Ω –º–µ–Ω–µ–∂–º–µ–Ω—Ç</p>
                            </div>
                            
                            <div class="admin-sections">
                                <!-- User Management -->
                                <div class="admin-section">
                                    <h4>üë• –•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω —É–¥–∏—Ä–¥–ª–∞–≥–∞</h4>
                                    <div class="admin-options">
                                        <div class="admin-item">
                                            <div class="item-info">
                                                <span class="item-title">–•—ç—Ä—ç–≥–ª—ç–≥—á–¥–∏–π–Ω –∂–∞–≥—Å–∞–∞–ª—Ç</span>
                                                <span class="item-desc">–ë“Ø—Ö —Ö—ç—Ä—ç–≥–ª—ç–≥—á–¥–∏–π–Ω –º—ç–¥—ç—ç–ª—ç–ª —Ö–∞—Ä–∞—Ö</span>
                                            </div>
                                            <button onclick="showUserList()" class="btn-outline">üë• –ñ–∞–≥—Å–∞–∞–ª—Ç</button>
                                        </div>
                                        <div class="admin-item">
                                            <div class="item-info">
                                                <span class="item-title">–®–∏–Ω—ç –∞–¥–º–∏–Ω –Ω—ç–º—ç—Ö</span>
                                                <span class="item-desc">–•—ç—Ä—ç–≥–ª—ç–≥—á–¥—ç–¥ –∞–¥–º–∏–Ω —ç—Ä—Ö –æ–ª–≥–æ—Ö</span>
                                            </div>
                                            <button onclick="addAdmin()" class="btn-success">üëë –ê–¥–º–∏–Ω –Ω—ç–º—ç—Ö</button>
                                        </div>
                                        <div class="admin-item">
                                            <div class="item-info">
                                                <span class="item-title">–•—ç—Ä—ç–≥–ª—ç–≥—á –±–ª–æ–∫–ª–æ—Ö</span>
                                                <span class="item-desc">–•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω —ç—Ä—Ö–∏–π–≥ —Ç“Ø—Ä —Ö“Ø—á–∏–Ω–≥“Ø–π –±–æ–ª–≥–æ—Ö</span>
                                            </div>
                                            <button onclick="blockUser()" class="btn-outline-danger">üö´ –ë–ª–æ–∫–ª–æ—Ö</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- System Statistics -->
                                <div class="admin-section">
                                    <h4>üìä –°–∏—Å—Ç–µ–º–∏–π–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫</h4>
                                    <div class="stats-grid">
                                        <div class="stat-card">
                                            <div class="stat-icon">üë•</div>
                                            <div class="stat-number" id="totalUsers">245</div>
                                            <div class="stat-label">–ù–∏–π—Ç —Ö—ç—Ä—ç–≥–ª—ç–≥—á</div>
                                        </div>
                                        <div class="stat-card">
                                            <div class="stat-icon">üü¢</div>
                                            <div class="stat-number" id="activeUsers">187</div>
                                            <div class="stat-label">–ò–¥—ç–≤—Ö—Ç—ç–π</div>
                                        </div>
                                        <div class="stat-card">
                                            <div class="stat-icon">üìö</div>
                                            <div class="stat-number" id="totalNotes">1,234</div>
                                            <div class="stat-label">–¢—ç–º–¥—ç–≥–ª—ç–ª</div>
                                        </div>
                                        <div class="stat-card">
                                            <div class="stat-icon">‚úÖ</div>
                                            <div class="stat-number" id="completedTasks">892</div>
                                            <div class="stat-label">–ë–∏–µ–ª“Ø“Ø–ª—Å—ç–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- System Controls -->
                                <div class="admin-section">
                                    <h4>‚öôÔ∏è –°–∏—Å—Ç–µ–º–∏–π–Ω —É–¥–∏—Ä–¥–ª–∞–≥–∞</h4>
                                    <div class="admin-options">
                                        <div class="admin-item">
                                            <div class="item-info">
                                                <span class="item-title">–°–∏—Å—Ç–µ–º –∑–∞—Å–≤–∞—Ä “Ø–π–ª—á–∏–ª–≥—ç—ç</span>
                                                <span class="item-desc">–°–∏—Å—Ç–µ–º–∏–π–≥ —Ç“Ø—Ä –∑–æ–≥—Å–æ–æ—Ö / –∞—Å–∞–∞—Ö</span>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="maintenanceMode">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="admin-item">
                                            <div class="item-info">
                                                <span class="item-title">–®–∏–Ω—ç –±“Ø—Ä—Ç–≥—ç–ª –∑”©–≤—à”©”©—Ä”©—Ö</span>
                                                <span class="item-desc">–®–∏–Ω—ç —Ö—ç—Ä—ç–≥–ª—ç–≥—á–¥–∏–π–Ω –±“Ø—Ä—Ç–≥—ç–ª–∏–π–≥ –∑”©–≤—à”©”©—Ä”©—Ö</span>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" id="allowRegistration" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="admin-item">
                                            <div class="item-info">
                                                <span class="item-title">”®–≥”©–≥–¥–ª–∏–π–Ω –Ω”©”©—Ü–ª”©–ª—Ç</span>
                                                <span class="item-desc">–°–∏—Å—Ç–µ–º–∏–π–Ω ”©–≥”©–≥–¥–ª–∏–π–≥ –Ω”©”©—Ü–ª”©—Ö</span>
                                            </div>
                                            <button onclick="backupDatabase()" class="btn-primary">üíæ –ù”©”©—Ü–ª”©—Ö</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Content Moderation -->
                                <div class="admin-section">
                                    <h4>üìù –ö–æ–Ω—Ç–µ–Ω—Ç—ã–Ω –º–æ–¥–µ—Ä–∞—Ü–∏</h4>
                                    <div class="admin-options">
                                        <div class="admin-item">
                                            <div class="item-info">
                                                <span class="item-title">–ù–∏–π—Ç–∏–π–Ω —Ç—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥</span>
                                                <span class="item-desc">–•—ç—Ä—ç–≥–ª—ç–≥—á–¥–∏–π–Ω —Ö—É–≤–∞–∞–ª—Ü—Å–∞–Ω —Ç—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥</span>
                                            </div>
                                            <button onclick="moderateContent()" class="btn-outline">üìã –•—è–Ω–∞—Ö</button>
                                        </div>
                                        <div class="admin-item">
                                            <div class="item-info">
                                                <span class="item-title">–ì–æ–º–¥–æ–ª –º—ç–¥—ç—ç–ª–ª“Ø“Ø–¥</span>
                                                <span class="item-desc">–•—ç—Ä—ç–≥–ª—ç–≥—á–¥–∏–π–Ω –≥–æ–º–¥–æ–ª —à–∏–π–¥–≤—ç—Ä–ª—ç—Ö</span>
                                            </div>
                                            <button onclick="handleReports()" class="btn-outline-danger">‚ö†Ô∏è –ì–æ–º–¥–æ–ª (3)</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card-footer">
                                <button onclick="saveAdminSettings()" class="btn-primary">üíæ –ê–¥–º–∏–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞—Ö</button>
                                <button onclick="generateAdminReport()" class="btn-outline">üìä –¢–∞–π–ª–∞–Ω –≥–∞—Ä–≥–∞—Ö</button>
                                <button onclick="exportSystemLogs()" class="btn-secondary">üìÑ –õ–æ–≥—É—É–¥ —Ç–∞—Ç–∞—Ö</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Check authentication on page load
        function checkAuthentication() {
            const session = localStorage.getItem('studyHubSession') || sessionStorage.getItem('studyHubSession');
            
            if (!session) {
                // No session found, redirect to login
                window.location.href = 'login.html';
                return false;
            }
            
            try {
                const userData = JSON.parse(session);
                // Display welcome message
                displayWelcomeMessage(userData);
                return true;
            } catch (error) {
                // Invalid session data, redirect to login
                localStorage.removeItem('studyHubSession');
                sessionStorage.removeItem('studyHubSession');
                window.location.href = 'login.html';
                return false;
            }
        }

        // Display welcome message for logged in user
        function displayWelcomeMessage(userData) {
            // Get OAuth user data if available
            const oauthUser = localStorage.getItem('currentOAuthUser');
            let displayData = userData;
            
            if (oauthUser) {
                try {
                    displayData = JSON.parse(oauthUser);
                } catch (error) {
                    console.log('OAuth data parsing error:', error);
                }
            }

            // Add user info to header
            const header = document.querySelector('.header');
            if (header && !document.getElementById('userInfo')) {
                const userInfo = document.createElement('div');
                userInfo.id = 'userInfo';
                userInfo.style.cssText = `
                    position: absolute;
                    top: 20px;
                    right: 20px;
                    color: white;
                    display: flex;
                    align-items: center;
                    gap: 15px;
                    font-size: 0.9rem;
                    z-index: 1000;
                `;
                
                // Create profile picture element if available
                const profilePicture = displayData.picture ? 
                    `<img src="${displayData.picture}" alt="Profile" style="
                        width: 32px; 
                        height: 32px; 
                        border-radius: 50%; 
                        border: 2px solid rgba(255,255,255,0.3);
                        object-fit: cover;
                    ">` : 
                    `<div style="
                        width: 32px; 
                        height: 32px; 
                        border-radius: 50%; 
                        background: rgba(255,255,255,0.2);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 1.2rem;
                    ">üë§</div>`;

                // Show provider badge if OAuth login
                const providerBadge = displayData.provider ? 
                    `<span style="
                        background: rgba(255,255,255,0.2);
                        padding: 2px 6px;
                        border-radius: 10px;
                        font-size: 0.7rem;
                        opacity: 0.8;
                    ">${displayData.provider === 'google' ? 'üîµ Google' : displayData.provider === 'facebook' ? 'üîµ Facebook' : 'üìß'}</span>` : '';
                
                userInfo.innerHTML = `
                    ${profilePicture}
                    <div style="display: flex; flex-direction: column; align-items: flex-end;">
                        <span style="font-weight: 600;">üëã ${userData.name}</span>
                        ${providerBadge}
                    </div>
                    <button onclick="showUserProfile()" style="
                        background: rgba(255,255,255,0.2);
                        color: white;
                        border: 1px solid rgba(255,255,255,0.3);
                        padding: 6px 12px;
                        border-radius: 15px;
                        cursor: pointer;
                        font-size: 0.8rem;
                        transition: all 0.3s ease;
                        margin-right: 8px;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        üë§ –ü—Ä–æ—Ñ–∞–π–ª
                    </button>
                    <button onclick="logout()" style="
                        background: rgba(255,255,255,0.2);
                        color: white;
                        border: 1px solid rgba(255,255,255,0.3);
                        padding: 6px 12px;
                        border-radius: 15px;
                        cursor: pointer;
                        font-size: 0.8rem;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        üö™ –ì–∞—Ä–∞—Ö
                    </button>
                `;
                
                header.style.position = 'relative';
                header.appendChild(userInfo);
            }
        }

        // Show user profile modal
        function showUserProfile() {
            const session = localStorage.getItem('studyHubSession') || sessionStorage.getItem('studyHubSession');
            const oauthUser = localStorage.getItem('currentOAuthUser');
            
            if (!session) return;
            
            const userData = JSON.parse(session);
            let profileData = userData;
            
            if (oauthUser) {
                try {
                    profileData = { ...userData, ...JSON.parse(oauthUser) };
                } catch (error) {
                    console.log('Profile data error:', error);
                }
            }

            // Create modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease;
            `;

            const profilePicture = profileData.picture ? 
                `<img src="${profileData.picture}" alt="Profile" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 3px solid #007bff;">` : 
                `<div style="width: 80px; height: 80px; border-radius: 50%; background: #007bff; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: white;">üë§</div>`;

            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 30px; max-width: 400px; width: 90%; text-align: center; animation: slideIn 0.3s ease;">
                    ${profilePicture}
                    <h2 style="margin: 20px 0 10px 0; color: #333;">${profileData.name}</h2>
                    <p style="color: #666; margin-bottom: 20px;">${profileData.email}</p>
                    
                    ${profileData.provider ? `
                        <div style="background: #f8f9fa; padding: 10px; border-radius: 10px; margin-bottom: 20px;">
                            <strong>–ù—ç–≤—Ç—Ä—ç—Ö –∞—Ä–≥–∞:</strong> 
                            <span style="margin-left: 10px;">
                                ${profileData.provider === 'google' ? 'üîµ Google' : 
                                  profileData.provider === 'facebook' ? 'üîµ Facebook' : 'üìß –ò–º—ç–π–ª'}
                            </span>
                        </div>
                    ` : ''}
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: left;">
                        <div style="margin-bottom: 10px;"><strong>–ë“Ø—Ä—Ç–≥“Ø“Ø–ª—Å—ç–Ω:</strong> ${new Date(profileData.registeredAt || profileData.loginTime).toLocaleDateString('mn-MN')}</div>
                        <div style="margin-bottom: 10px;"><strong>–°“Ø“Ø–ª–¥ –Ω—ç–≤—Ç—ç—Ä—Å—ç–Ω:</strong> ${new Date(profileData.lastLogin || profileData.loginTime).toLocaleString('mn-MN')}</div>
                        <div><strong>–•—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω ID:</strong> ${profileData.id || 'demo'}</div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                            background: #6c757d; 
                            color: white; 
                            border: none; 
                            padding: 10px 20px; 
                            border-radius: 10px; 
                            cursor: pointer;
                            font-weight: 600;
                        ">‚ùå –•–∞–∞—Ö</button>
                        <button onclick="logout()" style="
                            background: #dc3545; 
                            color: white; 
                            border: none; 
                            padding: 10px 20px; 
                            border-radius: 10px; 
                            cursor: pointer;
                            font-weight: 600;
                        ">üö™ –ì–∞—Ä–∞—Ö</button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            // Close modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        // Logout function
        function logout() {
            if (confirm('–ü–ª–∞—Ç—Ñ–æ—Ä–º–æ–æ—Å –≥–∞—Ä–∞—Ö —É—É?')) {
                localStorage.removeItem('studyHubSession');
                sessionStorage.removeItem('studyHubSession');
                localStorage.removeItem('currentOAuthUser'); // Clear OAuth data
                window.location.href = 'login.html';
            }
        }

        // Run authentication check when page loads
        window.addEventListener('load', function() {
            if (!checkAuthentication()) {
                return; // Stop execution if not authenticated
            }
        });

        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to selected nav tab
            event.target.classList.add('active');
        }

        // Settings navigation
        function showSettings(settingName) {
            // Hide all settings content
            document.querySelectorAll('.settings-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all settings nav items
            document.querySelectorAll('.settings-nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected settings content
            document.getElementById(settingName).classList.add('active');
            
            // Add active class to selected nav item
            event.target.classList.add('active');
        }

        // Theme switching functionality
        function setTheme(theme) {
            // Remove all theme classes
            document.body.classList.remove('education-theme', 'nature-theme', 'cyber-theme', 'neon-theme', 'light-theme', 'dark-theme');
            
            // Add selected theme class
            document.body.classList.add(theme + '-theme');
            
            // Update active theme option
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            event.target.closest('.theme-option').classList.add('active');
            
            // Save theme preference
            localStorage.setItem('selectedTheme', theme);
            
            // Show notification
            showNotification(`‚úÖ ${theme} –∑–∞–≥–≤–∞—Ä –∏–¥—ç–≤—Ö–∂“Ø“Ø–ª—ç–≥–¥–ª—ç—ç!`, 'success');
        }

        // Save theme preferences with customization
        function saveTheme() {
            const primaryColor = document.getElementById('primaryColor').value;
            const accentColor = document.getElementById('accentColor').value;
            const fontSize = document.getElementById('fontSize').value;
            
            localStorage.setItem('primaryColor', primaryColor);
            localStorage.setItem('accentColor', accentColor);
            localStorage.setItem('fontSize', fontSize);
            
            // Apply custom colors
            document.documentElement.style.setProperty('--primary-color', primaryColor);
            document.documentElement.style.setProperty('--accent-color', accentColor);
            
            // Apply font size
            document.body.classList.remove('font-small', 'font-medium', 'font-large');
            document.body.classList.add('font-' + fontSize);
            
            showNotification(t('themeSaved'), 'success');
        }

        // Save profile
        function saveProfile() {
            const userName = document.getElementById('userName').value;
            const userEmail = document.getElementById('userEmail').value;
            
            if (userName && userEmail) {
                localStorage.setItem('userName', userName);
                localStorage.setItem('userEmail', userEmail);
                showNotification('‚úÖ –ü—Ä–æ—Ñ–∞–π–ª –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö–∞–¥–≥–∞–ª–∞–≥–¥–ª–∞–∞!', 'success');
            } else {
                showNotification('‚ö†Ô∏è –ë“Ø—Ö —Ç–∞–ª–±–∞—Ä—ã–≥ –±”©–≥–ª”©–Ω”© “Ø“Ø!', 'warning');
            }
        }

        // Enhanced theme functions
        function resetTheme() {
            document.body.className = '';
            document.body.classList.add('education-theme');
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            document.querySelector('[data-theme="education"]').classList.add('active');
            localStorage.removeItem('selectedTheme');
            showNotification('üîÑ –ó–∞–≥–≤–∞—Ä –∞–Ω—Ö–Ω—ã –±–∞–π–¥–∞–ª–¥ —Å—ç—Ä–≥—ç—ç–≥–¥–ª—ç—ç!', 'info');
        }

        // Enhanced profile picture functions
        let currentImageData = null;
        let imageScale = 1;
        let imageRotation = 0;
        let imagePosX = 0;
        let imagePosY = 0;
        let isDragging = false;

        function triggerImageUpload() {
            document.getElementById('profileImageInput').click();
        }

        function handleProfileImageChange(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Validate file type
            if (!file.type.startsWith('image/')) {
                const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
                let errorMsg = '‚ö†Ô∏è –ó”©–≤—Ö”©–Ω –∑—É—Ä–≥–∏–π–Ω —Ñ–∞–π–ª —Å–æ–Ω–≥–æ–Ω–æ —É—É!';
                
                if (currentLang === 'jp') errorMsg = '‚ö†Ô∏è ÁîªÂÉè„Éï„Ç°„Ç§„É´„ÅÆ„ÅøÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ';
                else if (currentLang === 'en') errorMsg = '‚ö†Ô∏è Please select image files only!';
                else if (currentLang === 'zh') errorMsg = '‚ö†Ô∏è ËØ∑Âè™ÈÄâÊã©ÂõæÂÉèÊñá‰ª∂ÔºÅ';
                else if (currentLang === 'ru') errorMsg = '‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π!';
                
                showNotification(errorMsg, 'error');
                return;
            }

            // Validate file size (max 5MB)
            if (file.size > 5 * 1024 * 1024) {
                const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
                let sizeMsg = '‚ö†Ô∏è –§–∞–π–ª—ã–Ω —Ö—ç–º–∂—ç—ç 5MB-–∞–∞—Å –±–∞–≥–∞ –±–∞–π—Ö —ë—Å—Ç–æ–π!';
                
                if (currentLang === 'jp') sizeMsg = '‚ö†Ô∏è „Éï„Ç°„Ç§„É´„Çµ„Ç§„Ç∫„ÅØ5MB‰ª•‰∏ã„Åß„ÅÇ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„ÅôÔºÅ';
                else if (currentLang === 'en') sizeMsg = '‚ö†Ô∏è File size must be less than 5MB!';
                else if (currentLang === 'zh') sizeMsg = '‚ö†Ô∏è Êñá‰ª∂Â§ßÂ∞èÂøÖÈ°ªÂ∞è‰∫é5MBÔºÅ';
                else if (currentLang === 'ru') sizeMsg = '‚ö†Ô∏è –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–Ω–µ–µ 5MB!';
                
                showNotification(sizeMsg, 'error');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                currentImageData = e.target.result;
                showImagePreview(currentImageData);
            };
            reader.readAsDataURL(file);
        }

        function showImagePreview(imageSrc) {
            const modal = document.getElementById('imagePreviewModal');
            const previewImage = document.getElementById('previewImage');
            const canvas = document.getElementById('cropCanvas');
            
            previewImage.src = imageSrc;
            modal.style.display = 'flex';
            
            previewImage.onload = function() {
                drawImageOnCanvas();
            };

            // Reset controls
            document.getElementById('scaleSlider').value = 1;
            document.getElementById('rotateSlider').value = 0;
            imageScale = 1;
            imageRotation = 0;
            imagePosX = 0;
            imagePosY = 0;

            // Add canvas event listeners
            setupCanvasInteraction(canvas);
        }

        function setupCanvasInteraction(canvas) {
            let startX, startY;

            canvas.addEventListener('mousedown', function(e) {
                isDragging = true;
                const rect = canvas.getBoundingClientRect();
                startX = e.clientX - rect.left - imagePosX;
                startY = e.clientY - rect.top - imagePosY;
                canvas.style.cursor = 'grabbing';
            });

            canvas.addEventListener('mousemove', function(e) {
                if (!isDragging) return;
                
                const rect = canvas.getBoundingClientRect();
                imagePosX = e.clientX - rect.left - startX;
                imagePosY = e.clientY - rect.top - startY;
                drawImageOnCanvas();
            });

            canvas.addEventListener('mouseup', function() {
                isDragging = false;
                canvas.style.cursor = 'crosshair';
            });

            canvas.addEventListener('mouseleave', function() {
                isDragging = false;
                canvas.style.cursor = 'crosshair';
            });

            // Touch events for mobile
            canvas.addEventListener('touchstart', function(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                startX = touch.clientX - rect.left - imagePosX;
                startY = touch.clientY - rect.top - imagePosY;
                isDragging = true;
            });

            canvas.addEventListener('touchmove', function(e) {
                e.preventDefault();
                if (!isDragging) return;
                
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                imagePosX = touch.clientX - rect.left - startX;
                imagePosY = touch.clientY - rect.top - startY;
                drawImageOnCanvas();
            });

            canvas.addEventListener('touchend', function(e) {
                e.preventDefault();
                isDragging = false;
            });
        }

        function drawImageOnCanvas() {
            const canvas = document.getElementById('cropCanvas');
            const ctx = canvas.getContext('2d');
            const image = document.getElementById('previewImage');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Save context
            ctx.save();
            
            // Move to center point
            const centerX = canvas.width / 2 + imagePosX;
            const centerY = canvas.height / 2 + imagePosY;
            ctx.translate(centerX, centerY);
            
            // Apply rotation
            ctx.rotate(imageRotation * Math.PI / 180);
            
            // Apply scale
            ctx.scale(imageScale, imageScale);
            
            // Calculate image dimensions to fit canvas while maintaining aspect ratio
            const imgAspect = image.naturalWidth / image.naturalHeight;
            const canvasAspect = canvas.width / canvas.height;
            
            let drawWidth, drawHeight;
            if (imgAspect > canvasAspect) {
                drawHeight = canvas.height;
                drawWidth = drawHeight * imgAspect;
            } else {
                drawWidth = canvas.width;
                drawHeight = drawWidth / imgAspect;
            }
            
            // Draw image centered
            ctx.drawImage(image, -drawWidth/2, -drawHeight/2, drawWidth, drawHeight);
            
            // Restore context
            ctx.restore();
            
            // Draw crop circle outline
            ctx.beginPath();
            ctx.arc(canvas.width/2, canvas.height/2, Math.min(canvas.width, canvas.height)/2 - 10, 0, 2 * Math.PI);
            ctx.strokeStyle = '#007bff';
            ctx.lineWidth = 3;
            ctx.stroke();
        }

        function updateImageScale() {
            imageScale = parseFloat(document.getElementById('scaleSlider').value);
            drawImageOnCanvas();
        }

        function updateImageRotation() {
            imageRotation = parseFloat(document.getElementById('rotateSlider').value);
            drawImageOnCanvas();
        }

        function applyProfileImage() {
            const canvas = document.getElementById('cropCanvas');
            const ctx = canvas.getContext('2d');
            
            // Create circular crop
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            tempCanvas.width = 200;
            tempCanvas.height = 200;
            
            // Copy the cropped area
            tempCtx.drawImage(canvas, 0, 0, canvas.width, canvas.height, 0, 0, 200, 200);
            
            // Create circular mask
            const finalCanvas = document.createElement('canvas');
            const finalCtx = finalCanvas.getContext('2d');
            finalCanvas.width = 200;
            finalCanvas.height = 200;
            
            finalCtx.beginPath();
            finalCtx.arc(100, 100, 100, 0, 2 * Math.PI);
            finalCtx.clip();
            finalCtx.drawImage(tempCanvas, 0, 0);
            
            // Convert to data URL and save
            const croppedImageData = finalCanvas.toDataURL('image/png', 0.8);
            
            // Update profile picture
            const pictureContainer = document.getElementById('currentProfilePicture');
            pictureContainer.innerHTML = `<img src="${croppedImageData}" alt="Profile Picture">`;
            
            // Save to localStorage
            localStorage.setItem('profilePicture', croppedImageData);
            
            // Close modal
            closeImagePreview();
            
            // Show success notification
            const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
            let successMsg = '‚úÖ –ü—Ä–æ—Ñ–∞–π–ª –∑—É—Ä–∞–≥ –∞–º–∂–∏–ª—Ç—Ç–∞–π —Å–æ–ª–∏–≥–¥–ª–æ–æ!';
            
            if (currentLang === 'jp') successMsg = '‚úÖ „Éó„É≠„Éï„Ç£„Éº„É´ÁîªÂÉè„ÅåÊ≠£Â∏∏„Å´Â§âÊõ¥„Åï„Çå„Åæ„Åó„ÅüÔºÅ';
            else if (currentLang === 'en') successMsg = '‚úÖ Profile picture changed successfully!';
            else if (currentLang === 'zh') successMsg = '‚úÖ Â§¥ÂÉèÊõ¥Êç¢ÊàêÂäüÔºÅ';
            else if (currentLang === 'ru') successMsg = '‚úÖ –§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–æ!';
            
            showNotification(successMsg, 'success');
        }

        function closeImagePreview() {
            const modal = document.getElementById('imagePreviewModal');
            modal.style.display = 'none';
            currentImageData = null;
        }

        function removeProfilePicture() {
            const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
            let confirmMsg = '–¢–∞ –ø—Ä–æ—Ñ–∞–π–ª –∑—É—Ä–≥–∏–π–≥ —É—Å—Ç–≥–∞—Ö–¥–∞–∞ –∏—Ç–≥—ç–ª—Ç—ç–π –±–∞–π–Ω–∞ —É—É?';
            
            if (currentLang === 'jp') confirmMsg = '„Éó„É≠„Éï„Ç£„Éº„É´ÁîªÂÉè„ÇíÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü';
            else if (currentLang === 'en') confirmMsg = 'Are you sure you want to remove the profile picture?';
            else if (currentLang === 'zh') confirmMsg = 'ÊÇ®Á°ÆÂÆöË¶ÅÂà†Èô§Â§¥ÂÉèÂêóÔºü';
            else if (currentLang === 'ru') confirmMsg = '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è?';
            
            if (confirm(confirmMsg)) {
                const picture = document.getElementById('currentProfilePicture');
                picture.innerHTML = '<div class="placeholder">üë§</div>';
                localStorage.removeItem('profilePicture');
                
                let successMsg = 'üóëÔ∏è –ü—Ä–æ—Ñ–∞–π–ª –∑—É—Ä–∞–≥ —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞';
                
                if (currentLang === 'jp') successMsg = 'üóëÔ∏è „Éó„É≠„Éï„Ç£„Éº„É´ÁîªÂÉè„ÅåÂâäÈô§„Åï„Çå„Åæ„Åó„Åü';
                else if (currentLang === 'en') successMsg = 'üóëÔ∏è Profile picture removed';
                else if (currentLang === 'zh') successMsg = 'üóëÔ∏è Â§¥ÂÉèÂ∑≤Âà†Èô§';
                else if (currentLang === 'ru') successMsg = 'üóëÔ∏è –§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è —É–¥–∞–ª–µ–Ω–æ';
                
                showNotification(successMsg, 'success');
            }
        }

        // Camera functionality
        function takeProfilePhoto() {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
                let errorMsg = '‚ö†Ô∏è –¢–∞–Ω—ã —Ç”©—Ö”©”©—Ä”©–º–∂ –∫–∞–º–µ—Ä –¥—ç–º–∂–∏—Ö–≥“Ø–π –±–∞–π–Ω–∞!';
                
                if (currentLang === 'jp') errorMsg = '‚ö†Ô∏è „Åä‰Ωø„ÅÑ„ÅÆ„Éá„Éê„Ç§„Çπ„ÅØ„Ç´„É°„É©„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„ÇìÔºÅ';
                else if (currentLang === 'en') errorMsg = '‚ö†Ô∏è Your device does not support camera!';
                else if (currentLang === 'zh') errorMsg = '‚ö†Ô∏è ÊÇ®ÁöÑËÆæÂ§á‰∏çÊîØÊåÅÊëÑÂÉèÂ§¥ÔºÅ';
                else if (currentLang === 'ru') errorMsg = '‚ö†Ô∏è –í–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–º–µ—Ä—É!';
                
                showNotification(errorMsg, 'error');
                return;
            }

            openCameraModal();
        }

        function openCameraModal() {
            const cameraModal = document.createElement('div');
            cameraModal.className = 'camera-modal';
            cameraModal.id = 'cameraModal';
            
            cameraModal.innerHTML = `
                <div class="camera-view">
                    <video id="cameraVideo" class="camera-video" autoplay></video>
                    <canvas id="cameraCanvas" style="display: none;"></canvas>
                    <div class="camera-controls">
                        <button class="camera-btn" onclick="closeCameraModal()" title="–•–∞–∞—Ö">‚ùå</button>
                        <button class="camera-btn capture" onclick="capturePhoto()" title="–ó—É—Ä–∞–≥ –∞–≤–∞—Ö">üì∑</button>
                        <button class="camera-btn" onclick="switchCamera()" title="–ö–∞–º–µ—Ä —Å–æ–ª–∏—Ö">üîÑ</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(cameraModal);
            startCamera();
        }

        let currentStream = null;
        let currentFacingMode = 'user'; // 'user' for front camera, 'environment' for back camera

        async function startCamera() {
            try {
                if (currentStream) {
                    currentStream.getTracks().forEach(track => track.stop());
                }

                const constraints = {
                    video: {
                        facingMode: currentFacingMode,
                        width: { ideal: 640 },
                        height: { ideal: 480 }
                    }
                };

                currentStream = await navigator.mediaDevices.getUserMedia(constraints);
                const video = document.getElementById('cameraVideo');
                video.srcObject = currentStream;
                
                const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
                let readyMsg = 'üì∑ –ö–∞–º–µ—Ä –±—ç–ª—ç–Ω –±–æ–ª–ª–æ–æ!';
                
                if (currentLang === 'jp') readyMsg = 'üì∑ „Ç´„É°„É©„ÅÆÊ∫ñÂÇô„Åå„Åß„Åç„Åæ„Åó„ÅüÔºÅ';
                else if (currentLang === 'en') readyMsg = 'üì∑ Camera is ready!';
                else if (currentLang === 'zh') readyMsg = 'üì∑ Áõ∏Êú∫ÂáÜÂ§áÂ∞±Áª™ÔºÅ';
                else if (currentLang === 'ru') readyMsg = 'üì∑ –ö–∞–º–µ—Ä–∞ –≥–æ—Ç–æ–≤–∞!';
                
                showNotification(readyMsg, 'success');
                
            } catch (error) {
                console.error('Camera access error:', error);
                
                const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
                let errorMsg = '‚ùå –ö–∞–º–µ—Ä—Ç —Ö–∞–Ω–¥–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞!';
                
                if (currentLang === 'jp') errorMsg = '‚ùå „Ç´„É°„É©„Å∏„ÅÆ„Ç¢„ÇØ„Çª„Çπ„Åß„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„ÅüÔºÅ';
                else if (currentLang === 'en') errorMsg = '‚ùå Error accessing camera!';
                else if (currentLang === 'zh') errorMsg = '‚ùå ËÆøÈóÆÁõ∏Êú∫Êó∂Âá∫ÈîôÔºÅ';
                else if (currentLang === 'ru') errorMsg = '‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ!';
                
                showNotification(errorMsg, 'error');
                closeCameraModal();
            }
        }

        function switchCamera() {
            currentFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';
            startCamera();
        }

        function capturePhoto() {
            const video = document.getElementById('cameraVideo');
            const canvas = document.getElementById('cameraCanvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            // Flip horizontally for front camera
            if (currentFacingMode === 'user') {
                ctx.scale(-1, 1);
                ctx.drawImage(video, -canvas.width, 0, canvas.width, canvas.height);
            } else {
                ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            }
            
            const imageData = canvas.toDataURL('image/png');
            
            // Close camera and show preview
            closeCameraModal();
            
            // Use the captured image as profile picture
            currentImageData = imageData;
            showImagePreview(imageData);
        }

        function closeCameraModal() {
            if (currentStream) {
                currentStream.getTracks().forEach(track => track.stop());
                currentStream = null;
            }
            
            const modal = document.getElementById('cameraModal');
            if (modal) {
                modal.remove();
            }
        }

        // Load saved profile picture on page load
        function loadSavedProfilePicture() {
            const savedPicture = localStorage.getItem('profilePicture');
            if (savedPicture) {
                const pictureContainer = document.getElementById('currentProfilePicture');
                pictureContainer.innerHTML = `<img src="${savedPicture}" alt="Profile Picture">`;
            }
        }

        function loadUserProfile() {
            // Load saved profile data
            document.getElementById('userFirstName').value = localStorage.getItem('userFirstName') || '';
            document.getElementById('userLastName').value = localStorage.getItem('userLastName') || '';
            document.getElementById('userEmail').value = localStorage.getItem('userEmail') || '';
            document.getElementById('userPhone').value = localStorage.getItem('userPhone') || '';
            document.getElementById('userBirthday').value = localStorage.getItem('userBirthday') || '';
            document.getElementById('studyYear').value = localStorage.getItem('studyYear') || '';
            document.getElementById('userMajor').value = localStorage.getItem('userMajor') || '';
            document.getElementById('userBio').value = localStorage.getItem('userBio') || '';
            
            showNotification('üîÑ –ü—Ä–æ—Ñ–∞–π–ª –º—ç–¥—ç—ç–ª—ç–ª –∞—á–∞–∞–ª–∞–≥–¥–ª–∞–∞', 'info');
        }

        // Save enhanced profile
        function saveProfile() {
            const firstName = document.getElementById('userFirstName').value;
            const lastName = document.getElementById('userLastName').value;
            const email = document.getElementById('userEmail').value;
            const phone = document.getElementById('userPhone').value;
            const birthday = document.getElementById('userBirthday').value;
            const studyYear = document.getElementById('studyYear').value;
            const major = document.getElementById('userMajor').value;
            const bio = document.getElementById('userBio').value;
            
            if (firstName && lastName && email) {
                localStorage.setItem('userFirstName', firstName);
                localStorage.setItem('userLastName', lastName);
                localStorage.setItem('userEmail', email);
                localStorage.setItem('userPhone', phone);
                localStorage.setItem('userBirthday', birthday);
                localStorage.setItem('studyYear', studyYear);
                localStorage.setItem('userMajor', major);
                localStorage.setItem('userBio', bio);
                
                showNotification(t('profileSaved'), 'success');
            } else {
                const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
                let warningMsg = '‚ö†Ô∏è –û–≤–æ–≥ –Ω—ç—Ä, –Ω—ç—Ä –±–æ–ª–æ–Ω –∏-–º—ç–π–ª –∑–∞–∞–≤–∞–ª –±”©–≥–ª”©—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π!';
                
                if (currentLang === 'jp') warningMsg = '‚ö†Ô∏è Âßì„ÄÅÂêçÂâç„ÄÅ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÅÆÂÖ•Âäõ„ÅåÂøÖË¶Å„Åß„ÅôÔºÅ';
                else if (currentLang === 'en') warningMsg = '‚ö†Ô∏è First name, last name and email are required!';
                else if (currentLang === 'zh') warningMsg = '‚ö†Ô∏è ÂøÖÈ°ªÂ°´ÂÜôÂßìÊ∞è„ÄÅÂßìÂêçÂíåÁîµÂ≠êÈÇÆ‰ª∂ÔºÅ';
                else if (currentLang === 'ru') warningMsg = '‚ö†Ô∏è –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–∞–º–∏–ª–∏—é, –∏–º—è –∏ email!';
                
                showNotification(warningMsg, 'warning');
            }
        }

        // Enhanced notifications
        function saveNotifications() {
            const homeworkDeadline = document.getElementById('homeworkDeadlineNotifs').checked;
            const newHomework = document.getElementById('newHomeworkNotifs').checked;
            const noteReminder = document.getElementById('noteReminderNotifs').checked;
            const goalProgress = document.getElementById('goalProgressNotifs').checked;
            const systemUpdate = document.getElementById('systemUpdateNotifs').checked;
            const monthlyReport = document.getElementById('monthlyReportNotifs').checked;
            const morningTime = document.getElementById('morningNotifTime').value;
            const eveningTime = document.getElementById('eveningNotifTime').value;
            
            localStorage.setItem('homeworkDeadlineNotifs', homeworkDeadline);
            localStorage.setItem('newHomeworkNotifs', newHomework);
            localStorage.setItem('noteReminderNotifs', noteReminder);
            localStorage.setItem('goalProgressNotifs', goalProgress);
            localStorage.setItem('systemUpdateNotifs', systemUpdate);
            localStorage.setItem('monthlyReportNotifs', monthlyReport);
            localStorage.setItem('morningNotifTime', morningTime);
            localStorage.setItem('eveningNotifTime', eveningTime);
            
            showNotification(t('notificationsSaved'), 'success');
        }

        function testNotification() {
            showNotification('üîî –≠–Ω—ç –±–æ–ª —Ç—É—Ä—à–∏–ª—Ç—ã–Ω –º—ç–¥—ç–≥–¥—ç–ª —é–º. –¢–∞–Ω—ã —Ç–æ—Ö–∏—Ä–≥–æ–æ –∑”©–≤ –∞–∂–∏–ª–ª–∞–∂ –±–∞–π–Ω–∞!', 'info');
        }

        // Data management functions
        function exportData(type) {
            let data = {};
            let filename = '';
            
            switch(type) {
                case 'all':
                    data = {
                        notes: JSON.parse(localStorage.getItem('notes') || '[]'),
                        tasks: JSON.parse(localStorage.getItem('tasks') || '[]'),
                        goals: JSON.parse(localStorage.getItem('goals') || '[]'),
                        profile: {
                            firstName: localStorage.getItem('userFirstName'),
                            lastName: localStorage.getItem('userLastName'),
                            email: localStorage.getItem('userEmail'),
                            phone: localStorage.getItem('userPhone'),
                            birthday: localStorage.getItem('userBirthday'),
                            studyYear: localStorage.getItem('studyYear'),
                            major: localStorage.getItem('userMajor'),
                            bio: localStorage.getItem('userBio')
                        },
                        settings: {
                            theme: localStorage.getItem('selectedTheme'),
                            notifications: {
                                homeworkDeadline: localStorage.getItem('homeworkDeadlineNotifs'),
                                newHomework: localStorage.getItem('newHomeworkNotifs'),
                                noteReminder: localStorage.getItem('noteReminderNotifs'),
                                goalProgress: localStorage.getItem('goalProgressNotifs'),
                                systemUpdate: localStorage.getItem('systemUpdateNotifs'),
                                monthlyReport: localStorage.getItem('monthlyReportNotifs')
                            }
                        }
                    };
                    filename = 'study_hub_backup_all.json';
                    break;
                case 'notes':
                    data = JSON.parse(localStorage.getItem('notes') || '[]');
                    filename = 'study_hub_notes.json';
                    break;
                case 'tasks':
                    data = JSON.parse(localStorage.getItem('tasks') || '[]');
                    filename = 'study_hub_tasks.json';
                    break;
                case 'goals':
                    data = JSON.parse(localStorage.getItem('goals') || '[]');
                    filename = 'study_hub_goals.json';
                    break;
            }
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification(t('dataExported'), 'success');
        }

        function importData() {
            const file = document.getElementById('importFile').files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Check if it's a full backup
                    if (data.notes && data.tasks && data.goals && data.profile) {
                        // Full backup restore
                        localStorage.setItem('notes', JSON.stringify(data.notes));
                        localStorage.setItem('tasks', JSON.stringify(data.tasks));
                        localStorage.setItem('goals', JSON.stringify(data.goals));
                        
                        if (data.profile) {
                            localStorage.setItem('userFirstName', data.profile.firstName || '');
                            localStorage.setItem('userLastName', data.profile.lastName || '');
                            localStorage.setItem('userEmail', data.profile.email || '');
                            localStorage.setItem('userPhone', data.profile.phone || '');
                            localStorage.setItem('userBirthday', data.profile.birthday || '');
                            localStorage.setItem('studyYear', data.profile.studyYear || '');
                            localStorage.setItem('userMajor', data.profile.major || '');
                            localStorage.setItem('userBio', data.profile.bio || '');
                        }
                        
                        if (data.settings) {
                            if (data.settings.theme) {
                                localStorage.setItem('selectedTheme', data.settings.theme);
                            }
                            if (data.settings.notifications) {
                                Object.keys(data.settings.notifications).forEach(key => {
                                    localStorage.setItem(key, data.settings.notifications[key]);
                                });
                            }
                        }
                        
                        showNotification('üì• –ë“Ø—Ö ”©–≥”©–≥–¥”©–ª –∞–º–∂–∏–ª—Ç—Ç–∞–π –∏–º–ø–æ—Ä—Ç —Ö–∏–π–≥–¥–ª—ç—ç!', 'success');
                    } else if (Array.isArray(data)) {
                        // Single data type import
                        const keys = Object.keys(data[0] || {});
                        if (keys.includes('title') && keys.includes('content')) {
                            localStorage.setItem('notes', JSON.stringify(data));
                            showNotification('üì• –¢—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥ –∏–º–ø–æ—Ä—Ç —Ö–∏–π–≥–¥–ª—ç—ç!', 'success');
                        } else if (keys.includes('task') && keys.includes('completed')) {
                            localStorage.setItem('tasks', JSON.stringify(data));
                            showNotification('üì• –î–∞–∞–ª–≥–∞–≤—Ä—Éud –∏–º–ø–æ—Ä—Ç —Ö–∏–π–≥–¥–ª—ç—ç!', 'success');
                        } else if (keys.includes('goal') && keys.includes('progress')) {
                            localStorage.setItem('goals', JSON.stringify(data));
                            showNotification('üì• –ó–æ—Ä–∏–ª–≥—É—É–¥ –∏–º–ø–æ—Ä—Ç —Ö–∏–π–≥–¥–ª—ç—ç!', 'success');
                        }
                    }
                    
                    // Refresh current display
                    location.reload();
                    
                } catch (error) {
                    showNotification('‚ùå –§–∞–π–ª —É–Ω—à–∏—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞!', 'error');
                }
            };
            reader.readAsText(file);
        }

        function clearAllData() {
            if (confirm('‚ö†Ô∏è –¢–∞ –±“Ø—Ö ”©–≥”©–≥–¥–ª”©”© —É—Å—Ç–≥–∞—Ö–¥–∞–∞ –∏—Ç–≥—ç–ª—Ç—ç–π –±–∞–π–Ω–∞ —É—É? –≠–Ω—ç “Ø–π–ª–¥–ª–∏–π–≥ –±—É—Ü–∞–∞—Ö –±–æ–ª–æ–º–∂–≥“Ø–π!')) {
                localStorage.clear();
                showNotification('üóëÔ∏è –ë“Ø—Ö ”©–≥”©–≥–¥”©–ª —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞!', 'success');
                setTimeout(() => location.reload(), 2000);
            }
        }

        function resetToDefault() {
            if (confirm('üîÑ –¢–∞ —Å–∏—Å—Ç–µ–º–∏–π–≥ –∞–Ω—Ö–Ω—ã –±–∞–π–¥–∞–ª–¥ —Å—ç—Ä–≥—ç—ç—Ö—ç–¥ –∏—Ç–≥—ç–ª—Ç—ç–π –±–∞–π–Ω–∞ —É—É?')) {
                localStorage.clear();
                showNotification('üîÑ –°–∏—Å—Ç–µ–º –∞–Ω—Ö–Ω—ã –±–∞–π–¥–∞–ª–¥ —Å—ç—Ä–≥—ç—ç–≥–¥–ª—ç—ç!', 'success');
                setTimeout(() => location.reload(), 2000);
            }
        }

        // Language translations
        const translations = {
            mn: {
                // Current Mongolian translations (default)
                welcome: "üéâ Study Hub –ø–ª–∞—Ç—Ñ–æ—Ä–º—Ç —Ç–∞–≤—Ç–∞–π –º–æ—Ä–∏–ª–Ω–æ —É—É!",
                settingsSaved: "‚úÖ –•—ç–ª–Ω–∏–π —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞–≥–¥–ª–∞–∞!",
                profileSaved: "‚úÖ –ü—Ä–æ—Ñ–∞–π–ª –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö–∞–¥–≥–∞–ª–∞–≥–¥–ª–∞–∞!",
                themeSaved: "‚úÖ –ó–∞–≥–≤–∞—Ä—ã–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞–≥–¥–ª–∞–∞!",
                notificationsSaved: "‚úÖ –ú—ç–¥—ç–≥–¥–ª–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞–≥–¥–ª–∞–∞!",
                dataExported: "üì§ ”®–≥”©–≥–¥”©–ª —ç–∫—Å–ø–æ—Ä—Ç —Ö–∏–π–≥–¥–ª—ç—ç!",
                backupCompleted: "üíæ –ê–≤—Ç–æ–º–∞—Ç backup –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö–∏–π–≥–¥–ª—ç—ç!",
                settingsTitle: "‚öôÔ∏è –¢–æ—Ö–∏—Ä–≥–æ–æ & –•—ç—Ä—ç–≥—Å–ª“Ø“Ø–¥",
                themeSettings: "üé® –ó–∞–≥–≤–∞—Ä",
                profileSettings: "üë§ –ü—Ä–æ—Ñ–∞–π–ª", 
                notifications: "üîî –ú—ç–¥—ç–≥–¥—ç–ª",
                dataManagement: "üíæ ”®–≥”©–≥–¥”©–ª",
                language: "üåê –•—ç–ª",
                privacy: "üîí –ù—É—É—Ü–ª–∞–ª"
            },
            jp: {
                welcome: "üéâ Study Hub„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅ",
                settingsSaved: "‚úÖ Ë®ÄË™ûË®≠ÂÆö„Åå‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ",
                profileSaved: "‚úÖ „Éó„É≠„Éï„Ç£„Éº„É´„ÅåÊ≠£Â∏∏„Å´‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ",
                themeSaved: "‚úÖ „ÉÜ„Éº„ÉûË®≠ÂÆö„Åå‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ",
                notificationsSaved: "‚úÖ ÈÄöÁü•Ë®≠ÂÆö„Åå‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ",
                dataExported: "üì§ „Éá„Éº„Çø„Åå„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åï„Çå„Åæ„Åó„ÅüÔºÅ",
                backupCompleted: "üíæ Ëá™Âãï„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ",
                settingsTitle: "‚öôÔ∏è Ë®≠ÂÆö„Å®„ÉÑ„Éº„É´",
                themeSettings: "üé® „ÉÜ„Éº„Éû",
                profileSettings: "üë§ „Éó„É≠„Éï„Ç£„Éº„É´",
                notifications: "üîî ÈÄöÁü•",
                dataManagement: "üíæ „Éá„Éº„Çø",
                language: "üåê Ë®ÄË™û",
                privacy: "üîí „Éó„É©„Ç§„Éê„Ç∑„Éº"
            },
            en: {
                welcome: "üéâ Welcome to Study Hub Platform!",
                settingsSaved: "‚úÖ Language settings saved!",
                profileSaved: "‚úÖ Profile saved successfully!",
                themeSaved: "‚úÖ Theme settings saved!",
                notificationsSaved: "‚úÖ Notification settings saved!",
                dataExported: "üì§ Data exported successfully!",
                backupCompleted: "üíæ Auto backup completed successfully!",
                settingsTitle: "‚öôÔ∏è Settings & Tools",
                themeSettings: "üé® Theme",
                profileSettings: "üë§ Profile",
                notifications: "üîî Notifications",
                dataManagement: "üíæ Data",
                language: "üåê Language",
                privacy: "üîí Privacy"
            },
            zh: {
                welcome: "üéâ Ê¨¢Ëøé‰ΩøÁî®Study HubÂπ≥Âè∞ÔºÅ",
                settingsSaved: "‚úÖ ËØ≠Ë®ÄËÆæÁΩÆÂ∑≤‰øùÂ≠òÔºÅ",
                profileSaved: "‚úÖ ‰∏™‰∫∫ËµÑÊñô‰øùÂ≠òÊàêÂäüÔºÅ",
                themeSaved: "‚úÖ ‰∏ªÈ¢òËÆæÁΩÆÂ∑≤‰øùÂ≠òÔºÅ",
                notificationsSaved: "‚úÖ ÈÄöÁü•ËÆæÁΩÆÂ∑≤‰øùÂ≠òÔºÅ",
                dataExported: "üì§ Êï∞ÊçÆÂØºÂá∫ÊàêÂäüÔºÅ",
                backupCompleted: "üíæ Ëá™Âä®Â§á‰ªΩÂÆåÊàêÔºÅ",
                settingsTitle: "‚öôÔ∏è ËÆæÁΩÆÂíåÂ∑•ÂÖ∑",
                themeSettings: "üé® ‰∏ªÈ¢ò",
                profileSettings: "üë§ ‰∏™‰∫∫ËµÑÊñô",
                notifications: "üîî ÈÄöÁü•",
                dataManagement: "üíæ Êï∞ÊçÆ",
                language: "üåê ËØ≠Ë®Ä",
                privacy: "üîí ÈöêÁßÅ"
            },
            ru: {
                welcome: "üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É Study Hub!",
                settingsSaved: "‚úÖ –Ø–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!",
                profileSaved: "‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!",
                themeSaved: "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!",
                notificationsSaved: "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!",
                dataExported: "üì§ –î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!",
                backupCompleted: "üíæ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!",
                settingsTitle: "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã",
                themeSettings: "üé® –¢–µ–º–∞",
                profileSettings: "üë§ –ü—Ä–æ—Ñ–∏–ª—å",
                notifications: "üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
                dataManagement: "üíæ –î–∞–Ω–Ω—ã–µ",
                language: "üåê –Ø–∑—ã–∫",
                privacy: "üîí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å"
            }
        };

        // Get translation function
        function t(key) {
            const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
            return translations[currentLang] && translations[currentLang][key] 
                ? translations[currentLang][key] 
                : translations.mn[key] || key;
        }

        // Apply language to interface
        function applyLanguage() {
            const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
            
            // Main navigation translations
            const navTranslations = {
                mn: {
                    home: 'üè† –ù“Ø“Ø—Ä',
                    notes: 'üìù –¢—ç–º–¥—ç–≥–ª—ç–ª', 
                    homework: 'üìã –ì—ç—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä',
                    settings: '‚öôÔ∏è –¢–æ—Ö–∏—Ä–≥–æ–æ'
                },
                jp: {
                    home: 'üè† „Éõ„Éº„É†',
                    notes: 'üìù „Éé„Éº„Éà',
                    homework: 'üìã ÂÆøÈ°å',
                    settings: '‚öôÔ∏è Ë®≠ÂÆö'
                },
                en: {
                    home: 'üè† Home',
                    notes: 'üìù Notes',
                    homework: 'üìã Homework', 
                    settings: '‚öôÔ∏è Settings'
                },
                zh: {
                    home: 'üè† È¶ñÈ°µ',
                    notes: 'üìù Á¨îËÆ∞',
                    homework: 'üìã ‰Ωú‰∏ö',
                    settings: '‚öôÔ∏è ËÆæÁΩÆ'
                },
                ru: {
                    home: 'üè† –ì–ª–∞–≤–Ω–∞—è',
                    notes: 'üìù –ó–∞–º–µ—Ç–∫–∏',
                    homework: 'üìã –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ',
                    settings: '‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏'
                }
            };

            // Update main navigation tabs
            const navTabs = document.querySelectorAll('.nav-tab');
            const navKeys = ['home', 'notes', 'homework', 'settings'];
            
            navTabs.forEach((tab, index) => {
                if (navTranslations[currentLang] && navKeys[index]) {
                    tab.textContent = navTranslations[currentLang][navKeys[index]];
                }
            });

            // Settings navigation elements
            const elements = {
                'settingsTitle': '.settings-header h2',
                'themeSettings': '[onclick="showSettings(\'themeSettings\')"] .nav-text',
                'profileSettings': '[onclick="showSettings(\'profileSettings\')"] .nav-text',
                'notifications': '[onclick="showSettings(\'notificationSettings\')"] .nav-text',
                'dataManagement': '[onclick="showSettings(\'dataSettings\')"] .nav-text',
                'language': '[onclick="showSettings(\'languageSettings\')"] .nav-text',
                'privacy': '[onclick="showSettings(\'privacySettings\')"] .nav-text'
            };

            Object.keys(elements).forEach(key => {
                const element = document.querySelector(elements[key]);
                if (element) {
                    element.textContent = t(key);
                }
            });

            // Update subtitle based on language
            const subtitleTranslations = {
                mn: '–ë–æ–ª–æ–≤—Å—Ä–æ–ª—ã–Ω —Ü–æ–≥—Ü –ø–ª–∞—Ç—Ñ–æ—Ä–º',
                jp: 'Á∑èÂêàÊïôËÇ≤„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†',
                en: 'Comprehensive Educational Platform',
                zh: 'ÁªºÂêàÊïôËÇ≤Âπ≥Âè∞',
                ru: '–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞'
            };

            const subtitle = document.querySelector('.subtitle');
            if (subtitle && subtitleTranslations[currentLang]) {
                subtitle.textContent = subtitleTranslations[currentLang];
            }
        }

        // Language settings with translation support
        function saveLanguageSettings() {
            const interfaceLanguage = document.getElementById('interfaceLanguage').value;
            const timezone = document.getElementById('timezone').value;
            const dateFormat = document.getElementById('dateFormat').value;
            const timeFormat = document.getElementById('timeFormat').value;
            const weekStart = document.getElementById('weekStart').value;
            
            localStorage.setItem('interfaceLanguage', interfaceLanguage);
            localStorage.setItem('timezone', timezone);
            localStorage.setItem('dateFormat', dateFormat);
            localStorage.setItem('timeFormat', timeFormat);
            localStorage.setItem('weekStart', weekStart);
            
            // Apply new language
            applyLanguage();
            
            showNotification(t('settingsSaved'), 'success');
        }

        // Privacy settings
        function savePrivacySettings() {
            const autoLogout = document.getElementById('autoLogout').value;
            const allowNoteSharing = document.getElementById('allowNoteSharing').checked;
            const showProgressToOthers = document.getElementById('showProgressToOthers').checked;
            const allowAnalytics = document.getElementById('allowAnalytics').checked;
            const sendErrorReports = document.getElementById('sendErrorReports').checked;
            
            localStorage.setItem('autoLogout', autoLogout);
            localStorage.setItem('allowNoteSharing', allowNoteSharing);
            localStorage.setItem('showProgressToOthers', showProgressToOthers);
            localStorage.setItem('allowAnalytics', allowAnalytics);
            localStorage.setItem('sendErrorReports', sendErrorReports);
            
            showNotification('‚úÖ –ù—É—É—Ü–ª–∞–ª—ã–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞–≥–¥–ª–∞–∞!', 'success');
        }

        function changePassword() {
            showNotification('üîë –ù—É—É—Ü “Ø–≥ —Å–æ–ª–∏—Ö —Ñ—É–Ω–∫—Ü —É–¥–∞—Ö–≥“Ø–π –Ω—ç–º—ç–≥–¥—ç–Ω—ç', 'info');
        }

        function downloadPrivacyReport() {
            const report = {
                generatedAt: new Date().toISOString(),
                userData: {
                    profileComplete: localStorage.getItem('userEmail') ? true : false,
                    notesCount: JSON.parse(localStorage.getItem('notes') || '[]').length,
                    tasksCount: JSON.parse(localStorage.getItem('tasks') || '[]').length,
                    goalsCount: JSON.parse(localStorage.getItem('goals') || '[]').length
                },
                privacy: {
                    noteSharing: localStorage.getItem('allowNoteSharing') === 'true',
                    progressVisibility: localStorage.getItem('showProgressToOthers') === 'true',
                    analyticsEnabled: localStorage.getItem('allowAnalytics') === 'true',
                    errorReporting: localStorage.getItem('sendErrorReports') === 'true'
                },
                dataSize: JSON.stringify(localStorage).length + ' bytes'
            };
            
            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'privacy_report.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('üìÑ –ù—É—É—Ü–ª–∞–ª—ã–Ω —Ç–∞–π–ª–∞–Ω —Ç–∞—Ç–∞–∂ –∞–≤–ª–∞–∞!', 'success');
        }

        // Calculate storage usage
        function updateStorageInfo() {
            const notes = localStorage.getItem('notes') || '[]';
            const tasks = localStorage.getItem('tasks') || '[]';
            const total = JSON.stringify(localStorage);
            
            document.getElementById('totalStorageSize').textContent = formatBytes(total.length);
            document.getElementById('notesStorageSize').textContent = formatBytes(notes.length);
            document.getElementById('tasksStorageSize').textContent = formatBytes(tasks.length);
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Auto backup functionality
        function checkAutoBackup() {
            const autoBackupEnabled = localStorage.getItem('autoBackup') === 'true';
            const backupFrequency = localStorage.getItem('backupFrequency') || 'weekly';
            const lastBackup = localStorage.getItem('lastBackupDate');
            
            if (!autoBackupEnabled) return;
            
            const now = new Date();
            const lastBackupDate = lastBackup ? new Date(lastBackup) : new Date(0);
            
            let shouldBackup = false;
            
            switch (backupFrequency) {
                case 'daily':
                    shouldBackup = now - lastBackupDate >= 24 * 60 * 60 * 1000;
                    break;
                case 'weekly':
                    shouldBackup = now - lastBackupDate >= 7 * 24 * 60 * 60 * 1000;
                    break;
                case 'monthly':
                    shouldBackup = now - lastBackupDate >= 30 * 24 * 60 * 60 * 1000;
                    break;
            }
            
            if (shouldBackup) {
                performAutoBackup();
                localStorage.setItem('lastBackupDate', now.toISOString());
            }
        }

        function performAutoBackup() {
            try {
                exportData('all');
                showNotification(t('backupCompleted'), 'success');
            } catch (error) {
                const currentLang = localStorage.getItem('interfaceLanguage') || 'mn';
                let errorMsg = '‚ùå –ê–≤—Ç–æ–º–∞—Ç backup —Ö–∏–π—Ö—ç–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞!';
                
                if (currentLang === 'jp') errorMsg = '‚ùå Ëá™Âãï„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„ÅüÔºÅ';
                else if (currentLang === 'en') errorMsg = '‚ùå Error occurred during auto backup!';
                else if (currentLang === 'zh') errorMsg = '‚ùå Ëá™Âä®Â§á‰ªΩÊó∂ÂèëÁîüÈîôËØØÔºÅ';
                else if (currentLang === 'ru') errorMsg = '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∑–µ—Ä–≤–Ω–æ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏!';
                
                showNotification(errorMsg, 'error');
            }
        }

        // Data backup functions enhancement
        function saveDataSettings() {
            const autoBackup = document.getElementById('autoBackup').checked;
            const backupFrequency = document.getElementById('backupFrequency').value;
            
            localStorage.setItem('autoBackup', autoBackup);
            localStorage.setItem('backupFrequency', backupFrequency);
            
            if (autoBackup) {
                // Set initial backup date if not exists
                if (!localStorage.getItem('lastBackupDate')) {
                    localStorage.setItem('lastBackupDate', new Date().toISOString());
                }
                showNotification('‚úÖ –ê–≤—Ç–æ–º–∞—Ç backup –∏–¥—ç–≤—Ö–∂“Ø“Ø–ª—ç–≥–¥–ª—ç—ç!', 'success');
            } else {
                showNotification('‚úÖ ”®–≥”©–≥–¥–ª–∏–π–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ —Ö–∞–¥–≥–∞–ª–∞–≥–¥–ª–∞–∞!', 'success');
            }
        }

        // Theme application enhancement
        function applyCustomTheme() {
            const primaryColor = localStorage.getItem('primaryColor');
            const accentColor = localStorage.getItem('accentColor');
            const fontSize = localStorage.getItem('fontSize');
            
            if (primaryColor) {
                document.documentElement.style.setProperty('--primary-color', primaryColor);
            }
            if (accentColor) {
                document.documentElement.style.setProperty('--accent-color', accentColor);
            }
            if (fontSize) {
                document.body.classList.remove('font-small', 'font-medium', 'font-large');
                document.body.classList.add('font-' + fontSize);
            }
        }

        // Initialize auto backup check on page load
        function initializeBackupSystem() {
            // Check for auto backup on load
            checkAutoBackup();
            
            // Set interval to check backup every hour
            setInterval(checkAutoBackup, 60 * 60 * 1000);
        }

        // Form validation functions
        function validateEmail(email) {
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return regex.test(email);
        }

        function validatePhone(phone) {
            const regex = /^[\+]?[\d\s\-\(\)]{8,}$/;
            return regex.test(phone);
        }

        function addValidationFeedback(element, isValid, message = '') {
            const formGroup = element.closest('.form-group');
            formGroup.classList.remove('success', 'error');
            
            // Remove existing feedback
            const existing = formGroup.querySelector('.validation-feedback');
            if (existing) existing.remove();
            
            if (isValid) {
                formGroup.classList.add('success');
            } else {
                formGroup.classList.add('error');
                if (message) {
                    const feedback = document.createElement('div');
                    feedback.className = 'validation-feedback';
                    feedback.textContent = message;
                    formGroup.appendChild(feedback);
                }
            }
        }

        // Enhanced profile save with validation
        function saveProfileWithValidation() {
            const firstName = document.getElementById('userFirstName').value.trim();
            const lastName = document.getElementById('userLastName').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            const phone = document.getElementById('userPhone').value.trim();
            
            let isValid = true;
            
            // Validate required fields
            if (!firstName) {
                addValidationFeedback(document.getElementById('userFirstName'), false, '–û–≤–æ–≥ –æ—Ä—É—É–ª–∞—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π');
                isValid = false;
            } else {
                addValidationFeedback(document.getElementById('userFirstName'), true);
            }
            
            if (!lastName) {
                addValidationFeedback(document.getElementById('userLastName'), false, '–ù—ç—Ä –æ—Ä—É—É–ª–∞—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π');
                isValid = false;
            } else {
                addValidationFeedback(document.getElementById('userLastName'), true);
            }
            
            if (!email) {
                addValidationFeedback(document.getElementById('userEmail'), false, '–ò-–º—ç–π–ª —Ö–∞—è–≥ –æ—Ä—É—É–ª–∞—Ö —à–∞–∞—Ä–¥–ª–∞–≥–∞—Ç–∞–π');
                isValid = false;
            } else if (!validateEmail(email)) {
                addValidationFeedback(document.getElementById('userEmail'), false, '–ò-–º—ç–π–ª —Ö–∞—è–≥–∏–π–Ω —Ñ–æ—Ä–º–∞—Ç –±—É—Ä—É—É –±–∞–π–Ω–∞');
                isValid = false;
            } else {
                addValidationFeedback(document.getElementById('userEmail'), true);
            }
            
            if (phone && !validatePhone(phone)) {
                addValidationFeedback(document.getElementById('userPhone'), false, '–£—Ç–∞—Å–Ω—ã –¥—É–≥–∞–∞—Ä—ã–Ω —Ñ–æ—Ä–º–∞—Ç –±—É—Ä—É—É –±–∞–π–Ω–∞');
                isValid = false;
            } else if (phone) {
                addValidationFeedback(document.getElementById('userPhone'), true);
            }
            
            if (isValid) {
                saveProfile();
            } else {
                showNotification('‚ö†Ô∏è –§–æ—Ä–º –¥–∞—Ö—å –∞–ª–¥–∞–∞–Ω—É—É–¥—ã–≥ –∑–∞—Å–∞–∞—Ä–∞–π!', 'error');
            }
        }

        // Add loading states to buttons
        function addLoadingState(button, text = '–•–∞–¥–≥–∞–ª–∂ –±–∞–π–Ω–∞...') {
            button.disabled = true;
            button.classList.add('loading');
            button.textContent = text;
        }

        function removeLoadingState(button, originalText) {
            button.disabled = false;
            button.classList.remove('loading');
            button.textContent = originalText;
        }

        // Enhanced save functions with loading states
        function saveThemeWithLoading() {
            const button = event.target;
            const originalText = button.textContent;
            addLoadingState(button);
            
            setTimeout(() => {
                saveTheme();
                removeLoadingState(button, originalText);
            }, 1000);
        }

        function saveProfileWithLoading() {
            const button = event.target;
            const originalText = button.textContent;
            addLoadingState(button, 'üíæ –•–∞–¥–≥–∞–ª–∂ –±–∞–π–Ω–∞...');
            
            setTimeout(() => {
                saveProfileWithValidation();
                removeLoadingState(button, originalText);
            }, 1000);
        }

        // Show progress dashboard
        function showProgress() {
            const dashboard = document.getElementById('progressDashboard');
            const isVisible = dashboard.style.display !== 'none';
            
            if (isVisible) {
                dashboard.style.display = 'none';
            } else {
                dashboard.style.display = 'block';
                calculateProgress();
                showNotification('üìä –ê—Ö–∏—Ü –¥—ç–≤—à–ª–∏–π–Ω –º—ç–¥—ç—ç–ª—ç–ª –∞—á–∞–∞–ª–∞–≥–¥–ª–∞–∞', 'success');
            }
        }

        // Calculate and update progress
        function calculateProgress() {
            const notes = JSON.parse(localStorage.getItem('studyNotes') || '[]');
            const tasks = JSON.parse(localStorage.getItem('dailyTasks') || '[]');
            const goals = JSON.parse(localStorage.getItem('studyGoals') || '[]');
            
            // Calculate overall progress
            const totalItems = notes.length + tasks.length + goals.length;
            const completedTasks = tasks.filter(task => task.completed).length;
            const completedGoals = goals.filter(goal => goal.progress >= 100).length;
            const overallProgress = totalItems > 0 ? Math.round(((completedTasks + completedGoals) / totalItems) * 100) : 0;
            
            // Update overall progress
            document.getElementById('overallProgressPercent').textContent = overallProgress + '%';
            document.getElementById('totalPointsEarned').textContent = (completedTasks * 10 + completedGoals * 50 + notes.length * 5);
            
            // Calculate streak
            const streak = calculateStudyStreak(tasks, goals, notes);
            document.getElementById('currentStreak').textContent = streak;
            document.getElementById('totalActiveDays').textContent = calculateActiveDays(tasks, goals, notes);
            
            // Update notes progress
            updateNotesProgress(notes);
            
            // Update tasks progress
            updateTasksProgress(tasks);
            
            // Update goals progress
            updateGoalsProgress(goals);
            
            // Update study time
            updateStudyTimeProgress(tasks);
            
            // Update weekly activity
            updateWeeklyActivity(tasks, goals, notes);
            
            // Update achievements
            updateAchievements(notes, tasks, goals);
            
            // Update insights
            updateStudyInsights(tasks, goals, notes);
        }

        // Calculate study streak
        function calculateStudyStreak(tasks, goals, notes) {
            const today = new Date();
            let streak = 0;
            let currentDate = new Date(today);
            
            while (true) {
                const dateStr = currentDate.toDateString();
                const hasActivity = 
                    tasks.some(task => task.completed && new Date(task.completedAt || task.createdAt).toDateString() === dateStr) ||
                    goals.some(goal => new Date(goal.createdAt).toDateString() === dateStr) ||
                    notes.some(note => new Date(note.createdAt).toDateString() === dateStr);
                
                if (hasActivity) {
                    streak++;
                    currentDate.setDate(currentDate.getDate() - 1);
                } else {
                    break;
                }
            }
            
            return streak;
        }

        // Calculate total active days
        function calculateActiveDays(tasks, goals, notes) {
            const activeDates = new Set();
            
            tasks.forEach(task => {
                if (task.completed) {
                    activeDates.add(new Date(task.completedAt || task.createdAt).toDateString());
                }
            });
            
            goals.forEach(goal => {
                activeDates.add(new Date(goal.createdAt).toDateString());
            });
            
            notes.forEach(note => {
                activeDates.add(new Date(note.createdAt).toDateString());
            });
            
            return activeDates.size;
        }

        // Update notes progress
        function updateNotesProgress(notes) {
            const totalNotes = notes.length;
            const thisMonth = notes.filter(note => {
                const noteDate = new Date(note.createdAt);
                const now = new Date();
                return noteDate.getMonth() === now.getMonth() && noteDate.getFullYear() === now.getFullYear();
            }).length;
            
            const thisWeek = notes.filter(note => {
                const noteDate = new Date(note.createdAt);
                const now = new Date();
                const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                return noteDate >= weekAgo;
            }).length;
            
            document.getElementById('notesBadge').textContent = totalNotes;
            document.getElementById('totalNotesCount').textContent = totalNotes;
            document.getElementById('notesThisMonth').textContent = thisMonth;
            document.getElementById('notesThisWeek').textContent = thisWeek;
            
            const progressPercent = Math.min((totalNotes / 50) * 100, 100); // Target: 50 notes
            document.getElementById('notesProgressFill').style.width = progressPercent + '%';
        }

        // Update tasks progress
        function updateTasksProgress(tasks) {
            const completedTasks = tasks.filter(task => task.completed).length;
            const totalTasks = tasks.length;
            const thisMonth = tasks.filter(task => {
                if (!task.completed) return false;
                const taskDate = new Date(task.completedAt || task.createdAt);
                const now = new Date();
                return taskDate.getMonth() === now.getMonth() && taskDate.getFullYear() === now.getFullYear();
            }).length;
            
            const thisWeek = tasks.filter(task => {
                if (!task.completed) return false;
                const taskDate = new Date(task.completedAt || task.createdAt);
                const now = new Date();
                const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                return taskDate >= weekAgo;
            }).length;
            
            document.getElementById('tasksBadge').textContent = completedTasks;
            document.getElementById('completedTasksCount').textContent = completedTasks;
            document.getElementById('tasksThisMonth').textContent = thisMonth;
            document.getElementById('tasksThisWeek').textContent = thisWeek;
            
            const progressPercent = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;
            document.getElementById('tasksProgressFill').style.width = progressPercent + '%';
        }

        // Update goals progress
        function updateGoalsProgress(goals) {
            const completedGoals = goals.filter(goal => goal.progress >= 100).length;
            const activeGoals = goals.filter(goal => goal.progress < 100).length;
            const totalProgress = goals.length > 0 ? goals.reduce((sum, goal) => sum + goal.progress, 0) / goals.length : 0;
            
            document.getElementById('goalsBadge').textContent = completedGoals;
            document.getElementById('completedGoalsCount').textContent = completedGoals;
            document.getElementById('activeGoalsCount').textContent = activeGoals;
            document.getElementById('averageGoalProgress').textContent = Math.round(totalProgress) + '%';
            
            const progressPercent = goals.length > 0 ? (completedGoals / goals.length) * 100 : 0;
            document.getElementById('goalsProgressFill').style.width = progressPercent + '%';
        }

        // Update study time progress
        function updateStudyTimeProgress(tasks) {
            const totalMinutes = tasks.reduce((sum, task) => {
                return sum + (task.estimatedTime || 30); // Default 30 minutes per task
            }, 0);
            
            const todayMinutes = tasks.filter(task => {
                const taskDate = new Date(task.createdAt);
                const today = new Date();
                return taskDate.toDateString() === today.toDateString();
            }).reduce((sum, task) => sum + (task.estimatedTime || 30), 0);
            
            const monthMinutes = tasks.filter(task => {
                const taskDate = new Date(task.createdAt);
                const now = new Date();
                return taskDate.getMonth() === now.getMonth() && taskDate.getFullYear() === now.getFullYear();
            }).reduce((sum, task) => sum + (task.estimatedTime || 30), 0);
            
            const totalHours = Math.round(totalMinutes / 60);
            const todayHours = Math.round(todayMinutes / 60);
            const monthHours = Math.round(monthMinutes / 60);
            
            document.getElementById('studyTimeBadge').textContent = totalHours + 'h';
            document.getElementById('totalStudyTime').textContent = totalHours + ' —Ü–∞–≥';
            document.getElementById('studyTimeToday').textContent = todayHours + 'h';
            document.getElementById('studyTimeThisMonth').textContent = monthHours + 'h';
            
            const progressPercent = Math.min((totalHours / 200) * 100, 100); // Target: 200 hours
            document.getElementById('studyTimeProgressFill').style.width = progressPercent + '%';
        }

        // Update weekly activity chart
        function updateWeeklyActivity(tasks, goals, notes) {
            const weekData = [0, 0, 0, 0, 0, 0, 0]; // Sunday to Saturday
            const today = new Date();
            const weekStart = new Date(today);
            weekStart.setDate(today.getDate() - today.getDay());
            
            // Count completed tasks for each day
            tasks.forEach(task => {
                if (task.completed) {
                    const taskDate = new Date(task.completedAt || task.createdAt);
                    const dayIndex = taskDate.getDay();
                    const weekStartStr = weekStart.toDateString();
                    const taskWeekStart = new Date(taskDate);
                    taskWeekStart.setDate(taskDate.getDate() - taskDate.getDay());
                    
                    if (taskWeekStart.toDateString() === weekStartStr) {
                        weekData[dayIndex]++;
                    }
                }
            });
            
            const maxActivity = Math.max(...weekData, 1);
            
            weekData.forEach((activity, index) => {
                const dayElement = document.querySelector(`.activity-day[data-day="${index}"]`);
                const bar = dayElement.querySelector('.activity-bar');
                const value = dayElement.querySelector('.activity-value');
                
                const heightPercent = (activity / maxActivity) * 100;
                bar.style.height = heightPercent + '%';
                value.textContent = activity;
            });
        }

        // Update achievements
        function updateAchievements(notes, tasks, goals) {
            const achievementsList = document.getElementById('achievementsList');
            const achievements = [];
            
            // Check for various achievements
            if (notes.length >= 10) {
                achievements.push({
                    icon: 'ÔøΩ',
                    title: '–¢—ç–º–¥—ç–≥–ª—ç–≥—á',
                    desc: '10-–∞–∞—Å –¥—ç—ç—à —Ç—ç–º–¥—ç–≥–ª—ç–ª –±–∏—á—Å—ç–Ω'
                });
            }
            
            if (tasks.filter(t => t.completed).length >= 20) {
                achievements.push({
                    icon: '‚úÖ',
                    title: '–ê–∂–∏–ª –¥—É—É—Å–≥–∞–≥—á',
                    desc: '20-–∏–æ—Å –¥—ç—ç—à –¥–∞–∞–ª–≥–∞–≤–∞—Ä –¥—É—É—Å—Å–∞–Ω'
                });
            }
            
            if (goals.filter(g => g.progress >= 100).length >= 5) {
                achievements.push({
                    icon: 'üéØ',
                    title: '–ó–æ—Ä–∏–ª–≥–æ –±–∏–µ–ª“Ø“Ø–ª—ç–≥—á',
                    desc: '5-–∞–∞—Å –¥—ç—ç—à –∑–æ—Ä–∏–ª–≥–æ –±–∏–µ–ª“Ø“Ø–ª—Å—ç–Ω'
                });
            }
            
            const streak = calculateStudyStreak(tasks, goals, notes);
            if (streak >= 7) {
                achievements.push({
                    icon: 'üî•',
                    title: '–¢–æ–≥—Ç–≤–æ—Ä—Ç–æ–π',
                    desc: `${streak} ”©–¥”©—Ä —Ç–∞—Å—Ä–∞–ª—Ç–≥“Ø–π –∏–¥—ç–≤—Ö—Ç—ç–π`
                });
            }
            
            if (achievements.length === 0) {
                achievementsList.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">–ê–º–∂–∏–ª—Ç –æ–ª–∂ –∞–≤–∞—Ö—ã–Ω —Ç—É–ª–¥ “Ø—Ä–≥—ç–ª–∂–ª“Ø“Ø–ª—ç–Ω –∞–∂–∏–ª–ª–∞–∞—Ä–∞–π! üí™</div>';
            } else {
                achievementsList.innerHTML = achievements.map(achievement => `
                    <div class="achievement-item">
                        <span class="achievement-icon">${achievement.icon}</span>
                        <div class="achievement-title">${achievement.title}</div>
                        <div class="achievement-desc">${achievement.desc}</div>
                    </div>
                `).join('');
            }
        }

        // Update study insights
        function updateStudyInsights(tasks, goals, notes) {
            // Most active day
            const dayNames = ['–ù—è–º', '–î–∞–≤', '–ú—è–≥', '–õ—Ö–∞', '–ü“Ø—Ä', '–ë–∞–∞', '–ë—è–º'];
            const dayActivity = [0, 0, 0, 0, 0, 0, 0];
            
            tasks.forEach(task => {
                if (task.completed) {
                    const dayIndex = new Date(task.completedAt || task.createdAt).getDay();
                    dayActivity[dayIndex]++;
                }
            });
            
            const mostActiveDayIndex = dayActivity.indexOf(Math.max(...dayActivity));
            document.getElementById('mostActiveDay').textContent = dayNames[mostActiveDayIndex] + ' –≥–∞—Ä–∞–≥';
            
            // Average daily progress
            const totalDays = calculateActiveDays(tasks, goals, notes);
            const completedTasks = tasks.filter(t => t.completed).length;
            const avgDaily = totalDays > 0 ? Math.round(completedTasks / totalDays) : 0;
            document.getElementById('averageDailyProgress').textContent = avgDaily + ' –¥–∞–∞–ª–≥–∞–≤–∞—Ä/”©–¥”©—Ä';
            
            // Most used feature
            const notesCount = notes.length;
            const tasksCount = tasks.length;
            const goalsCount = goals.length;
            
            let mostUsed = '–¢—ç–º–¥—ç–≥–ª—ç–ª';
            if (tasksCount >= notesCount && tasksCount >= goalsCount) {
                mostUsed = '–î–∞–∞–ª–≥–∞–≤–∞—Ä';
            } else if (goalsCount >= notesCount && goalsCount >= tasksCount) {
                mostUsed = '–ó–æ—Ä–∏–ª–≥–æ';
            }
            
            document.getElementById('mostUsedFeature').textContent = mostUsed;
        }

        // Refresh progress
        function refreshProgress() {
            calculateProgress();
            showNotification('üîÑ –ê—Ö–∏—Ü –¥—ç–≤—à–∏–ª —à–∏–Ω—ç—á–ª—ç–≥–¥–ª—ç—ç', 'success');
        }

        // Show notifications system
        function showNotifications() {
            const system = document.getElementById('notificationsSystem');
            const isVisible = system.style.display !== 'none';
            
            if (isVisible) {
                system.style.display = 'none';
            } else {
                system.style.display = 'block';
                loadActiveNotifications();
                showNotification('üîî –°–∞–Ω—É—É–ª–≥—ã–Ω —Å–∏—Å—Ç–µ–º –Ω—ç—ç–≥–¥–ª—ç—ç', 'success');
            }
        }

        // Load active notifications
        function loadActiveNotifications() {
            const notifications = JSON.parse(localStorage.getItem('activeNotifications') || '[]');
            const container = document.getElementById('activeNotificationsList');
            
            if (notifications.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">–ò–¥—ç–≤—Ö—Ç—ç–π —Å–∞–Ω—É—É–ª–≥–∞ –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞</div>';
                return;
            }

            container.innerHTML = notifications.map((notification, index) => `
                <div style="background: ${getNotificationColor(notification.type)}; padding: 15px; border-radius: 12px; margin-bottom: 10px; border-left: 4px solid ${getNotificationBorderColor(notification.type)};">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; margin-bottom: 5px; display: flex; align-items: center; gap: 8px;">
                                ${getNotificationIcon(notification.type)}
                                ${notification.title}
                            </div>
                            <div style="color: #666; margin-bottom: 8px;">${notification.message}</div>
                            <div style="font-size: 0.9rem; color: #888;">‚è∞ ${new Date(notification.time).toLocaleString('mn-MN')}</div>
                        </div>
                        <button onclick="removeNotification(${index})" style="background: #dc3545; color: white; border: none; border-radius: 6px; padding: 5px 10px; cursor: pointer;">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        // Get notification colors
        function getNotificationColor(type) {
            switch(type) {
                case 'task': return 'linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)';
                case 'study': return 'linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%)';
                case 'goal': return 'linear-gradient(135deg, #fff9c4 0%, #fff3cd 100%)';
                case 'personal': return 'linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%)';
                default: return '#f8f9fa';
            }
        }

        function getNotificationBorderColor(type) {
            switch(type) {
                case 'task': return '#007bff';
                case 'study': return '#6f42c1';
                case 'goal': return '#ffc107';
                case 'personal': return '#28a745';
                default: return '#6c757d';
            }
        }

        function getNotificationIcon(type) {
            switch(type) {
                case 'task': return 'üìã';
                case 'study': return 'üìö';
                case 'goal': return 'üéØ';
                case 'personal': return 'üë§';
                default: return 'üîî';
            }
        }

        // Create quick reminder
        function createQuickReminder() {
            const text = document.getElementById('quickReminderText').value;
            const time = document.getElementById('quickReminderTime').value;
            const type = document.getElementById('quickReminderType').value;

            if (!text || !time) {
                showNotification('‚ùå –¢–µ–∫—Å—Ç –±–æ–ª–æ–Ω –æ–≥–Ω–æ–æ –æ—Ä—É—É–ª–Ω–∞ —É—É', 'error');
                return;
            }

            const notifications = JSON.parse(localStorage.getItem('activeNotifications') || '[]');
            const newNotification = {
                id: Date.now(),
                title: '–®—É—É—Ä—Ö–∞–π —Å–∞–Ω—É—É–ª–≥–∞',
                message: text,
                time: time,
                type: type,
                created: new Date().toISOString()
            };

            notifications.push(newNotification);
            localStorage.setItem('activeNotifications', JSON.stringify(notifications));

            // Clear form
            document.getElementById('quickReminderText').value = '';
            document.getElementById('quickReminderTime').value = '';

            loadActiveNotifications();
            showNotification('‚úÖ –°–∞–Ω—É—É–ª–≥–∞ “Ø“Ø—Å–≥—ç–≥–¥–ª—ç—ç', 'success');
        }

        // Remove notification
        function removeNotification(index) {
            const notifications = JSON.parse(localStorage.getItem('activeNotifications') || '[]');
            notifications.splice(index, 1);
            localStorage.setItem('activeNotifications', JSON.stringify(notifications));
            loadActiveNotifications();
            showNotification('üóëÔ∏è –°–∞–Ω—É—É–ª–≥–∞ —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞', 'info');
        }

        // Clear all notifications
        function clearAllNotifications() {
            if (confirm('–ë“Ø—Ö —Å–∞–Ω—É—É–ª–≥—ã–≥ —É—Å—Ç–≥–∞—Ö —É—É?')) {
                localStorage.removeItem('activeNotifications');
                loadActiveNotifications();
                showNotification('üóëÔ∏è –ë“Ø—Ö —Å–∞–Ω—É—É–ª–≥–∞ —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞', 'info');
            }
        }

        // Show collaboration system
        function showCollaboration() {
            const system = document.getElementById('collaborationSystem');
            const isVisible = system.style.display !== 'none';
            
            if (isVisible) {
                system.style.display = 'none';
            } else {
                system.style.display = 'block';
                loadStudyGroups();
                loadCollaborationActivity();
                loadShareableNotes();
                showNotification('üë• –•–∞–º—Ç—ã–Ω –∞–∂–∏–ª–ª–∞–≥–∞–∞ –Ω—ç—ç–≥–¥–ª—ç—ç', 'success');
            }
        }

        // Load shareable notes
        function loadShareableNotes() {
            const notes = JSON.parse(localStorage.getItem('studyNotes') || '[]');
            const select = document.getElementById('shareNoteSelect');
            
            select.innerHTML = '<option value="">–•—É–≤–∞–∞–ª—Ü–∞—Ö —Ç—ç–º–¥—ç–≥–ª—ç–ª —Å–æ–Ω–≥–æ—Ö...</option>';
            notes.forEach((note, index) => {
                select.innerHTML += `<option value="${index}">${note.title || '–¢—ç–º–¥—ç–≥–ª—ç–ª ' + (index + 1)}</option>`;
            });
        }

        // Share note
        function shareNote() {
            const noteIndex = document.getElementById('shareNoteSelect').value;
            const email = document.getElementById('shareEmail').value;

            if (!noteIndex || !email) {
                showNotification('‚ùå –¢—ç–º–¥—ç–≥–ª—ç–ª –±–æ–ª–æ–Ω –∏–º—ç–π–ª —Å–æ–Ω–≥–æ–Ω–æ —É—É', 'error');
                return;
            }

            const notes = JSON.parse(localStorage.getItem('studyNotes') || '[]');
            const note = notes[noteIndex];

            // Simulate sharing (in real app, this would send to server)
            const shareData = {
                note: note,
                sharedTo: email,
                sharedAt: new Date().toISOString(),
                sharedBy: '–¢–∞'
            };

            // Save share history
            const shareHistory = JSON.parse(localStorage.getItem('shareHistory') || '[]');
            shareHistory.push(shareData);
            localStorage.setItem('shareHistory', JSON.stringify(shareHistory));

            // Clear form
            document.getElementById('shareEmail').value = '';
            document.getElementById('shareNoteSelect').value = '';

            showNotification('üì§ –¢—ç–º–¥—ç–≥–ª—ç–ª –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö—É–≤–∞–∞–ª—Ü–∞–≥–¥–ª–∞–∞', 'success');
            loadCollaborationActivity();
        }

        // Load study groups
        function loadStudyGroups() {
            const groups = JSON.parse(localStorage.getItem('studyGroups') || '[]');
            const container = document.getElementById('studyGroupsList');

            if (groups.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666; padding: 15px;">–°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω –±“Ø–ª—ç–≥ –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞</div>';
                return;
            }

            container.innerHTML = groups.map((group, index) => `
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px; border: 1px solid #ddd;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>${group.name}</strong>
                            <div style="font-size: 0.9rem; color: #666;">${group.members || 1} –≥–∏—à“Ø“Ø–Ω ‚Ä¢ ${new Date(group.created).toLocaleDateString('mn-MN')}</div>
                        </div>
                        <button onclick="leaveGroup(${index})" style="padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 6px; cursor: pointer;">–ì–∞—Ä–∞—Ö</button>
                    </div>
                </div>
            `).join('');
        }

        // Create study group
        function createStudyGroup() {
            const name = document.getElementById('newGroupName').value;

            if (!name) {
                showNotification('‚ùå –ë“Ø–ª–≥–∏–π–Ω –Ω—ç—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É', 'error');
                return;
            }

            const groups = JSON.parse(localStorage.getItem('studyGroups') || '[]');
            const newGroup = {
                id: Date.now(),
                name: name,
                created: new Date().toISOString(),
                members: 1,
                creator: '–¢–∞'
            };

            groups.push(newGroup);
            localStorage.setItem('studyGroups', JSON.stringify(groups));

            document.getElementById('newGroupName').value = '';
            loadStudyGroups();
            showNotification('‚úÖ –°—É—Ä–∞–ª—Ü–∞—Ö—É–π–Ω –±“Ø–ª—ç–≥ “Ø“Ø—Å–≥—ç–≥–¥–ª—ç—ç', 'success');
        }

        // Leave group
        function leaveGroup(index) {
            if (confirm('–≠–Ω—ç –±“Ø–ª–≥—ç—ç—Å –≥–∞—Ä–∞—Ö —É—É?')) {
                const groups = JSON.parse(localStorage.getItem('studyGroups') || '[]');
                groups.splice(index, 1);
                localStorage.setItem('studyGroups', JSON.stringify(groups));
                loadStudyGroups();
                showNotification('üëã –ë“Ø–ª–≥—ç—ç—Å –≥–∞—Ä–ª–∞–∞', 'info');
            }
        }

        // Load collaboration activity
        function loadCollaborationActivity() {
            const shareHistory = JSON.parse(localStorage.getItem('shareHistory') || '[]');
            const container = document.getElementById('collaborationActivity');

            if (shareHistory.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">–•–∞–º—Ç—ã–Ω –∞–∂–∏–ª–ª–∞–≥–∞–∞–Ω—ã —Ç“Ø“Ø—Ö –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞</div>';
                return;
            }

            container.innerHTML = shareHistory.slice(-10).reverse().map(activity => `
                <div style="padding: 10px; border-bottom: 1px solid #eee;">
                    <div style="font-weight: 600;">üì§ –¢—ç–º–¥—ç–≥–ª—ç–ª —Ö—É–≤–∞–∞–ª—Ü—Å–∞–Ω</div>
                    <div style="color: #666; font-size: 0.9rem;">
                        "${activity.note.title || '–¢—ç–º–¥—ç–≥–ª—ç–ª'}" ‚Üí ${activity.sharedTo}
                    </div>
                    <div style="color: #888; font-size: 0.8rem;">${new Date(activity.sharedAt).toLocaleString('mn-MN')}</div>
                </div>
            `).join('');
        }

        // Refresh collaboration
        function refreshCollaboration() {
            loadStudyGroups();
            loadCollaborationActivity();
            loadShareableNotes();
            showNotification('üîÑ –•–∞–º—Ç—ã–Ω –∞–∂–∏–ª–ª–∞–≥–∞–∞ —à–∏–Ω—ç—á–ª—ç–≥–¥–ª—ç—ç', 'success');
        }

        // Show advanced analytics
        function showAdvancedAnalytics() {
            const system = document.getElementById('advancedAnalytics');
            const isVisible = system.style.display !== 'none';
            
            if (isVisible) {
                system.style.display = 'none';
            } else {
                system.style.display = 'block';
                loadAdvancedAnalytics();
                showNotification('üìà –î—ç–≤—à–∏–ª—Ç—ç—Ç –¥“Ø–Ω —à–∏–Ω–∂–∏–ª–≥—ç—ç –Ω—ç—ç–≥–¥–ª—ç—ç', 'success');
            }
        }

        // Load advanced analytics
        function loadAdvancedAnalytics() {
            loadMonthlyChart();
            loadSubjectPerformance();
            loadStudyPatterns();
            loadDetailedReports();
        }

        // Load monthly chart
        function loadMonthlyChart() {
            const container = document.getElementById('monthlyChart');
            const tasks = JSON.parse(localStorage.getItem('dailyTasks') || '[]');
            
            // Simple monthly progress visualization
            const monthData = tasks.filter(task => {
                const taskDate = new Date(task.createdAt);
                const now = new Date();
                return taskDate.getMonth() === now.getMonth() && taskDate.getFullYear() === now.getFullYear();
            });

            container.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">${monthData.filter(t => t.completed).length}</div>
                    <div>–≠–Ω—ç —Å–∞—Ä–¥ –¥—É—É—Å—Å–∞–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä</div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">–ù–∏–π—Ç ${monthData.length}-—Å</div>
                </div>
            `;
        }

        // Load subject performance
        function loadSubjectPerformance() {
            const container = document.getElementById('subjectPerformance');
            const notes = JSON.parse(localStorage.getItem('studyNotes') || '[]');
            
            const subjects = {};
            notes.forEach(note => {
                const category = note.category || '–ë—É—Å–∞–¥';
                if (!subjects[category]) subjects[category] = 0;
                subjects[category]++;
            });

            container.innerHTML = Object.entries(subjects).map(([subject, count]) => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #eee;">
                    <span>${subject}</span>
                    <span style="background: #007bff; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.8rem;">${count}</span>
                </div>
            `).join('');
        }

        // Load study patterns
        function loadStudyPatterns() {
            const container = document.getElementById('studyPatterns');
            const tasks = JSON.parse(localStorage.getItem('dailyTasks') || '[]');
            
            const hourlyData = new Array(24).fill(0);
            tasks.forEach(task => {
                if (task.completed) {
                    const hour = new Date(task.completedAt || task.createdAt).getHours();
                    hourlyData[hour]++;
                }
            });

            const peakHour = hourlyData.indexOf(Math.max(...hourlyData));
            
            container.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 10px;">‚è∞</div>
                    <div style="font-weight: 600;">–•–∞–º–≥–∏–π–Ω –∏–¥—ç–≤—Ö—Ç—ç–π —Ü–∞–≥</div>
                    <div style="font-size: 1.5rem; color: #007bff;">${peakHour}:00</div>
                    <div style="font-size: 0.9rem; opacity: 0.8; margin-top: 10px;">
                        –≠–Ω—ç —Ü–∞–≥—Ç ${hourlyData[peakHour]} –∞–∂–∏–ª –¥—É—É—Å—Å–∞–Ω
                    </div>
                </div>
            `;
        }

        // Load detailed reports
        function loadDetailedReports() {
            const container = document.getElementById('detailedReports');
            const notes = JSON.parse(localStorage.getItem('studyNotes') || '[]');
            const tasks = JSON.parse(localStorage.getItem('dailyTasks') || '[]');
            const goals = JSON.parse(localStorage.getItem('studyGoals') || '[]');

            const totalItems = notes.length + tasks.length + goals.length;
            const completedTasks = tasks.filter(t => t.completed).length;
            const completedGoals = goals.filter(g => g.progress >= 100).length;

            container.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.5rem; color: #007bff; margin-bottom: 8px;">üìä</div>
                        <div style="font-weight: 600;">–ù–∏–π—Ç —ç–ª–µ–º–µ–Ω—Ç</div>
                        <div style="font-size: 1.5rem; color: #333;">${totalItems}</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.5rem; color: #28a745; margin-bottom: 8px;">‚úÖ</div>
                        <div style="font-weight: 600;">–î—É—É—Å—Å–∞–Ω –∞–∂–∏–ª</div>
                        <div style="font-size: 1.5rem; color: #333;">${completedTasks}</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.5rem; color: #ffc107; margin-bottom: 8px;">üéØ</div>
                        <div style="font-weight: 600;">–ë–∏–µ–ª—Å—ç–Ω –∑–æ—Ä–∏–ª–≥–æ</div>
                        <div style="font-size: 1.5rem; color: #333;">${completedGoals}</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 1.5rem; color: #6f42c1; margin-bottom: 8px;">üìà</div>
                        <div style="font-weight: 600;">–ï—Ä”©–Ω—Ö–∏–π “Ø–Ω—ç–ª–≥—ç—ç</div>
                        <div style="font-size: 1.5rem; color: #333;">${totalItems > 0 ? Math.round(((completedTasks + completedGoals) / totalItems) * 100) : 0}%</div>
                    </div>
                </div>
            `;
        }

        // Generate report
        function generateReport() {
            const report = {
                generated: new Date().toISOString(),
                notes: JSON.parse(localStorage.getItem('studyNotes') || '[]').length,
                tasks: JSON.parse(localStorage.getItem('dailyTasks') || '[]').length,
                goals: JSON.parse(localStorage.getItem('studyGoals') || '[]').length,
                completedTasks: JSON.parse(localStorage.getItem('dailyTasks') || '[]').filter(t => t.completed).length,
                completedGoals: JSON.parse(localStorage.getItem('studyGoals') || '[]').filter(g => g.progress >= 100).length
            };

            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `study-hub-report-${new Date().getDate()}-${new Date().getMonth() + 1}-${new Date().getFullYear()}.json`;
            a.click();
            URL.revokeObjectURL(url);

            showNotification('üìä –¢–∞–π–ª–∞–Ω —Ç–∞—Ç–∞–∂ –∞–≤–ª–∞–∞', 'success');
        }

        // Show more themes
        function showMoreThemes() {
            const system = document.getElementById('moreThemes');
            const isVisible = system.style.display !== 'none';
            
            if (isVisible) {
                system.style.display = 'none';
            } else {
                system.style.display = 'block';
                showNotification('üé® –ò–ª“Ø“Ø –∑–∞–≥–≤–∞—Ä –Ω—ç—ç–≥–¥–ª—ç—ç', 'success');
            }
        }

        // Apply seasonal/extended themes
        function applyTheme(themeName) {
            const themeColors = {
                spring: {
                    primary: '#a8e6cf',
                    secondary: '#dcedc1',
                    background: 'linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%)'
                },
                summer: {
                    primary: '#ffd89b',
                    secondary: '#19547b',
                    background: 'linear-gradient(135deg, #ffd89b 0%, #19547b 100%)'
                },
                autumn: {
                    primary: '#ff9966',
                    secondary: '#ff5e62',
                    background: 'linear-gradient(135deg, #ff9966 0%, #ff5e62 100%)'
                },
                winter: {
                    primary: '#667eea',
                    secondary: '#764ba2',
                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
                },
                corporate: {
                    primary: '#434343',
                    secondary: '#000000',
                    background: 'linear-gradient(135deg, #434343 0%, #000000 100%)'
                },
                ocean: {
                    primary: '#00c6ff',
                    secondary: '#0072ff',
                    background: 'linear-gradient(135deg, #00c6ff 0%, #0072ff 100%)'
                }
            };

            const theme = themeColors[themeName];
            if (theme) {
                document.body.style.background = theme.background;
                document.documentElement.style.setProperty('--primary-color', theme.primary);
                document.documentElement.style.setProperty('--secondary-color', theme.secondary);
                
                localStorage.setItem('selectedTheme', themeName);
                showNotification(`üé® ${themeName} –∑–∞–≥–≤–∞—Ä –∏–¥—ç–≤—Ö–∂–ª—ç—ç`, 'success');
            }
        }

        // Apply custom theme
        function applyCustomTheme() {
            const primary = document.getElementById('customPrimaryColor').value;
            const secondary = document.getElementById('customSecondaryColor').value;
            const accent = document.getElementById('customAccentColor').value;

            document.body.style.background = `linear-gradient(135deg, ${primary} 0%, ${secondary} 100%)`;
            document.documentElement.style.setProperty('--primary-color', primary);
            document.documentElement.style.setProperty('--secondary-color', secondary);
            document.documentElement.style.setProperty('--accent-color', accent);

            const customTheme = { primary, secondary, accent };
            localStorage.setItem('customTheme', JSON.stringify(customTheme));
            localStorage.setItem('selectedTheme', 'custom');
            
            showNotification('‚ú® ”®”©—Ä–∏–π–Ω –∑–∞–≥–≤–∞—Ä –∏–¥—ç–≤—Ö–∂–ª—ç—ç', 'success');
        }

        // Reset to default theme
        function resetToDefaultTheme() {
            document.body.className = 'education-theme';
            document.documentElement.style.setProperty('--primary-color', '#007bff');
            document.documentElement.style.setProperty('--secondary-color', '#0056b3');
            document.documentElement.style.setProperty('--accent-color', '#17a2b8');
            
            localStorage.removeItem('selectedTheme');
            localStorage.removeItem('customTheme');
            
            showNotification('üîÑ –ê–Ω—Ö–Ω—ã –∑–∞–≥–≤–∞—Ä—Ç —à–∏–ª–∂–ª—ç—ç', 'success');
        }

        // Task Management Functions
        let weeklyTasks = JSON.parse(localStorage.getItem('weeklyTasks') || '{}');

        function showWeeklyPlan() {
            document.getElementById('weeklyPlanDetail').style.display = 'block';
            loadTasks();
            updateStats();
            showNotification('üìÖ 7 —Ö–æ–Ω–æ–≥–∏–π–Ω —Ç”©–ª”©–≤–ª”©–≥”©”© –Ω—ç—ç–≥–¥–ª—ç—ç!', 'info');
        }

        function showDailyTasks() {
            document.getElementById('dailyTasksDetail').style.display = 'block';
            initializeDailyTasks();
            loadDailyTasks();
            updateDailyStats();
            showNotification('‚è∞ ”®–¥—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤—Ä—ã–Ω —Ö—ç—Å—ç–≥ –Ω—ç—ç–≥–¥–ª—ç—ç!', 'info');
        }

        // Daily Tasks Management Functions
        let dailyTasks = JSON.parse(localStorage.getItem('dailyTasks') || '[]');

        function initializeDailyTasks() {
            const today = new Date();
            const todayStr = today.toLocaleDateString('mn-MN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            const dayName = today.toLocaleDateString('mn-MN', { weekday: 'long' });
            
            document.getElementById('todayDate').textContent = todayStr;
            document.getElementById('todayDayName').textContent = dayName;
            
            // Clear old tasks (older than today)
            const todayKey = today.toDateString();
            dailyTasks = dailyTasks.filter(task => 
                new Date(task.date).toDateString() === todayKey
            );
            localStorage.setItem('dailyTasks', JSON.stringify(dailyTasks));
        }

        function handleQuickTaskEnter(event) {
            if (event.key === 'Enter') {
                addQuickTask();
            }
        }

        function addQuickTask() {
            const title = document.getElementById('quickTaskTitle').value.trim();
            const priority = document.getElementById('quickTaskPriority').value;
            const time = document.getElementById('quickTaskTime').value;

            if (!title) {
                showNotification('‚ö†Ô∏è –î–∞–∞–ª–≥–∞–≤—Ä—ã–Ω –Ω—ç—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É!', 'warning');
                return;
            }

            const timeCategory = getTimeCategory(time);
            const task = {
                id: Date.now(),
                title: title,
                priority: priority,
                time: time,
                timeCategory: timeCategory,
                completed: false,
                date: new Date().toDateString(),
                createdAt: new Date().toISOString()
            };

            dailyTasks.push(task);
            localStorage.setItem('dailyTasks', JSON.stringify(dailyTasks));

            // Clear inputs
            document.getElementById('quickTaskTitle').value = '';
            document.getElementById('quickTaskTime').value = '';

            loadDailyTasks();
            updateDailyStats();
            showNotification('‚úÖ ”®–¥—Ä–∏–π–Ω –¥–∞–∞–ª–≥–∞–≤–∞—Ä –Ω—ç–º—ç–≥–¥–ª—ç—ç!', 'success');
        }

        function getTimeCategory(time) {
            if (!time) return 'anytime';
            
            const hour = parseInt(time.split(':')[0]);
            if (hour >= 5 && hour < 12) return 'morning';
            if (hour >= 12 && hour < 17) return 'afternoon';
            if (hour >= 17 && hour < 22) return 'evening';
            return 'anytime';
        }

        function loadDailyTasks() {
            const categories = ['morning', 'afternoon', 'evening', 'anytime'];
            
            categories.forEach(category => {
                const tasksList = document.getElementById(category + '-tasks');
                tasksList.innerHTML = '';

                const categoryTasks = dailyTasks.filter(task => task.timeCategory === category);
                
                if (categoryTasks.length === 0) {
                    tasksList.innerHTML = '<div class="daily-task-empty">–î–∞–∞–ª–≥–∞–≤–∞—Ä –±–∞–π—Ö–≥“Ø–π</div>';
                } else {
                    categoryTasks.forEach(task => {
                        const taskElement = createDailyTaskElement(task);
                        tasksList.appendChild(taskElement);
                    });
                }

                // Update task count
                const countElement = document.getElementById(category + 'TaskCount');
                if (countElement) {
                    countElement.textContent = categoryTasks.length;
                }
            });
        }

        function createDailyTaskElement(task) {
            const taskDiv = document.createElement('div');
            const isOverdue = task.time && isTaskOverdue(task.time) && !task.completed;
            
            taskDiv.className = `daily-task-item ${task.priority}-priority ${task.completed ? 'completed' : ''} ${isOverdue ? 'overdue' : ''}`;
            
            taskDiv.innerHTML = `
                <div class="daily-task-title">${task.title}</div>
                ${task.time ? `<div class="daily-task-time">üïê ${task.time}</div>` : ''}
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span class="daily-task-priority ${task.priority}">${getPriorityText(task.priority)}</span>
                    ${isOverdue ? '<span style="color: #dc3545; font-size: 0.75rem; font-weight: 600;">‚è∞ –•–æ—Ü–æ—Ä—Å–æ–Ω</span>' : ''}
                </div>
                <div class="daily-task-actions">
                    ${!task.completed ? 
                        `<button class="daily-task-btn complete" onclick="completeDailyTask(${task.id})">‚úì –î—É—É—Å–≥–∞—Ö</button>` : 
                        `<button class="daily-task-btn complete" onclick="uncompleteDailyTask(${task.id})">‚Ü∫ –ë—É—Ü–∞–∞—Ö</button>`
                    }
                    <button class="daily-task-btn edit" onclick="editDailyTask(${task.id})">‚úèÔ∏è –ó–∞—Å–∞—Ö</button>
                    <button class="daily-task-btn delete" onclick="deleteDailyTask(${task.id})">üóëÔ∏è –£—Å—Ç–≥–∞—Ö</button>
                </div>
            `;

            return taskDiv;
        }

        function isTaskOverdue(taskTime) {
            const now = new Date();
            const today = now.toDateString();
            const currentTime = now.toTimeString().slice(0, 5);
            
            return currentTime > taskTime;
        }

        function completeDailyTask(taskId) {
            const task = dailyTasks.find(t => t.id === taskId);
            if (task) {
                task.completed = true;
                task.completedAt = new Date().toISOString();
                localStorage.setItem('dailyTasks', JSON.stringify(dailyTasks));
                loadDailyTasks();
                updateDailyStats();
                showNotification('‚úÖ –î–∞–∞–ª–≥–∞–≤–∞—Ä –¥—É—É—Å–ª–∞–∞!', 'success');
            }
        }

        function uncompleteDailyTask(taskId) {
            const task = dailyTasks.find(t => t.id === taskId);
            if (task) {
                task.completed = false;
                delete task.completedAt;
                localStorage.setItem('dailyTasks', JSON.stringify(dailyTasks));
                loadDailyTasks();
                updateDailyStats();
                showNotification('‚Ü∫ –î–∞–∞–ª–≥–∞–≤–∞—Ä –±—É—Ü–∞–∞–≥–¥–ª–∞–∞!', 'info');
            }
        }

        function editDailyTask(taskId) {
            const task = dailyTasks.find(t => t.id === taskId);
            if (task) {
                const newTitle = prompt('–®–∏–Ω—ç –Ω—ç—Ä:', task.title);
                if (newTitle && newTitle.trim()) {
                    task.title = newTitle.trim();
                    localStorage.setItem('dailyTasks', JSON.stringify(dailyTasks));
                    loadDailyTasks();
                    showNotification('‚úèÔ∏è –î–∞–∞–ª–≥–∞–≤–∞—Ä –∑–∞—Å–∞–≥–¥–ª–∞–∞!', 'success');
                }
            }
        }

        function deleteDailyTask(taskId) {
            if (confirm('–≠–Ω—ç –¥–∞–∞–ª–≥–∞–≤—Ä—ã–≥ —É—Å—Ç–≥–∞—Ö–¥–∞–∞ –∏—Ç–≥—ç–ª—Ç—ç–π –±–∞–π–Ω–∞ —É—É?')) {
                dailyTasks = dailyTasks.filter(t => t.id !== taskId);
                localStorage.setItem('dailyTasks', JSON.stringify(dailyTasks));
                loadDailyTasks();
                updateDailyStats();
                showNotification('üóëÔ∏è –î–∞–∞–ª–≥–∞–≤–∞—Ä —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞!', 'info');
            }
        }

        function updateDailyStats() {
            const completed = dailyTasks.filter(t => t.completed).length;
            const pending = dailyTasks.filter(t => !t.completed).length;
            const overdue = dailyTasks.filter(t => t.time && isTaskOverdue(t.time) && !t.completed).length;
            const total = dailyTasks.length;

            document.getElementById('completedDailyTasks').textContent = completed;
            document.getElementById('pendingDailyTasks').textContent = pending;
            document.getElementById('overdueDailyTasks').textContent = overdue;
            document.getElementById('totalDailyTasks').textContent = total;

            // Update progress bar
            const progressPercent = total > 0 ? Math.round((completed / total) * 100) : 0;
            document.getElementById('dailyProgressPercent').textContent = progressPercent + '%';
            document.getElementById('dailyProgressBar').style.width = progressPercent + '%';
        }

        function showGoals() {
            document.getElementById('goalsDetail').style.display = 'block';
            loadGoals();
            updateGoalsStats();
            showNotification('üéØ –ó–æ—Ä–∏–ª–≥—ã–Ω —Ö—ç—Å—ç–≥ –Ω—ç—ç–≥–¥–ª—ç—ç!', 'info');
        }

        // Goals Management Functions
        let userGoals = JSON.parse(localStorage.getItem('userGoals') || '[]');

        function addNewGoal() {
            const title = document.getElementById('newGoalTitle').value;
            const category = document.getElementById('newGoalCategory').value;
            const deadline = document.getElementById('newGoalDeadline').value;
            const description = document.getElementById('newGoalDescription').value;

            if (!title.trim()) {
                showNotification('‚ö†Ô∏è –ó–æ—Ä–∏–ª–≥—ã–Ω –Ω—ç—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É!', 'warning');
                return;
            }

            if (!deadline) {
                showNotification('‚ö†Ô∏è –•—É–≥–∞—Ü–∞–∞ —Å–æ–Ω–≥–æ–Ω–æ —É—É!', 'warning');
                return;
            }

            const goal = {
                id: Date.now(),
                title: title.trim(),
                category: category,
                deadline: deadline,
                description: description.trim(),
                completed: false,
                progress: 0,
                createdAt: new Date().toISOString()
            };

            userGoals.push(goal);
            localStorage.setItem('userGoals', JSON.stringify(userGoals));

            // Clear inputs
            document.getElementById('newGoalTitle').value = '';
            document.getElementById('newGoalDescription').value = '';
            document.getElementById('newGoalDeadline').value = '';

            loadGoals();
            updateGoalsStats();
            showNotification('‚úÖ –®–∏–Ω—ç –∑–æ—Ä–∏–ª–≥–æ –Ω—ç–º—ç–≥–¥–ª—ç—ç!', 'success');
        }

        function loadGoals() {
            const categories = ['academic', 'skill', 'personal', 'career', 'health'];
            
            categories.forEach(category => {
                const goalsList = document.getElementById(category + '-goals');
                goalsList.innerHTML = '';

                const categoryGoals = userGoals.filter(goal => goal.category === category);
                categoryGoals.forEach(goal => {
                    const goalElement = createGoalElement(goal);
                    goalsList.appendChild(goalElement);
                });
            });
        }

        function createGoalElement(goal) {
            const goalDiv = document.createElement('div');
            const isOverdue = new Date(goal.deadline) < new Date() && !goal.completed;
            
            goalDiv.className = `goal-item ${goal.category} ${goal.completed ? 'completed' : ''} ${isOverdue ? 'overdue' : ''}`;
            
            const deadlineText = formatDeadline(goal.deadline);
            const progressWidth = goal.progress || 0;
            
            goalDiv.innerHTML = `
                <div class="goal-title">${goal.title}</div>
                <div class="goal-description">${goal.description}</div>
                <div class="goal-meta">
                    <span class="goal-deadline ${isOverdue ? 'urgent' : ''} ${goal.completed ? 'completed' : ''}">${deadlineText}</span>
                    <span style="font-size: 0.8rem; color: #666;">${getCategoryText(goal.category)}</span>
                </div>
                <div class="goal-progress">
                    <div class="goal-progress-bar" style="width: ${progressWidth}%"></div>
                </div>
                <div style="font-size: 0.8rem; color: #666; margin-bottom: 8px;">–Ø–≤—Ü: ${progressWidth}%</div>
                <div class="goal-actions">
                    ${!goal.completed ? 
                        `<button class="goal-btn progress" onclick="updateGoalProgress(${goal.id})">üìà –Ø–≤—Ü</button>
                         <button class="goal-btn complete" onclick="completeGoal(${goal.id})">‚úì –î—É—É—Å–≥–∞—Ö</button>` : 
                        `<button class="goal-btn complete" onclick="uncompleteGoal(${goal.id})">‚Ü∫ –ë—É—Ü–∞–∞—Ö</button>`
                    }
                    <button class="goal-btn edit" onclick="editGoal(${goal.id})">‚úèÔ∏è –ó–∞—Å–∞—Ö</button>
                    <button class="goal-btn delete" onclick="deleteGoal(${goal.id})">üóëÔ∏è –£—Å—Ç–≥–∞—Ö</button>
                </div>
            `;

            return goalDiv;
        }

        function getCategoryText(category) {
            const categories = {
                'academic': 'üìö –ê–∫–∞–¥–µ–º–∏–∫',
                'skill': 'üîß –£—Ä —á–∞–¥–≤–∞—Ä',
                'personal': 'üë§ –•—É–≤–∏–π–Ω',
                'career': 'üíº –ö–∞—Ä—å–µ—Ä',
                'health': 'üèÉ –≠—Ä“Ø“Ø–ª –º—ç–Ω–¥'
            };
            return categories[category] || category;
        }

        function formatDeadline(deadline) {
            const date = new Date(deadline);
            const today = new Date();
            const diffTime = date - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays < 0) {
                return `${Math.abs(diffDays)} ”©–¥”©—Ä —Ö–æ—Ü–æ—Ä—Å–æ–Ω`;
            } else if (diffDays === 0) {
                return '”®–Ω”©”©–¥”©—Ä';
            } else if (diffDays === 1) {
                return '–ú–∞—Ä–≥–∞–∞—à';
            } else if (diffDays <= 7) {
                return `${diffDays} ”©–¥”©—Ä “Ø–ª–¥—Å—ç–Ω`;
            } else {
                return date.toLocaleDateString('mn-MN');
            }
        }

        function updateGoalProgress(goalId) {
            const newProgress = prompt('–Ø–≤—Ü—ã–Ω —Ö—É–≤—å –æ—Ä—É—É–ª–Ω–∞ —É—É (0-100):');
            if (newProgress !== null && !isNaN(newProgress)) {
                const progress = Math.max(0, Math.min(100, parseInt(newProgress)));
                const goal = userGoals.find(g => g.id === goalId);
                if (goal) {
                    goal.progress = progress;
                    if (progress === 100) {
                        goal.completed = true;
                    }
                    localStorage.setItem('userGoals', JSON.stringify(userGoals));
                    loadGoals();
                    updateGoalsStats();
                    showNotification(`üìà –Ø–≤—Ü ${progress}% –±–æ–ª–∂ —à–∏–Ω—ç—á–ª—ç–≥–¥–ª—ç—ç!`, 'success');
                }
            }
        }

        function completeGoal(goalId) {
            const goal = userGoals.find(g => g.id === goalId);
            if (goal) {
                goal.completed = true;
                goal.progress = 100;
                localStorage.setItem('userGoals', JSON.stringify(userGoals));
                loadGoals();
                updateGoalsStats();
                showNotification('üéâ –ó–æ—Ä–∏–ª–≥–æ –∞–º–∂–∏–ª—Ç—Ç–∞–π –±–∏–µ–ª—ç–≥–¥–ª—ç—ç!', 'success');
            }
        }

        function uncompleteGoal(goalId) {
            const goal = userGoals.find(g => g.id === goalId);
            if (goal) {
                goal.completed = false;
                goal.progress = Math.max(0, goal.progress - 10);
                localStorage.setItem('userGoals', JSON.stringify(userGoals));
                loadGoals();
                updateGoalsStats();
                showNotification('‚Ü∫ –ó–æ—Ä–∏–ª–≥–æ –±—É—Ü–∞–∞–≥–¥–ª–∞–∞!', 'info');
            }
        }

        function editGoal(goalId) {
            const goal = userGoals.find(g => g.id === goalId);
            if (goal) {
                const newTitle = prompt('–®–∏–Ω—ç –Ω—ç—Ä:', goal.title);
                if (newTitle && newTitle.trim()) {
                    goal.title = newTitle.trim();
                    localStorage.setItem('userGoals', JSON.stringify(userGoals));
                    loadGoals();
                    showNotification('‚úèÔ∏è –ó–æ—Ä–∏–ª–≥–æ –∑–∞—Å–∞–≥–¥–ª–∞–∞!', 'success');
                }
            }
        }

        function deleteGoal(goalId) {
            if (confirm('–≠–Ω—ç –∑–æ—Ä–∏–ª–≥—ã–≥ —É—Å—Ç–≥–∞—Ö–¥–∞–∞ –∏—Ç–≥—ç–ª—Ç—ç–π –±–∞–π–Ω–∞ —É—É?')) {
                userGoals = userGoals.filter(g => g.id !== goalId);
                localStorage.setItem('userGoals', JSON.stringify(userGoals));
                loadGoals();
                updateGoalsStats();
                showNotification('üóëÔ∏è –ó–æ—Ä–∏–ª–≥–æ —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞!', 'info');
            }
        }

        function updateGoalsStats() {
            const completed = userGoals.filter(g => g.completed).length;
            const active = userGoals.filter(g => !g.completed).length;
            const overdue = userGoals.filter(g => new Date(g.deadline) < new Date() && !g.completed).length;
            const total = userGoals.length;

            document.getElementById('completedGoals').textContent = completed;
            document.getElementById('activeGoals').textContent = active;
            document.getElementById('overdueGoals').textContent = overdue;
            document.getElementById('totalGoals').textContent = total;
        }

        // Notes Management Functions
        let userNotes = JSON.parse(localStorage.getItem('userNotes') || '[]');
        let currentEditingNoteId = null;

        function showNotesByCategory(category) {
            document.getElementById('notesManagement').style.display = 'block';
            document.getElementById('categoryFilter').value = category;
            filterNotesByCategory();
            showNotification(`üìö ${getCategoryDisplayName(category)} —Ç—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥`, 'info');
        }

        function showAllNotes() {
            document.getElementById('notesManagement').style.display = 'block';
            document.getElementById('categoryFilter').value = 'all';
            loadAllNotes();
            showNotification('üìã –ë“Ø—Ö —Ç—ç–º–¥—ç–≥–ª—ç–ª“Ø“Ø–¥ —Ö–∞—Ä–∞–≥–¥–∞–∂ –±–∞–π–Ω–∞', 'info');
        }

        function getCategoryDisplayName(category) {
            const names = {
                'academic': '–•–∏—á—ç—ç–ª–∏–π–Ω',
                'research': '–°—É–¥–∞–ª–≥–∞–∞–Ω—ã', 
                'ideas': '–°–∞–Ω–∞–∞ –±–æ–¥–ª—ã–Ω',
                'personal': '–•—É–≤–∏–π–Ω',
                'work': '–ê–∂–ª—ã–Ω'
            };
            return names[category] || category;
        }

        function showNewNoteForm() {
            document.getElementById('newNoteModal').style.display = 'block';
            document.getElementById('newNoteTitle').focus();
        }

        function hideNewNoteForm() {
            document.getElementById('newNoteModal').style.display = 'none';
            // Clear form
            document.getElementById('newNoteTitle').value = '';
            document.getElementById('newNoteContent').value = '';
            document.getElementById('newNoteTags').value = '';
            document.getElementById('newNoteCategory').value = 'academic';
        }

        function saveNewNote() {
            const title = document.getElementById('newNoteTitle').value.trim();
            const content = document.getElementById('newNoteContent').value.trim();
            const category = document.getElementById('newNoteCategory').value;
            const tags = document.getElementById('newNoteTags').value.trim();

            if (!title) {
                showNotification('‚ö†Ô∏è –¢—ç–º–¥—ç–≥–ª—ç–ª–∏–π–Ω –≥–∞—Ä—á–∏–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É!', 'warning');
                return;
            }

            if (!content) {
                showNotification('‚ö†Ô∏è –¢—ç–º–¥—ç–≥–ª—ç–ª–∏–π–Ω –∞–≥—É—É–ª–≥–∞ –æ—Ä—É—É–ª–Ω–∞ —É—É!', 'warning');
                return;
            }

            const note = {
                id: Date.now(),
                title: title,
                content: content,
                category: category,
                tags: tags ? tags.split(',').map(tag => tag.trim()) : [],
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                wordCount: content.split(/\s+/).length
            };

            userNotes.unshift(note); // Add to beginning
            localStorage.setItem('userNotes', JSON.stringify(userNotes));

            hideNewNoteForm();
            loadAllNotes();
            showNotification('‚úÖ –¢—ç–º–¥—ç–≥–ª—ç–ª –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö–∞–¥–≥–∞–ª–∞–≥–¥–ª–∞–∞!', 'success');
        }

        function loadAllNotes() {
            displayNotes(userNotes);
        }

        function displayNotes(notes) {
            const notesGrid = document.getElementById('notesGrid');
            const emptyState = document.getElementById('notesEmptyState');

            if (notes.length === 0) {
                notesGrid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }

            notesGrid.style.display = 'grid';
            emptyState.style.display = 'none';

            notesGrid.innerHTML = notes.map(note => createNoteCard(note)).join('');
        }

        function createNoteCard(note) {
            const date = new Date(note.createdAt).toLocaleDateString('mn-MN');
            const tagsHtml = note.tags.map(tag => `<span class="note-tag">${tag}</span>`).join('');
            
            return `
                <div class="note-card ${note.category}" onclick="viewNote(${note.id})">
                    <div class="note-header">
                        <h3 class="note-title">${note.title}</h3>
                        <span class="note-category ${note.category}">${getCategoryDisplayName(note.category)}</span>
                    </div>
                    
                    <div class="note-content">${note.content}</div>
                    
                    ${note.tags.length > 0 ? `<div class="note-tags">${tagsHtml}</div>` : ''}
                    
                    <div class="note-footer">
                        <div class="note-date">
                            <span>üìÖ ${date}</span>
                            <span class="note-word-count">${note.wordCount} “Ø–≥</span>
                        </div>
                        <div class="note-actions">
                            <button class="note-btn view" onclick="event.stopPropagation(); viewNote(${note.id})">üëÅÔ∏è –•–∞—Ä–∞—Ö</button>
                            <button class="note-btn edit" onclick="event.stopPropagation(); editNote(${note.id})">‚úèÔ∏è –ó–∞—Å–∞—Ö</button>
                            <button class="note-btn delete" onclick="event.stopPropagation(); deleteNote(${note.id})">üóëÔ∏è –£—Å—Ç–≥–∞—Ö</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function viewNote(noteId) {
            const note = userNotes.find(n => n.id === noteId);
            if (note) {
                alert(`üìù ${note.title}\n\n${note.content}\n\nüè∑Ô∏è –®–æ—à–≥–æ: ${note.tags.join(', ')}\nüìÖ ${new Date(note.createdAt).toLocaleDateString('mn-MN')}`);
            }
        }

        function editNote(noteId) {
            const note = userNotes.find(n => n.id === noteId);
            if (note) {
                currentEditingNoteId = noteId;
                document.getElementById('editNoteTitle').value = note.title;
                document.getElementById('editNoteContent').value = note.content;
                document.getElementById('editNoteCategory').value = note.category;
                document.getElementById('editNoteTags').value = note.tags.join(', ');
                document.getElementById('editNoteModal').style.display = 'block';
            }
        }

        function hideEditNoteForm() {
            document.getElementById('editNoteModal').style.display = 'none';
            currentEditingNoteId = null;
        }

        function saveEditedNote() {
            if (!currentEditingNoteId) return;

            const title = document.getElementById('editNoteTitle').value.trim();
            const content = document.getElementById('editNoteContent').value.trim();
            const category = document.getElementById('editNoteCategory').value;
            const tags = document.getElementById('editNoteTags').value.trim();

            if (!title || !content) {
                showNotification('‚ö†Ô∏è –ì–∞—Ä—á–∏–≥ –±–æ–ª–æ–Ω –∞–≥—É—É–ª–≥–∞ –æ—Ä—É—É–ª–Ω–∞ —É—É!', 'warning');
                return;
            }

            const noteIndex = userNotes.findIndex(n => n.id === currentEditingNoteId);
            if (noteIndex !== -1) {
                userNotes[noteIndex] = {
                    ...userNotes[noteIndex],
                    title: title,
                    content: content,
                    category: category,
                    tags: tags ? tags.split(',').map(tag => tag.trim()) : [],
                    updatedAt: new Date().toISOString(),
                    wordCount: content.split(/\s+/).length
                };

                localStorage.setItem('userNotes', JSON.stringify(userNotes));
                hideEditNoteForm();
                loadAllNotes();
                showNotification('‚úÖ –¢—ç–º–¥—ç–≥–ª—ç–ª –∞–º–∂–∏–ª—Ç—Ç–∞–π –∑–∞—Å–∞–≥–¥–ª–∞–∞!', 'success');
            }
        }

        function deleteNote(noteId) {
            if (confirm('–≠–Ω—ç —Ç—ç–º–¥—ç–≥–ª—ç–ª–∏–π–≥ —É—Å—Ç–≥–∞—Ö–¥–∞–∞ –∏—Ç–≥—ç–ª—Ç—ç–π –±–∞–π–Ω–∞ —É—É?')) {
                userNotes = userNotes.filter(n => n.id !== noteId);
                localStorage.setItem('userNotes', JSON.stringify(userNotes));
                loadAllNotes();
                showNotification('üóëÔ∏è –¢—ç–º–¥—ç–≥–ª—ç–ª —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞!', 'info');
            }
        }

        function searchNotes() {
            const searchTerm = document.getElementById('notesSearch').value.toLowerCase();
            const filteredNotes = userNotes.filter(note => 
                note.title.toLowerCase().includes(searchTerm) ||
                note.content.toLowerCase().includes(searchTerm) ||
                note.tags.some(tag => tag.toLowerCase().includes(searchTerm))
            );
            displayNotes(filteredNotes);
        }

        function filterNotesByCategory() {
            const category = document.getElementById('categoryFilter').value;
            const filteredNotes = category === 'all' 
                ? userNotes 
                : userNotes.filter(note => note.category === category);
            displayNotes(filteredNotes);
        }

        function sortNotes() {
            const sortType = document.getElementById('sortFilter').value;
            let sortedNotes = [...userNotes];

            switch(sortType) {
                case 'newest':
                    sortedNotes.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                    break;
                case 'oldest':
                    sortedNotes.sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
                    break;
                case 'title':
                    sortedNotes.sort((a, b) => a.title.localeCompare(b.title));
                    break;
                case 'category':
                    sortedNotes.sort((a, b) => a.category.localeCompare(b.category));
                    break;
            }

            displayNotes(sortedNotes);
        }

        function addNewTask() {
            const title = document.getElementById('newTaskTitle').value;
            const day = document.getElementById('newTaskDay').value;
            const priority = document.getElementById('newTaskPriority').value;

            if (!title.trim()) {
                showNotification('‚ö†Ô∏è –î–∞–∞–ª–≥–∞–≤—Ä—ã–Ω –Ω—ç—Ä –æ—Ä—É—É–ª–Ω–∞ —É—É!', 'warning');
                return;
            }

            const task = {
                id: Date.now(),
                title: title.trim(),
                priority: priority,
                completed: false,
                createdAt: new Date().toISOString()
            };

            if (!weeklyTasks[day]) {
                weeklyTasks[day] = [];
            }

            weeklyTasks[day].push(task);
            localStorage.setItem('weeklyTasks', JSON.stringify(weeklyTasks));

            // Clear input
            document.getElementById('newTaskTitle').value = '';

            loadTasks();
            updateStats();
            showNotification('‚úÖ –®–∏–Ω—ç –¥–∞–∞–ª–≥–∞–≤–∞—Ä –Ω—ç–º—ç–≥–¥–ª—ç—ç!', 'success');
        }

        function loadTasks() {
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            
            days.forEach(day => {
                const taskList = document.getElementById(day + '-tasks');
                taskList.innerHTML = '';

                if (weeklyTasks[day]) {
                    weeklyTasks[day].forEach(task => {
                        const taskElement = createTaskElement(task, day);
                        taskList.appendChild(taskElement);
                    });
                }
            });
        }

        function createTaskElement(task, day) {
            const taskDiv = document.createElement('div');
            taskDiv.className = `task-item ${task.priority}-priority ${task.completed ? 'completed' : ''}`;
            
            taskDiv.innerHTML = `
                <div class="task-title">${task.title}</div>
                <span class="task-priority ${task.priority}">${getPriorityText(task.priority)}</span>
                <div class="task-actions">
                    ${!task.completed ? 
                        `<button class="task-btn complete" onclick="completeTask('${day}', ${task.id})">‚úì –î—É—É—Å–≥–∞—Ö</button>` : 
                        `<button class="task-btn complete" onclick="uncompleteTask('${day}', ${task.id})">‚Ü∫ –ë—É—Ü–∞–∞—Ö</button>`
                    }
                    <button class="task-btn delete" onclick="deleteTask('${day}', ${task.id})">üóëÔ∏è –£—Å—Ç–≥–∞—Ö</button>
                </div>
            `;

            return taskDiv;
        }

        function getPriorityText(priority) {
            switch(priority) {
                case 'high': return 'üî¥ –Ø–∞—Ä–∞–ª—Ç–∞–π';
                case 'medium': return 'üü° –î—É–Ω–¥–∞–∂';
                case 'low': return 'üü¢ –ë–∞–≥–∞';
                default: return priority;
            }
        }

        function completeTask(day, taskId) {
            const task = weeklyTasks[day].find(t => t.id === taskId);
            if (task) {
                task.completed = true;
                localStorage.setItem('weeklyTasks', JSON.stringify(weeklyTasks));
                loadTasks();
                updateStats();
                showNotification('‚úÖ –î–∞–∞–ª–≥–∞–≤–∞—Ä –¥—É—É—Å–ª–∞–∞!', 'success');
            }
        }

        function uncompleteTask(day, taskId) {
            const task = weeklyTasks[day].find(t => t.id === taskId);
            if (task) {
                task.completed = false;
                localStorage.setItem('weeklyTasks', JSON.stringify(weeklyTasks));
                loadTasks();
                updateStats();
                showNotification('‚Ü∫ –î–∞–∞–ª–≥–∞–≤–∞—Ä –±—É—Ü–∞–∞–≥–¥–ª–∞–∞!', 'info');
            }
        }

        function deleteTask(day, taskId) {
            if (confirm('–≠–Ω—ç –¥–∞–∞–ª–≥–∞–≤—Ä—ã–≥ —É—Å—Ç–≥–∞—Ö–¥–∞–∞ –∏—Ç–≥—ç–ª—Ç—ç–π –±–∞–π–Ω–∞ —É—É?')) {
                weeklyTasks[day] = weeklyTasks[day].filter(t => t.id !== taskId);
                localStorage.setItem('weeklyTasks', JSON.stringify(weeklyTasks));
                loadTasks();
                updateStats();
                showNotification('üóëÔ∏è –î–∞–∞–ª–≥–∞–≤–∞—Ä —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞!', 'info');
            }
        }

        function updateStats() {
            let completed = 0, pending = 0, total = 0;
            const today = new Date();
            
            Object.values(weeklyTasks).forEach(dayTasks => {
                dayTasks.forEach(task => {
                    total++;
                    if (task.completed) {
                        completed++;
                    } else {
                        pending++;
                    }
                });
            });

            document.getElementById('completedTasks').textContent = completed;
            document.getElementById('pendingTasks').textContent = pending;
            document.getElementById('overdueTasks').textContent = 0; // Can be enhanced later
            document.getElementById('totalTasks').textContent = total;
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : '#007bff'};
                color: ${type === 'warning' ? '#000' : '#fff'};
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideIn 0.3s ease;
                max-width: 300px;
                word-wrap: break-word;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Add slide in animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Admin Functions
        function checkAdminAccess() {
            // Check if current user has admin privileges
            const session = localStorage.getItem('studyHubSession') || sessionStorage.getItem('studyHubSession');
            if (session) {
                try {
                    const userData = JSON.parse(session);
                    // Check for admin status (you can modify this logic based on your user data structure)
                    if (userData.email === 'admin@studyhub.com' || userData.role === 'admin' || userData.isAdmin) {
                        showAdminFeatures();
                        return true;
                    }
                } catch (error) {
                    console.error('Error checking admin access:', error);
                }
            }
            return false;
        }

        function showAdminFeatures() {
            // Show admin navigation and content
            document.querySelectorAll('.admin-only').forEach(element => {
                element.style.display = element.tagName === 'BUTTON' ? 'flex' : 'block';
            });
        }

        function showUserList() {
            alert('üìã –•—ç—Ä—ç–≥–ª—ç–≥—á–¥–∏–π–Ω –∂–∞–≥—Å–∞–∞–ª—Ç:\n\n' +
                '1. –ë–æ–ª–¥ - admin@studyhub.com (–ê–¥–º–∏–Ω)\n' +
                '2. –°–∞–π—Ö–∞–Ω - user1@example.com (–•—ç—Ä—ç–≥–ª—ç–≥—á)\n' +
                '3. –¢”©–≥”©–ª–¥”©—Ä - user2@example.com (–•—ç—Ä—ç–≥–ª—ç–≥—á)\n' +
                '4. –¶—ç—Ü—ç–≥ - user3@example.com (–•—ç—Ä—ç–≥–ª—ç–≥—á)\n' +
                '5. –ë–∞—Ç-–≠—Ä–¥—ç–Ω—ç - user4@example.com (–•—ç—Ä—ç–≥–ª—ç–≥—á)\n\n' +
                '–î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π –º—ç–¥—ç—ç–ª—ç–ª –∞–≤–∞—Ö—ã–≥ —Ö“Ø—Å–≤—ç–ª —Ç–æ–¥–æ—Ä—Ö–æ–π —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–≥ —Å–æ–Ω–≥–æ–Ω–æ —É—É.');
        }

        function addAdmin() {
            const email = prompt('–®–∏–Ω—ç –∞–¥–º–∏–Ω—ã –ò-–º—ç–π–ª —Ö–∞—è–≥–∏–π–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É:');
            if (email) {
                if (confirm(`${email} —Ö–∞—è–≥–∏–π–≥ –∞–¥–º–∏–Ω –±–æ–ª–≥–æ—Ö—ã–≥ –±–∞—Ç–∞–ª–≥–∞–∞–∂—É—É–ª–∞—Ö —É—É?`)) {
                    alert(`‚úÖ –ê–º–∂–∏–ª—Ç—Ç–∞–π! ${email} —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–¥ –∞–¥–º–∏–Ω —ç—Ä—Ö –æ–ª–≥–æ–≥–¥–ª–æ–æ.`);
                    // Here you would typically make an API call to update user permissions
                }
            }
        }

        function blockUser() {
            const email = prompt('–ë–ª–æ–∫–ª–æ—Ö —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–Ω –ò-–º—ç–π–ª —Ö–∞—è–≥–∏–π–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É:');
            if (email) {
                const reason = prompt('–ë–ª–æ–∫–ª–æ—Ö —à–∞–ª—Ç–≥–∞–∞–Ω–∏–π–≥ –±–∏—á–Ω—ç “Ø“Ø:');
                if (reason && confirm(`${email} —Ö—ç—Ä—ç–≥–ª—ç–≥—á–∏–π–≥ "${reason}" —à–∞–ª—Ç–≥–∞–∞–Ω–∞–∞—Ä –±–ª–æ–∫–ª–æ—Ö —É—É?`)) {
                    alert(`üö´ ${email} —Ö—ç—Ä—ç–≥–ª—ç–≥—á –±–ª–æ–∫–ª–æ–≥–¥–ª–æ–æ.\n–®–∞–ª—Ç–≥–∞–∞–Ω: ${reason}`);
                    // Here you would make an API call to block the user
                }
            }
        }

        function backupDatabase() {
            if (confirm('”®–≥”©–≥–¥–ª–∏–π–Ω —Å–∞–Ω–≥–∏–π–Ω –Ω”©”©—Ü–ª”©–ª—Ç —Ö–∏–π—Ö “Ø“Ø? –≠–Ω—ç –Ω—å —Ö—ç–¥—ç–Ω –º–∏–Ω—É—Ç “Ø—Ä–≥—ç–ª–∂–∏–ª–∂ –±–æ–ª–Ω–æ.')) {
                alert('üíæ –ù”©”©—Ü–ª”©–ª—Ç —ç—Ö—ç–ª–∂ –±–∞–π–Ω–∞...\n\n–¢–∞ —Ç”©–ª”©–≤–∏–π–≥ —Ö–∞—Ä–∏—É—Ü–ª–∞–≥—ã–Ω —Å–∞–º–±–∞—Ä—Ç —Ö–∞—Ä–∂ –±–æ–ª–Ω–æ.');
                // Simulate backup process
                setTimeout(() => {
                    alert('‚úÖ ”®–≥”©–≥–¥–ª–∏–π–Ω –Ω”©”©—Ü–ª”©–ª—Ç –∞–º–∂–∏–ª—Ç—Ç–∞–π –¥—É—É—Å–ª–∞–∞!\n\n–§–∞–π–ª: backup_' + new Date().toISOString().split('T')[0] + '.sql');
                }, 2000);
            }
        }

        function moderateContent() {
            alert('üìã –ù–∏–π—Ç–∏–π–Ω –∫–æ–Ω—Ç–µ–Ω—Ç:\n\n' +
                'üîç –®–∏–Ω–∂–∏–ª–≥—ç—ç–Ω–¥ –æ—Ä—Å–æ–Ω: 15 —Ç—ç–º–¥—ç–≥–ª—ç–ª\n' +
                '‚úÖ –ó”©–≤—à”©”©—Ä”©–≥–¥—Å”©–Ω: 142 —Ç—ç–º–¥—ç–≥–ª—ç–ª\n' +
                '‚ùå –¢–∞—Ç–≥–∞–ª–∑—Å–∞–Ω: 3 —Ç—ç–º–¥—ç–≥–ª—ç–ª\n' +
                '‚è≥ –•“Ø–ª—ç—ç–≥–¥—ç–∂ –±—É–π: 7 —Ç—ç–º–¥—ç–≥–ª—ç–ª\n\n' +
                '–î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ö–∞—Ä–∞—Ö—ã–≥ —Ö“Ø—Å–≤—ç–ª –∫–æ–Ω—Ç–µ–Ω—Ç—ã–Ω —É–¥–∏—Ä–¥–ª–∞–≥—ã–Ω —Ö—ç—Å—ç–≥—Ç –æ—Ä–Ω–æ —É—É.');
        }

        function handleReports() {
            alert('‚ö†Ô∏è –ì–æ–º–¥–ª—ã–Ω –∂–∞–≥—Å–∞–∞–ª—Ç:\n\n' +
                '1. –ó–æ—Ö–∏—Å–≥“Ø–π –∫–æ–Ω—Ç–µ–Ω—Ç - user2@example.com\n' +
                '2. –°–ø–∞–º —Ç—ç–º–¥—ç–≥–ª—ç–ª - user5@example.com  \n' +
                '3. –•—ç—Ä“Ø“Ø–ª —Ö—ç–ª—ç–ª—Ü“Ø“Ø–ª—ç–≥ - user8@example.com\n\n' +
                '–ì–æ–º–¥–æ–ª —à–∏–π–¥–≤—ç—Ä–ª—ç—Ö–∏–π–Ω —Ç—É–ª–¥ —Ç–æ–¥–æ—Ä—Ö–æ–π –∑“Ø–π–ª–∏–π–≥ —Å–æ–Ω–≥–æ–Ω–æ —É—É.');
        }

        function saveAdminSettings() {
            const maintenanceMode = document.getElementById('maintenanceMode').checked;
            const allowRegistration = document.getElementById('allowRegistration').checked;
            
            // Save admin settings
            localStorage.setItem('adminSettings', JSON.stringify({
                maintenanceMode,
                allowRegistration,
                lastUpdate: new Date().toISOString()
            }));
            
            alert('‚úÖ –ê–¥–º–∏–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ –∞–º–∂–∏–ª—Ç—Ç–∞–π —Ö–∞–¥–≥–∞–ª–∞–≥–¥–ª–∞–∞!');
        }

        function generateAdminReport() {
            alert('üìä –°–∏—Å—Ç–µ–º–∏–π–Ω —Ç–∞–π–ª–∞–Ω “Ø“Ø—Å–≥—ç–∂ –±–∞–π–Ω–∞...\n\n' +
                '–¢–∞–π–ª–∞–Ω–¥ –±–∞–≥—Ç—Å–∞–Ω –º—ç–¥—ç—ç–ª—ç–ª:\n' +
                '‚Ä¢ –•—ç—Ä—ç–≥–ª—ç–≥—á–¥–∏–π–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫\n' +
                '‚Ä¢ –°–∏—Å—Ç–µ–º–∏–π–Ω –∞–∂–∏–ª–ª–∞–≥–∞–∞\n' +
                '‚Ä¢ –ö–æ–Ω—Ç–µ–Ω—Ç—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª\n' +
                '‚Ä¢ –ê—é—É–ª–≥“Ø–π –±–∞–π–¥–ª—ã–Ω “Ø–Ω—ç–ª–≥—ç—ç\n\n' +
                '–¢–∞–π–ª–∞–Ω 2-3 –º–∏–Ω—É—Ç—ã–Ω –¥–æ—Ç–æ—Ä –±—ç–ª—ç–Ω –±–æ–ª–Ω–æ.');
        }

        function exportSystemLogs() {
            if (confirm('–°–∏—Å—Ç–µ–º–∏–π–Ω –ª–æ–≥—É—É–¥—ã–≥ —Ç–∞—Ç–∞–∂ –∞–≤–∞—Ö —É—É? –§–∞–π–ª—ã–Ω —Ö—ç–º–∂—ç—ç –∏—Ö –±–∞–π–∂ –º–∞–≥–∞–¥–≥“Ø–π.')) {
                alert('üìÑ –õ–æ–≥—É—É–¥—ã–≥ —ç–∫—Å–ø–æ—Ä—Ç —Ö–∏–π–∂ –±–∞–π–Ω–∞...\n\n–§–∞–π–ª: system_logs_' + new Date().toISOString().split('T')[0] + '.txt');
                // Here you would trigger the actual log export
            }
        }

        function promptAdminLogin() {
            document.getElementById('adminLoginCard').style.display = 'block';
            document.getElementById('adminCode').focus();
        }

        function cancelAdminLogin() {
            document.getElementById('adminLoginCard').style.display = 'none';
            document.getElementById('adminCode').value = '';
        }

        function verifyAdminLogin() {
            const adminCode = document.getElementById('adminCode').value;
            
            // Simple admin codes (in real application, this should be more secure)
            const validCodes = ['admin123', 'studyhub2025', 'üëëadminüëë'];
            
            if (validCodes.includes(adminCode)) {
                // Grant admin access
                const session = localStorage.getItem('studyHubSession') || sessionStorage.getItem('studyHubSession');
                if (session) {
                    try {
                        const userData = JSON.parse(session);
                        userData.isAdmin = true;
                        userData.role = 'admin';
                        
                        // Save updated session
                        if (localStorage.getItem('studyHubSession')) {
                            localStorage.setItem('studyHubSession', JSON.stringify(userData));
                        } else {
                            sessionStorage.setItem('studyHubSession', JSON.stringify(userData));
                        }
                        
                        showAdminFeatures();
                        cancelAdminLogin();
                        showNotification('‚úÖ –ê–¥–º–∏–Ω —ç—Ä—Ö –∞–º–∂–∏–ª—Ç—Ç–∞–π –æ–ª–≥–æ–≥–¥–ª–æ–æ!', 'success');
                        
                        // Auto switch to admin settings
                        setTimeout(() => {
                            showSettings('adminSettings');
                        }, 1000);
                        
                    } catch (error) {
                        console.error('Error updating admin status:', error);
                    }
                }
            } else {
                showNotification('‚ùå –ë—É—Ä—É—É –∞–¥–º–∏–Ω –∫–æ–¥!', 'error');
                document.getElementById('adminCode').value = '';
                document.getElementById('adminCode').focus();
            }
        }

        // Mobile Testing Functions
        let originalViewport = null;
        let performanceStartTime = Date.now();
        
        function toggleMobileTesting() {
            const panel = document.getElementById('mobileTestingPanel');
            if (panel.style.display === 'none') {
                panel.style.display = 'block';
                startPerformanceMonitoring();
                logTestResult('üì± –ì–∞—Ä —É—Ç–∞—Å–Ω—ã —Ç–µ—Å—Ç —ç—Ö—ç–ª–ª—ç—ç');
            } else {
                panel.style.display = 'none';
                resetViewport();
                logTestResult('üì± –ì–∞—Ä —É—Ç–∞—Å–Ω—ã —Ç–µ—Å—Ç –¥—É—É—Å—Å–∞–Ω');
            }
        }

        function setDeviceSize(type, width, height) {
            const appContainer = document.querySelector('.app-container');
            
            if (type === 'reset') {
                resetViewport();
                logTestResult('üîÑ Viewport reset —Ö–∏–π–≥–¥–ª—ç—ç');
                return;
            }
            
            // Store original viewport if not already stored
            if (!originalViewport) {
                originalViewport = {
                    width: appContainer.style.width,
                    height: appContainer.style.height,
                    maxWidth: appContainer.style.maxWidth,
                    margin: appContainer.style.margin,
                    transform: appContainer.style.transform
                };
            }
            
            // Apply device simulation
            appContainer.style.width = width + 'px';
            appContainer.style.height = height + 'px';
            appContainer.style.maxWidth = width + 'px';
            appContainer.style.margin = '10px auto';
            appContainer.style.transform = 'scale(0.8)';
            appContainer.style.transformOrigin = 'top center';
            
            logTestResult(`üì≤ ${type} —Å–∏–º—É–ª—è—Ü–∏: ${width}x${height}px`);
            updatePerformanceStats();
        }

        function resetViewport() {
            const appContainer = document.querySelector('.app-container');
            
            if (originalViewport) {
                appContainer.style.width = originalViewport.width;
                appContainer.style.height = originalViewport.height;
                appContainer.style.maxWidth = originalViewport.maxWidth;
                appContainer.style.margin = originalViewport.margin;
                appContainer.style.transform = originalViewport.transform;
                originalViewport = null;
            }
        }

        function setOrientation(orientation) {
            const appContainer = document.querySelector('.app-container');
            
            if (orientation === 'landscape') {
                appContainer.style.transform = 'rotate(90deg) scale(0.6)';
                appContainer.style.transformOrigin = 'center center';
                logTestResult('üîÑ Landscape –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª –±–∞–π—Ä—à–∏–ª–¥ —à–∏–ª–∂–ª—ç—ç');
            } else {
                appContainer.style.transform = originalViewport ? originalViewport.transform : 'none';
                logTestResult('üîÑ Portrait –±–æ—Å–æ–æ –±–∞–π—Ä—à–∏–ª–¥ —à–∏–ª–∂–ª—ç—ç');
            }
        }

        function simulateTouch() {
            const cards = document.querySelectorAll('.feature-card');
            let testCount = 0;
            
            cards.forEach((card, index) => {
                setTimeout(() => {
                    // Simulate touch events
                    const touchEvent = new TouchEvent('touchstart', {
                        bubbles: true,
                        touches: [{
                            clientX: card.offsetLeft + card.offsetWidth / 2,
                            clientY: card.offsetTop + card.offsetHeight / 2
                        }]
                    });
                    
                    card.style.transform = 'scale(0.95)';
                    card.dispatchEvent(touchEvent);
                    
                    setTimeout(() => {
                        card.style.transform = '';
                        testCount++;
                        if (testCount === cards.length) {
                            logTestResult(`‚úÖ Touch —Ç–µ—Å—Ç –∞–º–∂–∏–ª—Ç—Ç–∞–π: ${cards.length} —ç–ª–µ–º–µ–Ω—Ç —à–∞–ª–≥–∞–≥–¥–ª–∞–∞`);
                        }
                    }, 200);
                }, index * 300);
            });
        }

        function testScrolling() {
            const contentArea = document.querySelector('.content-area');
            let scrollPosition = 0;
            const maxScroll = contentArea.scrollHeight - contentArea.clientHeight;
            
            const scrollTest = setInterval(() => {
                scrollPosition += 100;
                contentArea.scrollTo({ top: scrollPosition, behavior: 'smooth' });
                
                if (scrollPosition >= maxScroll) {
                    clearInterval(scrollTest);
                    setTimeout(() => {
                        contentArea.scrollTo({ top: 0, behavior: 'smooth' });
                        logTestResult('‚úÖ Scroll —Ç–µ—Å—Ç –∞–º–∂–∏–ª—Ç—Ç–∞–π: –ë“Ø—Ö —Ö—É—É–¥–∞—Å —à–∞–ª–≥–∞–≥–¥–ª–∞–∞');
                    }, 500);
                }
            }, 500);
        }

        function testSwipeGestures() {
            const tabs = document.querySelectorAll('.nav-tab');
            let currentTab = 0;
            
            const swipeTest = setInterval(() => {
                if (currentTab < tabs.length) {
                    tabs[currentTab].click();
                    logTestResult(`üëÜ Swipe —Ç–µ—Å—Ç: ${tabs[currentTab].textContent} —Ç–∞–±`);
                    currentTab++;
                } else {
                    clearInterval(swipeTest);
                    tabs[0].click(); // Return to first tab
                    logTestResult('‚úÖ Swipe gesture —Ç–µ—Å—Ç –∞–º–∂–∏–ª—Ç—Ç–∞–π –¥—É—É—Å–ª–∞–∞');
                }
            }, 1000);
        }

        function startPerformanceMonitoring() {
            performanceStartTime = Date.now();
            
            // Monitor FPS
            let frameCount = 0;
            let lastTime = performanceStartTime;
            
            function countFPS() {
                frameCount++;
                const currentTime = Date.now();
                
                if (currentTime - lastTime >= 1000) {
                    document.getElementById('fpsCounter').textContent = frameCount;
                    frameCount = 0;
                    lastTime = currentTime;
                }
                
                requestAnimationFrame(countFPS);
            }
            
            requestAnimationFrame(countFPS);
            updatePerformanceStats();
        }

        function updatePerformanceStats() {
            const loadTime = Date.now() - performanceStartTime;
            document.getElementById('loadTime').textContent = loadTime;
            
            // Memory usage (approximate)
            if (performance.memory) {
                const memoryMB = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024);
                document.getElementById('memoryUsage').textContent = memoryMB;
            }
            
            // Additional performance metrics
            measurePagePerformance();
        }

        function measurePagePerformance() {
            // Measure rendering performance
            const paintEntries = performance.getEntriesByType('paint');
            if (paintEntries.length > 0) {
                const fcp = paintEntries.find(entry => entry.name === 'first-contentful-paint');
                if (fcp) {
                    logTestResult(`üé® First Contentful Paint: ${Math.round(fcp.startTime)}ms`);
                }
            }
            
            // Measure resource loading
            const resourceEntries = performance.getEntriesByType('resource');
            if (resourceEntries.length > 0) {
                const totalSize = resourceEntries.reduce((total, entry) => {
                    return total + (entry.transferSize || 0);
                }, 0);
                logTestResult(`üì¶ –ù–∏–π—Ç —Ä–µ—Å—É—Ä—Å: ${Math.round(totalSize / 1024)}KB`);
            }
            
            // Check for layout shifts
            if ('LayoutShift' in window) {
                new PerformanceObserver((list) => {
                    for (const entry of list.getEntries()) {
                        if (entry.hadRecentInput) continue;
                        logTestResult(`üìä Layout Shift: ${entry.value.toFixed(4)}`);
                    }
                }).observe({ type: 'layout-shift', buffered: true });
            }
            
            // Network information if available
            if ('connection' in navigator) {
                const connection = navigator.connection;
                logTestResult(`üåê –°“Ø–ª–∂—ç—ç: ${connection.effectiveType} (${connection.downlink}Mbps)`);
            }
        }

        function runComprehensiveTest() {
            logTestResult('üöÄ –ò–∂ –±“Ø—Ä—ç–Ω —Ç–µ—Å—Ç —ç—Ö—ç–ª–∂ –±–∞–π–Ω–∞...');
            
            // Browser compatibility check first
            checkBrowserCompatibility();
            
            // Test 1: Device compatibility
            setTimeout(() => {
                setDeviceSize('mobile', 375, 667);
                logTestResult('üì± iPhone SE —Ç–µ—Å—Ç...');
            }, 1000);
            
            // Test 2: Orientation
            setTimeout(() => {
                setOrientation('landscape');
                logTestResult('üîÑ Landscape —Ç–µ—Å—Ç...');
            }, 3000);
            
            // Test 3: Touch simulation
            setTimeout(() => {
                simulateTouch();
            }, 5000);
            
            // Test 4: Scroll test
            setTimeout(() => {
                testScrolling();
            }, 8000);
            
            // Test 5: Performance check
            setTimeout(() => {
                measurePagePerformance();
                logTestResult('‚úÖ –ò–∂ –±“Ø—Ä—ç–Ω —Ç–µ—Å—Ç –∞–º–∂–∏–ª—Ç—Ç–∞–π –¥—É—É—Å–ª–∞–∞!');
            }, 12000);
            
            // Reset to original state
            setTimeout(() => {
                setDeviceSize('reset');
                setOrientation('portrait');
            }, 15000);
        }

        function checkBrowserCompatibility() {
            const userAgent = navigator.userAgent;
            let browserInfo = 'Unknown';
            let isMobile = false;
            
            // Detect browser
            if (userAgent.includes('Chrome')) {
                browserInfo = 'Chrome';
            } else if (userAgent.includes('Firefox')) {
                browserInfo = 'Firefox';
            } else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) {
                browserInfo = 'Safari';
            } else if (userAgent.includes('Edge')) {
                browserInfo = 'Edge';
            } else if (userAgent.includes('Opera')) {
                browserInfo = 'Opera';
            }
            
            // Detect mobile
            isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);
            
            logTestResult(`üåê Browser: ${browserInfo} ${isMobile ? '(Mobile)' : '(Desktop)'}`);
            
            // Feature support checks
            const features = {
                'Touch Events': 'ontouchstart' in window,
                'Backdrop Filter': CSS.supports('backdrop-filter', 'blur(10px)'),
                'CSS Grid': CSS.supports('display', 'grid'),
                'Flexbox': CSS.supports('display', 'flex'),
                'WebGL': !!window.WebGLRenderingContext,
                'Service Worker': 'serviceWorker' in navigator,
                'Push Notifications': 'PushManager' in window,
                'Geolocation': 'geolocation' in navigator,
                'Local Storage': 'localStorage' in window,
                'Session Storage': 'sessionStorage' in window
            };
            
            Object.entries(features).forEach(([feature, supported]) => {
                const status = supported ? '‚úÖ' : '‚ùå';
                logTestResult(`${status} ${feature}: ${supported ? 'Supported' : 'Not Supported'}`);
            });
            
            // Check viewport capabilities
            const viewport = {
                width: window.innerWidth || document.documentElement.clientWidth,
                height: window.innerHeight || document.documentElement.clientHeight,
                pixelRatio: window.devicePixelRatio || 1
            };
            
            logTestResult(`üìè Viewport: ${viewport.width}x${viewport.height} (${viewport.pixelRatio}x DPR)`);
            
            // Check network information
            if ('connection' in navigator) {
                const conn = navigator.connection;
                logTestResult(`üì∂ Network: ${conn.effectiveType} - ${conn.downlink}Mbps`);
            }
            
            // Performance capabilities
            const performance = window.performance;
            if (performance && performance.memory) {
                const memory = performance.memory;
                const memoryMB = Math.round(memory.usedJSHeapSize / 1024 / 1024);
                const limitMB = Math.round(memory.jsHeapSizeLimit / 1024 / 1024);
                logTestResult(`üß† Memory: ${memoryMB}MB / ${limitMB}MB`);
            }
        }

        function testResponsiveBreakpoints() {
            const breakpoints = [
                { name: 'Mobile S', width: 320 },
                { name: 'Mobile M', width: 375 },
                { name: 'Mobile L', width: 414 },
                { name: 'Tablet', width: 768 },
                { name: 'Laptop', width: 1024 },
                { name: 'Desktop', width: 1440 }
            ];
            
            let currentIndex = 0;
            
            function testNextBreakpoint() {
                if (currentIndex < breakpoints.length) {
                    const bp = breakpoints[currentIndex];
                    setDeviceSize('test', bp.width, 800);
                    logTestResult(`üì± ${bp.name} —Ç–µ—Å—Ç: ${bp.width}px`);
                    currentIndex++;
                    setTimeout(testNextBreakpoint, 2000);
                } else {
                    setDeviceSize('reset');
                    logTestResult('‚úÖ Responsive breakpoint —Ç–µ—Å—Ç –¥—É—É—Å–ª–∞–∞');
                }
            }
            
            testNextBreakpoint();
        }

        function logTestResult(message) {
            const results = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString();
            const resultItem = document.createElement('div');
            resultItem.innerHTML = `<span style="color: #66d9ef;">[${timestamp}]</span> ${message}`;
            resultItem.style.marginBottom = '8px';
            resultItem.style.padding = '5px';
            resultItem.style.background = 'rgba(255,255,255,0.05)';
            resultItem.style.borderRadius = '4px';
            results.appendChild(resultItem);
            results.scrollTop = results.scrollHeight;
        }

        // Load saved preferences on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved theme
            const savedTheme = localStorage.getItem('selectedTheme') || 'education';
            document.body.classList.add(savedTheme + '-theme');
            
            // Update active theme option
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
                if (option.dataset && option.dataset.theme === savedTheme) {
                    option.classList.add('active');
                }
            });
            
            // Load all settings
            loadAllSettings();
            
            // Apply custom theme
            applyCustomTheme();
            
            // Apply language
            applyLanguage();
            
            // Load saved profile picture
            loadSavedProfilePicture();
            
            // Initialize backup system
            initializeBackupSystem();
            
            // Update storage info
            updateStorageInfo();
            
            // Welcome notification
            setTimeout(() => {
                showNotification(t('welcome'), 'success');
            }, 1000);
            
            // Check admin access
            checkAdminAccess();
        });

        // Load all settings function
        function loadAllSettings() {
            // Load profile settings
            loadUserProfile();
            
            // Load notification settings
            const settings = [
                'homeworkDeadlineNotifs', 'newHomeworkNotifs', 'noteReminderNotifs',
                'goalProgressNotifs', 'systemUpdateNotifs', 'monthlyReportNotifs'
            ];
            
            settings.forEach(setting => {
                const element = document.getElementById(setting);
                if (element) {
                    const saved = localStorage.getItem(setting);
                    element.checked = saved === null ? true : saved === 'true';
                }
            });
            
            // Load notification timing
            const morningTime = localStorage.getItem('morningNotifTime') || '09:00';
            const eveningTime = localStorage.getItem('eveningNotifTime') || '20:00';
            const morningEl = document.getElementById('morningNotifTime');
            const eveningEl = document.getElementById('eveningNotifTime');
            if (morningEl) morningEl.value = morningTime;
            if (eveningEl) eveningEl.value = eveningTime;
            
            // Load language settings
            const languageSettings = [
                { id: 'interfaceLanguage', default: 'mn' },
                { id: 'timezone', default: 'Asia/Ulaanbaatar' },
                { id: 'dateFormat', default: 'dd/mm/yyyy' },
                { id: 'timeFormat', default: '24h' },
                { id: 'weekStart', default: 'monday' }
            ];
            
            languageSettings.forEach(setting => {
                const element = document.getElementById(setting.id);
                if (element) {
                    element.value = localStorage.getItem(setting.id) || setting.default;
                }
            });
            
            // Load privacy settings
            const privacySettings = [
                { id: 'autoLogout', default: '1day' },
                { id: 'allowNoteSharing', default: true },
                { id: 'showProgressToOthers', default: false },
                { id: 'allowAnalytics', default: true },
                { id: 'sendErrorReports', default: true }
            ];
            
            privacySettings.forEach(setting => {
                const element = document.getElementById(setting.id);
                if (element) {
                    if (element.type === 'checkbox') {
                        const saved = localStorage.getItem(setting.id);
                        element.checked = saved === null ? setting.default : saved === 'true';
                    } else {
                        element.value = localStorage.getItem(setting.id) || setting.default;
                    }
                }
            });
            
            // Load theme customization
            const primaryColor = localStorage.getItem('primaryColor') || '#007bff';
            const accentColor = localStorage.getItem('accentColor') || '#28a745';
            const fontSize = localStorage.getItem('fontSize') || 'medium';
            
            const primaryEl = document.getElementById('primaryColor');
            const accentEl = document.getElementById('accentColor');
            const fontEl = document.getElementById('fontSize');
            
            if (primaryEl) primaryEl.value = primaryColor;
            if (accentEl) accentEl.value = accentColor;
            if (fontEl) fontEl.value = fontSize;
            
            // Load backup settings
            const autoBackup = localStorage.getItem('autoBackup');
            const backupFrequency = localStorage.getItem('backupFrequency') || 'weekly';
            
            const autoBackupEl = document.getElementById('autoBackup');
            const backupFreqEl = document.getElementById('backupFrequency');
            
            if (autoBackupEl) autoBackupEl.checked = autoBackup === null ? true : autoBackup === 'true';
            if (backupFreqEl) backupFreqEl.value = backupFrequency;
        }

        // Add keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey) {
                switch(e.key) {
                    case '1':
                        e.preventDefault();
                        showTab('home');
                        break;
                    case '2':
                        e.preventDefault();
                        showTab('notes');
                        break;
                    case '3':
                        e.preventDefault();
                        showTab('homework');
                        break;
                    case '4':
                        e.preventDefault();
                        showTab('settings');
                        break;
                    case 'w':
                        e.preventDefault();
                        showWeeklyPlan();
                        break;
                    case 'g':
                        e.preventDefault();
                        showGoals();
                        break;
                    case 'n':
                        e.preventDefault();
                        if (document.getElementById('weeklyPlanDetail').style.display !== 'none') {
                            document.getElementById('newTaskTitle').focus();
                        } else if (document.getElementById('goalsDetail').style.display !== 'none') {
                            document.getElementById('newGoalTitle').focus();
                        } else if (document.getElementById('notesManagement').style.display !== 'none') {
                            showNewNoteForm();
                        } else if (document.getElementById('dailyTasksDetail').style.display !== 'none') {
                            document.getElementById('quickTaskTitle').focus();
                        }
                        break;
                    case 'd':
                        e.preventDefault();
                        showDailyTasks();
                        break;
                    case 'a':
                        e.preventDefault();
                        if (event.target.closest('#notes')) {
                            showAllNotes();
                        }
                        break;
                }
            }
            
            // Enter key to add new task, goal, or note
            if (e.key === 'Enter' && document.activeElement.id === 'newTaskTitle') {
                e.preventDefault();
                addNewTask();
            }
            
            if (e.key === 'Enter' && document.activeElement.id === 'newGoalTitle') {
                e.preventDefault();
                addNewGoal();
            }
            
            if (e.key === 'Enter' && document.activeElement.id === 'newNoteTitle') {
                e.preventDefault();
                document.getElementById('newNoteContent').focus();
            }
            
            if (e.key === 'Enter' && document.activeElement.id === 'quickTaskTitle') {
                e.preventDefault();
                addQuickTask();
            }
            
            // Ctrl+Enter to save note
            if (e.ctrlKey && e.key === 'Enter' && document.activeElement.id === 'newNoteContent') {
                e.preventDefault();
                saveNewNote();
            }
            
            // Escape to close modals
            if (e.key === 'Escape') {
                if (document.getElementById('newNoteModal').style.display === 'block') {
                    hideNewNoteForm();
                }
                if (document.getElementById('editNoteModal').style.display === 'block') {
                    hideEditNoteForm();
                }
            }
        });

        // =================== LESSON SYSTEM FUNCTIONS ===================

        // Open Lesson Content
        function openLesson(subject, lesson) {
            // Create lesson viewer modal
            const modal = document.createElement('div');
            modal.className = 'lesson-modal';
            modal.innerHTML = `
                <div class="lesson-modal-content">
                    <div class="lesson-modal-header">
                        <h2><span class="lesson-subject-icon">${getLessonIcon(subject)}</span> ${subject} - ${lesson}</h2>
                        <button class="close-modal" onclick="closeLessonModal()">&times;</button>
                    </div>
                    <div class="lesson-modal-body">
                        <div class="lesson-content">
                            <div class="lesson-video">
                                <div class="video-placeholder" onclick="playLessonVideo('${lesson}')">
                                    <i class="fas fa-play-circle"></i>
                                    <p>–í–∏–¥–µ–æ —Ö–∏—á—ç—ç–ª —ç—Ö–ª“Ø“Ø–ª—ç—Ö</p>
                                </div>
                            </div>
                            <div class="lesson-materials">
                                <h3>–ú–∞—Ç–µ—Ä–∏–∞–ª</h3>
                                <div class="material-list">
                                    <div class="material-item">
                                        <i class="fas fa-file-pdf"></i>
                                        <span>–õ–µ–∫—Ü–∏–π–Ω –º–∞—Ç–µ—Ä–∏–∞–ª.pdf</span>
                                        <button class="btn-download" onclick="downloadMaterial('${lesson}-lecture.pdf')">–¢–∞—Ç–∞—Ö</button>
                                    </div>
                                    <div class="material-item">
                                        <i class="fas fa-file-powerpoint"></i>
                                        <span>–°–ª–∞–π–¥ —Ç–∞–Ω–∏–ª—Ü—É—É–ª–≥–∞.pptx</span>
                                        <button class="btn-download" onclick="downloadMaterial('${lesson}-slides.pptx')">–¢–∞—Ç–∞—Ö</button>
                                    </div>
                                </div>
                            </div>
                            <div class="lesson-quiz">
                                <h3>–î–∞–∞–ª–≥–∞–≤–∞—Ä</h3>
                                <div class="quiz-item">
                                    <p><strong>1.</strong> –≠–Ω—ç —Ö–∏—á—ç—ç–ª–∏–π–Ω –≥–æ–ª —Å–∞–Ω–∞–∞ —é—É –≤—ç?</p>
                                    <div class="quiz-options">
                                        <label><input type="radio" name="q1" value="a"> A —Ö–∞—Ä–∏—É–ª—Ç</label>
                                        <label><input type="radio" name="q1" value="b"> B —Ö–∞—Ä–∏—É–ª—Ç</label>
                                        <label><input type="radio" name="q1" value="c"> C —Ö–∞—Ä–∏—É–ª—Ç (–ó”©–≤)</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lesson-modal-footer">
                        <button class="btn-secondary" onclick="closeLessonModal()">–•–∞–∞—Ö</button>
                        <button class="btn-primary" onclick="completeLessonProgress('${subject}', '${lesson}')">–•–∏—á—ç—ç–ª –¥—É—É—Å—Å–∞–Ω</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Add modal styles if not exists
            addLessonModalStyles();
            
            // Close modal on background click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeLessonModal();
                }
            });
            
            // Add escape key listener
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeLessonModal();
                }
            });
        }

        // Close Lesson Modal
        function closeLessonModal() {
            const modal = document.querySelector('.lesson-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }

        // Get lesson icon for subject
        function getLessonIcon(subject) {
            const icons = {
                '–ú–∞—Ç–µ–º–∞—Ç–∏–∫': 'üî¢',
                '–§–∏–∑–∏–∫': '‚öõÔ∏è',
                '–•–∏–º–∏': 'üß™',
                '–ë–∏–æ–ª–æ–≥–∏': 'üåø',
                '–¢“Ø“Ø—Ö': 'üìú',
                '–ú–æ–Ω–≥–æ–ª —Ö—ç–ª': 'üìö'
            };
            return icons[subject] || 'üìñ';
        }

        // Play Lesson Video
        function playLessonVideo(lesson) {
            showNotification(`üé• ${lesson} –≤–∏–¥–µ–æ —Ö–∏—á—ç—ç–ª–∏–π–≥ —ç—Ö–ª“Ø“Ø–ª–∂ –±–∞–π–Ω–∞...`, 'success');
            // Here you would integrate with video player
        }

        // Download Material
        function downloadMaterial(filename) {
            showNotification(`üì• ${filename} —Ç–∞—Ç–∞–∂ –±–∞–π–Ω–∞...`, 'info');
            // Here you would implement actual download functionality
        }

        // Complete Lesson Progress
        function completeLessonProgress(subject, lesson) {
            // Update progress bar animation
            showNotification(`‚úÖ ${subject} - ${lesson} —Ö–∏—á—ç—ç–ª –∞–º–∂–∏–ª—Ç—Ç–∞–π –¥—É—É—Å–ª–∞–∞! üéâ`, 'success');
            closeLessonModal();
            
            // Update progress bars (simulate progress)
            updateSubjectProgress(subject);
            
            // Add to completed lessons
            addToCompletedLessons(subject, lesson);
        }

        // Update Subject Progress
        function updateSubjectProgress(subject) {
            const categoryCards = document.querySelectorAll('.category-card');
            categoryCards.forEach(card => {
                const cardSubject = card.querySelector('h4').textContent;
                if (cardSubject === subject) {
                    const progressBar = card.querySelector('.progress-fill');
                    const progressText = card.querySelector('.progress-text');
                    const currentWidth = parseInt(progressBar.style.width) || parseInt(progressBar.getAttribute('data-progress')) || 0;
                    const newWidth = Math.min(currentWidth + 10, 100);
                    
                    progressBar.style.width = newWidth + '%';
                    progressText.textContent = newWidth + '% –¥—É—É—Å—Å–∞–Ω';
                    
                    // Add completion animation
                    if (newWidth >= 100) {
                        card.style.background = 'linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(255,255,255,0.95))';
                        card.style.borderColor = 'rgba(34, 197, 94, 0.3)';
                        showNotification(`üéä ${subject} —Ö–∏—á—ç—ç–ª –±“Ø—Ä—ç–Ω –¥—É—É—Å–ª–∞–∞!`, 'success');
                    }
                }
            });
        }

        // Add to Completed Lessons
        function addToCompletedLessons(subject, lesson) {
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            
            // Update recent lessons list
            const recentLessons = document.querySelector('.lesson-list');
            if (recentLessons) {
                const newLessonItem = document.createElement('div');
                newLessonItem.className = 'lesson-item completed';
                newLessonItem.innerHTML = `
                    <div class="lesson-icon">${getLessonIcon(subject)}</div>
                    <div class="lesson-info">
                        <h4>${lesson}</h4>
                        <p>${subject} —Ö–∏—á—ç—ç–ª</p>
                        <div class="lesson-tags">
                            <span class="tag completed">–î—É—É—Å—Å–∞–Ω</span>
                        </div>
                    </div>
                    <div class="lesson-score">100%</div>
                `;
                
                // Add to top of list
                recentLessons.insertBefore(newLessonItem, recentLessons.firstChild);
                
                // Remove if more than 5 items
                const lessonItems = recentLessons.querySelectorAll('.lesson-item');
                if (lessonItems.length > 5) {
                    lessonItems[lessonItems.length - 1].remove();
                }
            }
        }

        // Open Subject Category
        function openSubject(subject) {
            const subjectData = {
                '–ú–∞—Ç–µ–º–∞—Ç–∏–∫': {
                    icon: 'üî¢',
                    lessons: ['–ê–ª–≥–µ–±—Ä', '–ì–µ–æ–º–µ—Ç—Ä', '–¢–æ–æ–ª–ª—ã–Ω –∞—Ä–≥–∞', '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫', '–î–∏—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª —Ç—ç–≥—à–∏—Ç–≥—ç–ª'],
                    description: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∏–π–Ω “Ø–Ω–¥—Å—ç–Ω –æ–π–ª–≥–æ–ª—Ç—É—É–¥ –±–æ–ª–æ–Ω –ø—Ä–∞–∫—Ç–∏–∫ –∞—Å—É—É–¥–ª—É—É–¥',
                    color: '#3b82f6'
                },
                '–§–∏–∑–∏–∫': {
                    icon: '‚öõÔ∏è', 
                    lessons: ['–ú–µ—Ö–∞–Ω–∏–∫', '–¢–µ—Ä–º–æ–¥–∏–Ω–∞–º–∏–∫', '–¶–∞—Ö–∏–ª–≥–∞–∞–Ω', '–û–ø—Ç–∏–∫', '–ê—Ç–æ–º—ã–Ω —Ñ–∏–∑–∏–∫'],
                    description: '–ë–∞–π–≥–∞–ª–∏–π–Ω —Ö—É—É–ª–∏—É–¥ –±–æ–ª–æ–Ω —Ñ–∏–∑–∏–∫–∏–π–Ω “Ø–∑—ç–≥–¥–ª“Ø“Ø–¥',
                    color: '#8b5cf6'
                },
                '–•–∏–º–∏': {
                    icon: 'üß™',
                    lessons: ['–û—Ä–≥–∞–Ω–∏–∫ —Ö–∏–º–∏', '–û—Ä–≥–∞–Ω–∏–∫ –±—É—Å —Ö–∏–º–∏', '–ê–Ω–∞–ª–∏—Ç–∏–∫ —Ö–∏–º–∏', '–§–∏–∑–∏–∫ —Ö–∏–º–∏', '–ë–∏–æ—Ö–∏–º–∏'],
                    description: '–•–∏–º–∏–π–Ω —ç–ª–µ–º–µ–Ω—Ç“Ø“Ø–¥ –±–æ–ª–æ–Ω —Ç—ç–¥–≥—ç—ç—Ä–∏–π–Ω —Ö–æ–æ—Ä–æ–Ω–¥ –±–æ–ª–æ—Ö —É—Ä–≤–∞–ª—É—É–¥',
                    color: '#06b6d4'
                },
                '–ë–∏–æ–ª–æ–≥–∏': {
                    icon: 'üåø',
                    lessons: ['–≠—Å–∏–π–Ω –±–∏–æ–ª–æ–≥–∏', '–ì–µ–Ω–µ—Ç–∏–∫', '–ï–≤–æ–ª—é—Ü–∏', '–≠–∫–æ–ª–æ–≥–∏', '–ú–æ–ª–µ–∫—É–ª –±–∏–æ–ª–æ–≥–∏'],
                    description: '–ê–º—å–¥ –æ—Ä–≥–∞–Ω–∏–∑–º—É—É–¥—ã–Ω –±“Ø—Ç—ç—Ü, “Ø–π–ª –∞–∂–∏–ª–ª–∞–≥–∞–∞',
                    color: '#10b981'
                },
                '–¢“Ø“Ø—Ö': {
                    icon: 'üìú',
                    lessons: ['–ú–æ–Ω–≥–æ–ª—ã–Ω —Ç“Ø“Ø—Ö', '–î—ç–ª—Ö–∏–π–Ω —Ç“Ø“Ø—Ö', '–°–æ—ë–ª—ã–Ω —Ç“Ø“Ø—Ö', '–ê—Ä—Ö–µ–æ–ª–æ–≥–∏', '–ú—É–∑–µ–π —Å—É–¥–ª–∞–ª'],
                    description: '”®–Ω–≥”©—Ä—Å”©–Ω —Ü–∞–≥ “Ø–µ–∏–π–Ω —Ç“Ø“Ø—Ö –±–æ–ª–æ–Ω —Å–æ—ë–ª—ã–Ω ”©–≤',
                    color: '#f59e0b'
                },
                '–ú–æ–Ω–≥–æ–ª —Ö—ç–ª': {
                    icon: 'üìö',
                    lessons: ['–î“Ø—Ä–º –∑“Ø–π', '–£—Ç–≥–∞ –∑“Ø–π', '–£—Ä–∞–Ω –∑–æ—Ö–∏–æ–ª', '–•—ç–ª —à–∏–Ω–∂–ª—ç–ª', '–û—Ä—á—É—É–ª–≥–∞ —Å—É–¥–ª–∞–ª'],
                    description: '–ú–æ–Ω–≥–æ–ª —Ö—ç–ª–Ω–∏–π –¥“Ø—Ä—ç–º, —É—Ç–≥–∞ –±–æ–ª–æ–Ω —É—Ä–∞–Ω –∑–æ—Ö–∏–æ–ª—ã–Ω —Å—É–¥–ª–∞–≥–∞–∞',
                    color: '#ef4444'
                }
            };

            const data = subjectData[subject];
            if (data) {
                // Create detailed subject modal
                const modal = document.createElement('div');
                modal.className = 'subject-detail-modal';
                modal.innerHTML = `
                    <div class="subject-detail-content">
                        <div class="subject-detail-header" style="background: linear-gradient(135deg, ${data.color}, ${data.color}aa)">
                            <h2>${data.icon} ${subject}</h2>
                            <button class="close-modal" onclick="closeSubjectModal()">&times;</button>
                        </div>
                        <div class="subject-detail-body">
                            <p class="subject-description">${data.description}</p>
                            <h3>–•–∏—á—ç—ç–ª–∏–π–Ω –∂–∞–≥—Å–∞–∞–ª—Ç</h3>
                            <div class="subject-lesson-list">
                                ${data.lessons.map((lesson, index) => `
                                    <div class="subject-lesson-item" onclick="openLesson('${subject}', '${lesson}')">
                                        <span class="lesson-number">${index + 1}</span>
                                        <span class="lesson-title">${lesson}</span>
                                        <span class="lesson-status">üìñ</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
                
                // Add subject modal styles
                addSubjectModalStyles();
                
                // Close on background click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        closeSubjectModal();
                    }
                });
            }
        }

        // Close Subject Modal
        function closeSubjectModal() {
            const modal = document.querySelector('.subject-detail-modal');
            if (modal) {
                modal.remove();
            }
        }

        // Add Lesson Modal Styles
        function addLessonModalStyles() {
            if (!document.getElementById('lesson-modal-styles')) {
                const styles = document.createElement('style');
                styles.id = 'lesson-modal-styles';
                styles.textContent = `
                    .lesson-modal {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0,0,0,0.8);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 10000;
                        animation: fadeIn 0.3s ease;
                    }
                    
                    .lesson-modal-content {
                        background: white;
                        border-radius: 20px;
                        width: 90%;
                        max-width: 900px;
                        max-height: 90vh;
                        overflow: hidden;
                        display: flex;
                        flex-direction: column;
                        animation: slideUp 0.3s ease;
                    }
                    
                    .lesson-modal-header {
                        padding: 25px;
                        border-bottom: 2px solid #f1f5f9;
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        background: linear-gradient(135deg, #667eea, #764ba2);
                        color: white;
                    }
                    
                    .lesson-modal-body {
                        flex: 1;
                        overflow-y: auto;
                        padding: 30px;
                    }
                    
                    .video-placeholder {
                        background: #f8fafc;
                        border: 2px dashed #cbd5e1;
                        border-radius: 12px;
                        height: 300px;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: #64748b;
                        cursor: pointer;
                        transition: all 0.3s;
                        margin-bottom: 30px;
                    }
                    
                    .video-placeholder:hover {
                        background: #f1f5f9;
                        border-color: #94a3b8;
                        transform: scale(1.02);
                    }
                    
                    .video-placeholder i {
                        font-size: 4rem;
                        margin-bottom: 15px;
                        color: #667eea;
                    }
                    
                    @keyframes fadeOut {
                        from { opacity: 1; }
                        to { opacity: 0; }
                    }
                `;
                document.head.appendChild(styles);
            }
        }

        // Add Subject Modal Styles
        function addSubjectModalStyles() {
            if (!document.getElementById('subject-modal-styles')) {
                const styles = document.createElement('style');
                styles.id = 'subject-modal-styles';
                styles.textContent = `
                    .subject-detail-modal {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0,0,0,0.8);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 10000;
                        animation: fadeIn 0.3s ease;
                    }
                    
                    .subject-detail-content {
                        background: white;
                        border-radius: 20px;
                        width: 90%;
                        max-width: 700px;
                        max-height: 90vh;
                        overflow: hidden;
                        display: flex;
                        flex-direction: column;
                    }
                    
                    .subject-detail-header {
                        padding: 25px;
                        color: white;
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                    }
                    
                    .subject-detail-body {
                        padding: 30px;
                        overflow-y: auto;
                    }
                    
                    .subject-description {
                        font-size: 1.1rem;
                        color: #64748b;
                        margin-bottom: 30px;
                        line-height: 1.6;
                    }
                    
                    .subject-lesson-list {
                        display: flex;
                        flex-direction: column;
                        gap: 15px;
                    }
                    
                    .subject-lesson-item {
                        display: flex;
                        align-items: center;
                        gap: 15px;
                        padding: 15px;
                        background: #f8fafc;
                        border-radius: 12px;
                        cursor: pointer;
                        transition: all 0.3s;
                        border: 2px solid transparent;
                    }
                    
                    .subject-lesson-item:hover {
                        background: #f1f5f9;
                        transform: translateX(10px);
                        border-color: #e2e8f0;
                    }
                    
                    .lesson-number {
                        width: 30px;
                        height: 30px;
                        border-radius: 50%;
                        background: #667eea;
                        color: white;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-weight: 600;
                        font-size: 0.9rem;
                    }
                    
                    .lesson-title {
                        flex: 1;
                        font-weight: 600;
                        color: #1e293b;
                    }
                    
                    .lesson-status {
                        font-size: 1.2rem;
                    }
                `;
                document.head.appendChild(styles);
            }
        }

        // Initialize lesson system when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Add click events to category cards
            const categoryCards = document.querySelectorAll('.category-card');
            categoryCards.forEach(card => {
                const subject = card.querySelector('h4').textContent;
                card.addEventListener('click', () => openSubject(subject));
            });
            
            // Add click events to lesson items
            const lessonItems = document.querySelectorAll('.lesson-item');
            lessonItems.forEach(item => {
                const lessonTitle = item.querySelector('h4').textContent;
                const subjectText = item.querySelector('p').textContent;
                const subject = subjectText.replace(' —Ö–∏—á—ç—ç–ª', '');
                item.addEventListener('click', () => openLesson(subject, lessonTitle));
            });
        });
    </script>
</body>
</html>
